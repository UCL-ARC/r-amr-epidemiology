<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>R for AMR Epidemiology: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="manifest" href="site.webmanifest">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Software Carpentry" src="assets/images/software-logo.svg">
</div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="assets/images/software-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      R for AMR Epidemiology
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            R for AMR Epidemiology
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  R for AMR Epidemiology
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-rstudio-intro.html">1. Introduction to R and RStudio</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-project-intro.html">2. Project Management With RStudio</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-seeking-help.html">3. Seeking Help</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-data-structures-part1.html">4. Data Structures</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-data-structures-part2.html">5. Exploring Data Frames</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-filedir.html">6. Navigating Files and Directories</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-basics.html">7. Automated Version Control</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-setup.html">8. Setting Up Git</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-create.html">9. Creating a Repository</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-changes.html">10. Tracking Changes</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="11-history.html">11. Exploring History</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="12-ignore.html">12. Ignoring Things</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="13-supplemental-rstudio.html">13. Supplemental: Using Git from RStudio</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush15">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading15">
        <a href="14-data-subsetting.html">14. Subsetting Data</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush16">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading16">
        <a href="15-plot-ggplot2.html">15. Creating Publication-Quality Graphics with ggplot2</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush17">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading17">
        <a href="16-writing-data.html">16. Writing Data</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush18">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading18">
        <a href="17-github.html">17. Remotes in GitHub</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush19">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading19">
        <a href="18-collab.html">18. Collaborating</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush20">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading20">
        <a href="19-conflict.html">19. Conflicts</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush21">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading21">
        <a href="20-dplyr.html">20. Data Frame Manipulation with dplyr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush22">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading22">
        <a href="21-tidyr.html">21. Data Frame Manipulation with tidyr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush23">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading23">
        <a href="22-knitr-markdown.html">22. Producing Reports With knitr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush24">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading24">
        <a href="27-wrap-up.html">23. Writing Good Software</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li>
<li><a href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-rstudio-intro"><p>Content from <a href="01-rstudio-intro.html">Introduction to R and RStudio</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/01-rstudio-intro.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How to find your way around RStudio?</li>
<li>How to interact with R?</li>
<li>How to manage your environment?</li>
<li>How to install packages?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe the purpose and use of each pane in RStudio</li>
<li>Locate buttons and options in RStudio</li>
<li>Define a variable</li>
<li>Assign data to a variable</li>
<li>Manage a workspace in an interactive R session</li>
<li>Use mathematical and comparison operators</li>
<li>Call functions</li>
<li>Manage packages</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="before-starting-the-workshop">Before Starting The Workshop<a class="anchor" aria-label="anchor" href="#before-starting-the-workshop"></a>
<a class="anchor" aria-label="anchor" href="#before-starting-the-workshop"></a>
</h2>
<hr class="half-width">
<p>Please ensure you have the latest version of R and RStudio installed
on your machine. This is important, as some packages used in the
workshop may not install correctly (or at all) if R is not up to
date.</p>
<ul>
<li><a href="https://www.r-project.org/" class="external-link">Download and install the latest
version of R here</a></li>
<li><a href="https://www.rstudio.com/products/rstudio/download/#download" class="external-link">Download
and install RStudio here</a></li>
</ul></section><section><h2 class="section-heading" id="why-use-r-and-r-studio">Why use R and R studio?<a class="anchor" aria-label="anchor" href="#why-use-r-and-r-studio"></a>
<a class="anchor" aria-label="anchor" href="#why-use-r-and-r-studio"></a>
</h2>
<hr class="half-width">
<p>Welcome to the R portion of the Software Carpentry workshop!</p>
<p>Science is a multi-step process: once you’ve designed an experiment
and collected data, the real fun begins with analysis! Throughout this
lesson, we’re going to teach you some of the fundamentals of the R
language as well as some best practices for organizing code for
scientific projects that will make your life easier.</p>
<p>Although we could use a spreadsheet in Microsoft Excel or Google
sheets to analyze our data, these tools are limited in their flexibility
and accessibility. Critically, they also are difficult to share steps
which explore and change the raw data, which is key to <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1003285" class="external-link">“reproducible”
research</a>.</p>
<p>Therefore, this lesson will teach you how to begin exploring your
data using R and RStudio. The R program is available for Windows, Mac,
and Linux operating systems, and is a freely-available where you
downloaded it above. To run R, all you need is the R program.</p>
<p>However, to make using R easier, we will use the program RStudio,
which we also downloaded above. RStudio is a free, open-source,
Integrated Development Environment (IDE). It provides a built-in editor,
works on all platforms (including on servers) and provides many
advantages such as integration with version control and project
management.</p>
</section><section><h2 class="section-heading" id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<hr class="half-width">
<p>We will begin with raw data, perform exploratory analyses, and learn
how to plot results graphically. This example starts with a dataset from
<a href="https://www.gapminder.org" class="external-link">gapminder.org</a> containing
population information for many countries through time. Can you read the
data into R? Can you plot the population for Senegal? Can you calculate
the average income for countries on the continent of Asia? By the end of
these lessons you will be able to do things like plot the populations
for all of these countries in under a minute!</p>
<p><strong>Basic layout</strong></p>
<p>When you first open RStudio, you will be greeted by three panels:</p>
<ul>
<li>The interactive R console/Terminal (entire left)</li>
<li>Environment/History/Connections (tabbed in upper right)</li>
<li>Files/Plots/Packages/Help/Viewer (tabbed in lower right)</li>
</ul>
<figure><img src="fig/01-rstudio.png" alt="RStudio layout" class="figure mx-auto d-block"></figure><p>Once you open files, such as R scripts, an editor panel will also
open in the top left.</p>
<figure><img src="fig/01-rstudio-script.png" alt="RStudio layout with .R file open" class="figure mx-auto d-block"></figure><div id="r-scripts" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="r-scripts" class="callout-inner">
<h3 class="callout-title">R scripts<a class="anchor" aria-label="anchor" href="#r-scripts"></a>
</h3>
<div class="callout-content">
<p>Any commands that you write in the R console can be saved to a file
to be re-run again. Files containing R code to be ran in this way are
called R scripts. R scripts have <code>.R</code> at the end of their
names to let you know what they are.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="workflow-within-rstudio">Workflow within RStudio<a class="anchor" aria-label="anchor" href="#workflow-within-rstudio"></a>
<a class="anchor" aria-label="anchor" href="#workflow-within-rstudio"></a>
</h2>
<hr class="half-width">
<p>There are two main ways one can work within RStudio:</p>
<ol style="list-style-type: decimal">
<li>Test and play within the interactive R console then copy code into a
.R file to run later.</li>
</ol>
<ul>
<li>This works well when doing small tests and initially starting
off.</li>
<li>It quickly becomes laborious</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Start writing in a .R file and use RStudio’s short cut keys for the
Run command to push the current line, selected lines or modified lines
to the interactive R console.</li>
</ol>
<ul>
<li>This is a great way to start; all your code is saved for later</li>
<li>You will be able to run the file you create from within RStudio or
using R’s <code>source()</code> function.</li>
</ul>
<div id="tip-running-segments-of-your-code" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-running-segments-of-your-code" class="callout-inner">
<h3 class="callout-title">Tip: Running segments of your code<a class="anchor" aria-label="anchor" href="#tip-running-segments-of-your-code"></a>
</h3>
<div class="callout-content">
<p>RStudio offers you great flexibility in running code from within the
editor window. There are buttons, menu choices, and keyboard shortcuts.
To run the current line, you can</p>
<ol style="list-style-type: decimal">
<li>click on the <code>Run</code> button above the editor panel, or</li>
<li>select “Run Lines” from the “Code” menu, or</li>
<li>hit <kbd>Ctrl</kbd>+<kbd>Return</kbd> in Windows or Linux or
<kbd>⌘</kbd>+<kbd>Return</kbd> on OS X. (This shortcut can also be seen
by hovering the mouse over the button). To run a block of code, select
it and then <code>Run</code>. If you have modified a line of code within
a block of code you have just run, there is no need to reselect the
section and <code>Run</code>, you can use the next button along,
<code>Re-run the previous region</code>. This will run the previous code
block including the modifications you have made.</li>
</ol>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="introduction-to-r">Introduction to R<a class="anchor" aria-label="anchor" href="#introduction-to-r"></a>
<a class="anchor" aria-label="anchor" href="#introduction-to-r"></a>
</h2>
<hr class="half-width">
<p>Much of your time in R will be spent in the R interactive console.
This is where you will run all of your code, and can be a useful
environment to try out ideas before adding them to an R script file.
This console in RStudio is the same as the one you would get if you
typed in <code>R</code> in your command-line environment.</p>
<p>The first thing you will see in the R interactive session is a bunch
of information, followed by a “&gt;” and a blinking cursor. In many ways
this is similar to the shell environment you learned about during the
shell lessons: it operates on the same idea of a “Read, evaluate, print
loop”: you type in commands, R tries to execute them, and then returns a
result.</p>
</section><section><h2 class="section-heading" id="using-r-as-a-calculator">Using R as a calculator<a class="anchor" aria-label="anchor" href="#using-r-as-a-calculator"></a>
<a class="anchor" aria-label="anchor" href="#using-r-as-a-calculator"></a>
</h2>
<hr class="half-width">
<p>The simplest thing you could do with R is to do arithmetic:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">+</span> <span class="fl">100</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 101</code></pre>
</div>
<p>And R will print out the answer, with a preceding “[1]”. [1] is the
index of the first element of the line being printed in the console. For
more information on indexing vectors, see <a href="https://swcarpentry.github.io/r-novice-gapminder/06-data-subsetting/index.html" class="external-link">Episode
6: Subsetting Data</a>.</p>
<p>If you type in an incomplete command, R will wait for you to complete
it. If you are familiar with Unix Shell’s bash, you may recognize this
behavior from bash.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">+</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>+</code></pre>
</div>
<p>Any time you hit return and the R session shows a “+” instead of a
“&gt;”, it means it’s waiting for you to complete the command. If you
want to cancel a command you can hit <kbd>Esc</kbd> and RStudio will
give you back the “&gt;” prompt.</p>
<div id="tip-canceling-commands" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-canceling-commands" class="callout-inner">
<h3 class="callout-title">Tip: Canceling commands<a class="anchor" aria-label="anchor" href="#tip-canceling-commands"></a>
</h3>
<div class="callout-content">
<p>If you’re using R from the command line instead of from within
RStudio, you need to use <kbd>Ctrl</kbd>+<kbd>C</kbd> instead of
<kbd>Esc</kbd> to cancel the command. This applies to Mac users as
well!</p>
<p>Canceling a command isn’t only useful for killing incomplete
commands: you can also use it to tell R to stop running code (for
example if it’s taking much longer than you expect), or to get rid of
the code you’re currently writing.</p>
</div>
</div>
</div>
<p>When using R as a calculator, the order of operations is the same as
you would have learned back in school.</p>
<p>From highest to lowest precedence:</p>
<ul>
<li>Parentheses: <code>(</code>, <code>)</code>
</li>
<li>Exponents: <code>^</code> or <code>**</code>
</li>
<li>Multiply: <code>*</code>
</li>
<li>Divide: <code>/</code>
</li>
<li>Add: <code>+</code>
</li>
<li>Subtract: <code>-</code>
</li>
</ul>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span> <span class="op">*</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 13</code></pre>
</div>
<p>Use parentheses to group operations in order to force the order of
evaluation if it differs from the default, or to make clear what you
intend.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span><span class="op">)</span> <span class="op">*</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 16</code></pre>
</div>
<p>This can get unwieldy when not needed, but clarifies your intentions.
Remember that others may later read your code.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="fl">3</span> <span class="op">+</span> <span class="op">(</span><span class="fl">5</span> <span class="op">*</span> <span class="op">(</span><span class="fl">2</span> <span class="op">^</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># hard to read</span></span>
<span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span> <span class="op">*</span> <span class="fl">2</span> <span class="op">^</span> <span class="fl">2</span>       <span class="co"># clear, if you remember the rules</span></span>
<span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span> <span class="op">*</span> <span class="op">(</span><span class="fl">2</span> <span class="op">^</span> <span class="fl">2</span><span class="op">)</span>     <span class="co"># if you forget some rules, this might help</span></span></code></pre>
</div>
<p>The text after each line of code is called a “comment”. Anything that
follows after the hash (or octothorpe) symbol <code>#</code> is ignored
by R when it executes code.</p>
<p>Really small or large numbers get a scientific notation:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2</span><span class="op">/</span><span class="fl">10000</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2e-04</code></pre>
</div>
<p>Which is shorthand for “multiplied by <code>10^XX</code>”. So
<code>2e-4</code> is shorthand for <code>2 * 10^(-4)</code>.</p>
<p>You can write numbers in scientific notation too:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">5e3</span>  <span class="co"># Note the lack of minus here</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5000</code></pre>
</div>
</section><section><h2 class="section-heading" id="mathematical-functions">Mathematical functions<a class="anchor" aria-label="anchor" href="#mathematical-functions"></a>
<a class="anchor" aria-label="anchor" href="#mathematical-functions"></a>
</h2>
<hr class="half-width">
<p>R has many built in mathematical functions. To call a function, we
can type its name, followed by open and closing parentheses. Functions
take arguments as inputs, anything we type inside the parentheses of a
function is considered an argument. Depending on the function, the
number of arguments can vary from none to multiple. For example:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">getwd</span><span class="op">(</span><span class="op">)</span> <span class="co">#returns an absolute filepath</span></span></code></pre>
</div>
<p>doesn’t require an argument, whereas for the next set of mathematical
functions we will need to supply the function a value in order to
compute the result.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sin</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>  <span class="co"># trigonometry functions</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.841471</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">log</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>  <span class="co"># natural logarithm</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">log10</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="co"># base-10 logarithm</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">exp</span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span> <span class="co"># e^(1/2)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1.648721</code></pre>
</div>
<p>Don’t worry about trying to remember every function in R. You can
look them up on Google, or if you can remember the start of the
function’s name, use the tab completion in RStudio.</p>
<p>This is one advantage that RStudio has over R on its own, it has
auto-completion abilities that allow you to more easily look up
functions, their arguments, and the values that they take.</p>
<p>Typing a <code>?</code> before the name of a command will open the
help page for that command. When using RStudio, this will open the
‘Help’ pane; if using R in the terminal, the help page will open in your
browser. The help page will include a detailed description of the
command and how it works. Scrolling to the bottom of the help page will
usually show a collection of code examples which illustrate command
usage. We’ll go through an example later.</p>
</section><section><h2 class="section-heading" id="comparing-things">Comparing things<a class="anchor" aria-label="anchor" href="#comparing-things"></a>
<a class="anchor" aria-label="anchor" href="#comparing-things"></a>
</h2>
<hr class="half-width">
<p>We can also do comparisons in R:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">==</span> <span class="fl">1</span>  <span class="co"># equality (note two equals signs, read as "is equal to")</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">!=</span> <span class="fl">2</span>  <span class="co"># inequality (read as "is not equal to")</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&lt;</span> <span class="fl">2</span>  <span class="co"># less than</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&lt;=</span> <span class="fl">1</span>  <span class="co"># less than or equal to</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">0</span>  <span class="co"># greater than</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">9</span> <span class="co"># greater than or equal to</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div id="tip-comparing-numbers" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-comparing-numbers" class="callout-inner">
<h3 class="callout-title">Tip: Comparing Numbers<a class="anchor" aria-label="anchor" href="#tip-comparing-numbers"></a>
</h3>
<div class="callout-content">
<p>A word of warning about comparing numbers: you should never use
<code>==</code> to compare two numbers unless they are integers (a data
type which can specifically represent only whole numbers).</p>
<p>Computers may only represent decimal numbers with a certain degree of
precision, so two numbers which look the same when printed out by R, may
actually have different underlying representations and therefore be
different by a small margin of error (called Machine numeric
tolerance).</p>
<p>Instead you should use the <code>all.equal</code> function.</p>
<p>Further reading: <a href="https://floating-point-gui.de/" class="external-link">http://floating-point-gui.de/</a></p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="variables-and-assignment">Variables and assignment<a class="anchor" aria-label="anchor" href="#variables-and-assignment"></a>
<a class="anchor" aria-label="anchor" href="#variables-and-assignment"></a>
</h2>
<hr class="half-width">
<p>We can store values in variables using the assignment operator
<code>&lt;-</code>, like this:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">/</span><span class="fl">40</span></span></code></pre>
</div>
<p>Notice that assignment does not print a value. Instead, we stored it
for later in something called a <strong>variable</strong>.
<code>x</code> now contains the <strong>value</strong>
<code>0.025</code>:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.025</code></pre>
</div>
<p>More precisely, the stored value is a <em>decimal approximation</em>
of this fraction called a <a href="https://en.wikipedia.org/wiki/Floating_point" class="external-link">floating point
number</a>.</p>
<p>Look for the <code>Environment</code> tab in the top right panel of
RStudio, and you will see that <code>x</code> and its value have
appeared. Our variable <code>x</code> can be used in place of a number
in any calculation that expects a number:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">log</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] -3.688879</code></pre>
</div>
<p>Notice also that variables can be reassigned:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">100</span></span></code></pre>
</div>
<p><code>x</code> used to contain the value 0.025 and now it has the
value 100.</p>
<p>Assignment values can contain the variable being assigned to:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span> <span class="co">#notice how RStudio updates its description of x on the top right tab</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">*</span> <span class="fl">2</span></span></code></pre>
</div>
<p>The right hand side of the assignment can be any valid R expression.
The right hand side is <em>fully evaluated</em> before the assignment
occurs.</p>
<p>Variable names can contain letters, numbers, underscores and periods
but no spaces. They must start with a letter or a period followed by a
letter (they cannot start with a number nor an underscore). Variables
beginning with a period are hidden variables. Different people use
different conventions for long variable names, these include</p>
<ul>
<li>periods.between.words</li>
<li>underscores_between_words</li>
<li>camelCaseToSeparateWords</li>
</ul>
<p>What you use is up to you, but <strong>be consistent</strong>.</p>
<p>It is also possible to use the <code>=</code> operator for
assignment:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">40</span></span></code></pre>
</div>
<p>But this is much less common among R users. The most important thing
is to <strong>be consistent</strong> with the operator you use. There
are occasionally places where it is less confusing to use
<code>&lt;-</code> than <code>=</code>, and it is the most common symbol
used in the community. So the recommendation is to use
<code>&lt;-</code>.</p>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1<a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<p>Which of the following are valid R variable names?</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a>min_height</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a>max.height</span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a>_age</span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a>.mass</span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a>MaxLength</span>
<span id="cb43-6"><a href="#cb43-6" tabindex="-1"></a>min<span class="sc">-</span>length</span>
<span id="cb43-7"><a href="#cb43-7" tabindex="-1"></a><span class="dv">2</span>widths</span>
<span id="cb43-8"><a href="#cb43-8" tabindex="-1"></a>celsius2kelvin</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Solution to challenge 1 </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The following can be used as R variables:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">min_height</span></span>
<span><span class="va">max.height</span></span>
<span><span class="va">MaxLength</span></span>
<span><span class="va">celsius2kelvin</span></span></code></pre>
</div>
<p>The following creates a hidden variable:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">.mass</span></span></code></pre>
</div>
<p>The following will not be able to be used to create a variable</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a>_age</span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a>min<span class="sc">-</span>length</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a><span class="dv">2</span>widths</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="vectorization">Vectorization<a class="anchor" aria-label="anchor" href="#vectorization"></a>
<a class="anchor" aria-label="anchor" href="#vectorization"></a>
</h2>
<hr class="half-width">
<p>One final thing to be aware of is that R is <em>vectorized</em>,
meaning that variables and functions can have vectors as values. In
contrast to physics and mathematics, a vector in R describes a set of
values in a certain order of the same data type. For example:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  2  4  8 16 32</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span>
<span><span class="fl">2</span><span class="op">^</span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  2  4  8 16 32</code></pre>
</div>
<p>This is incredibly powerful; we will discuss this further in an
upcoming lesson.</p>
</section><section><h2 class="section-heading" id="managing-your-environment">Managing your environment<a class="anchor" aria-label="anchor" href="#managing-your-environment"></a>
<a class="anchor" aria-label="anchor" href="#managing-your-environment"></a>
</h2>
<hr class="half-width">
<p>There are a few useful commands you can use to interact with the R
session.</p>
<p><code>ls</code> will list all of the variables and functions stored
in the global environment (your working R session):</p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ls</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "x" "y"</code></pre>
</div>
<div id="tip-hidden-objects" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-hidden-objects" class="callout-inner">
<h3 class="callout-title">Tip: hidden objects<a class="anchor" aria-label="anchor" href="#tip-hidden-objects"></a>
</h3>
<div class="callout-content">
<p>Like in the shell, <code>ls</code> will hide any variables or
functions starting with a “.” by default. To list all objects, type
<code>ls(all.names=TRUE)</code> instead</p>
</div>
</div>
</div>
<p>Note here that we didn’t give any arguments to <code>ls</code>, but
we still needed to give the parentheses to tell R to call the
function.</p>
<p>If we type <code>ls</code> by itself, R prints a bunch of code
instead of a listing of objects.</p>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ls</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>function (name, pos = -1L, envir = as.environment(pos), all.names = FALSE,
    pattern, sorted = TRUE)
{
    if (!missing(name)) {
        pos &lt;- tryCatch(name, error = function(e) e)
        if (inherits(pos, "error")) {
            name &lt;- substitute(name)
            if (!is.character(name))
                name &lt;- deparse(name)
            warning(gettextf("%s converted to character string",
                sQuote(name)), domain = NA)
            pos &lt;- name
        }
    }
    all.names &lt;- .Internal(ls(envir, all.names, sorted))
    if (!missing(pattern)) {
        if ((ll &lt;- length(grep("[", pattern, fixed = TRUE))) &amp;&amp;
            ll != length(grep("]", pattern, fixed = TRUE))) {
            if (pattern == "[") {
                pattern &lt;- "\\["
                warning("replaced regular expression pattern '[' by  '\\\\['")
            }
            else if (length(grep("[^\\\\]\\[&lt;-", pattern))) {
                pattern &lt;- sub("\\[&lt;-", "\\\\\\[&lt;-", pattern)
                warning("replaced '[&lt;-' by '\\\\[&lt;-' in regular expression pattern")
            }
        }
        grep(pattern, all.names, value = TRUE)
    }
    else all.names
}
&lt;bytecode: 0x561b3291be10&gt;
&lt;environment: namespace:base&gt;</code></pre>
</div>
<p>What’s going on here?</p>
<p>Like everything in R, <code>ls</code> is the name of an object, and
entering the name of an object by itself prints the contents of the
object. The object <code>x</code> that we created earlier contains 1, 2,
3, 4, 5:</p>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3 4 5</code></pre>
</div>
<p>The object <code>ls</code> contains the R code that makes the
<code>ls</code> function work! We’ll talk more about how functions work
and start writing our own later.</p>
<p>You can use <code>rm</code> to delete objects you no longer need:</p>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rm</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
</div>
<p>If you have lots of things in your environment and want to delete all
of them, you can pass the results of <code>ls</code> to the
<code>rm</code> function:</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rm</span><span class="op">(</span>list <span class="op">=</span> <span class="fu">ls</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>In this case we’ve combined the two. Like the order of operations,
anything inside the innermost parentheses is evaluated first, and so
on.</p>
<p>In this case we’ve specified that the results of <code>ls</code>
should be used for the <code>list</code> argument in <code>rm</code>.
When assigning values to arguments by name, you <em>must</em> use the
<code>=</code> operator!!</p>
<p>If instead we use <code>&lt;-</code>, there will be unintended side
effects, or you may get an error message:</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rm</span><span class="op">(</span><span class="va">list</span> <span class="op">&lt;-</span> <span class="fu">ls</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in rm(list &lt;- ls()): ... must contain names or character strings</code></pre>
</div>
<div id="tip-warnings-vs.-errors" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-warnings-vs.-errors" class="callout-inner">
<h3 class="callout-title">Tip: Warnings vs. Errors<a class="anchor" aria-label="anchor" href="#tip-warnings-vs.-errors"></a>
</h3>
<div class="callout-content">
<p>Pay attention when R does something unexpected! Errors, like above,
are thrown when R cannot proceed with a calculation. Warnings on the
other hand usually mean that the function has run, but it probably
hasn’t worked as expected.</p>
<p>In both cases, the message that R prints out usually give you clues
how to fix a problem.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="r-packages">R Packages<a class="anchor" aria-label="anchor" href="#r-packages"></a>
<a class="anchor" aria-label="anchor" href="#r-packages"></a>
</h2>
<hr class="half-width">
<p>It is possible to add functions to R by writing a package, or by
obtaining a package written by someone else. As of this writing, there
are over 10,000 packages available on CRAN (the comprehensive R archive
network). R and RStudio have functionality for managing packages:</p>
<ul>
<li>You can see what packages are installed by typing
<code>installed.packages()</code>
</li>
<li>You can install packages by typing
<code>install.packages("packagename")</code>, where
<code>packagename</code> is the package name, in quotes.</li>
<li>You can update installed packages by typing
<code>update.packages()</code>
</li>
<li>You can remove a package with
<code>remove.packages("packagename")</code>
</li>
<li>You can make a package available for use with
<code>library(packagename)</code>
</li>
</ul>
<p>Packages can also be viewed, loaded, and detached in the Packages tab
of the lower right panel in RStudio. Clicking on this tab will display
all of the installed packages with a checkbox next to them. If the box
next to a package name is checked, the package is loaded and if it is
empty, the package is not loaded. Click an empty box to load that
package and click a checked box to detach that package.</p>
<p>Packages can be installed and updated from the Package tab with the
Install and Update buttons at the top of the tab.</p>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2<a class="anchor" aria-label="anchor" href="#challenge-2"></a>
</h3>
<div class="callout-content">
<p>What will be the value of each variable after each statement in the
following program?</p>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="fl">47.5</span></span>
<span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fl">122</span></span>
<span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="va">mass</span> <span class="op">*</span> <span class="fl">2.3</span></span>
<span><span class="va">age</span> <span class="op">&lt;-</span> <span class="va">age</span> <span class="op">-</span> <span class="fl">20</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Solution to challenge 2 </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="fl">47.5</span></span></code></pre>
</div>
<p>This will give a value of 47.5 for the variable mass</p>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fl">122</span></span></code></pre>
</div>
<p>This will give a value of 122 for the variable age</p>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="va">mass</span> <span class="op">*</span> <span class="fl">2.3</span></span></code></pre>
</div>
<p>This will multiply the existing value of 47.5 by 2.3 to give a new
value of 109.25 to the variable mass.</p>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="va">age</span> <span class="op">-</span> <span class="fl">20</span></span></code></pre>
</div>
<p>This will subtract 20 from the existing value of 122 to give a new
value of 102 to the variable age.</p>
</div>
</div>
</div>
</div>
<div id="challenge-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-3" class="callout-inner">
<h3 class="callout-title">Challenge 3<a class="anchor" aria-label="anchor" href="#challenge-3"></a>
</h3>
<div class="callout-content">
<p>Run the code from the previous challenge, and write a command to
compare mass to age. Is mass larger than age?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Solution to challenge 3 </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>One way of answering this question in R is to use the
<code>&gt;</code> to set up the following:</p>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&gt;</span> <span class="va">age</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<p>This should yield a boolean value of TRUE since 109.25 is greater
than 102.</p>
</div>
</div>
</div>
</div>
<div id="challenge-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-4" class="callout-inner">
<h3 class="callout-title">Challenge 4<a class="anchor" aria-label="anchor" href="#challenge-4"></a>
</h3>
<div class="callout-content">
<p>Clean up your working environment by deleting the mass and age
variables.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Solution to challenge 4 </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>We can use the <code>rm</code> command to accomplish this task</p>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rm</span><span class="op">(</span><span class="va">age</span>, <span class="va">mass</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-5" class="callout-inner">
<h3 class="callout-title">Challenge 5<a class="anchor" aria-label="anchor" href="#challenge-5"></a>
</h3>
<div class="callout-content">
<p>Install the following packages: <code>ggplot2</code>,
<code>plyr</code>, <code>gapminder</code></p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Solution to challenge 5 </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>We can use the <code>install.packages()</code> command to install the
required packages.</p>
<div class="codewrapper sourceCode" id="cb71">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span></span>
<span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"plyr"</span><span class="op">)</span></span>
<span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"gapminder"</span><span class="op">)</span></span></code></pre>
</div>
<p>An alternate solution, to install multiple packages with a single
<code>install.packages()</code> command is:</p>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"ggplot2"</span>, <span class="st">"plyr"</span>, <span class="st">"gapminder"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>

<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use RStudio to write and run R programs.</li>
<li>R has the usual arithmetic operators and mathematical
functions.</li>
<li>Use <code>&lt;-</code> to assign values to variables.</li>
<li>Use <code>ls()</code> to list the variables in a program.</li>
<li>Use <code>rm()</code> to delete objects in a program.</li>
<li>Use <code>install.packages()</code> to install packages
(libraries).</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-02-project-intro"><p>Content from <a href="02-project-intro.html">Project Management With RStudio</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/02-project-intro.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I manage my projects in R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Create self-contained projects in RStudio</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>The scientific process is naturally incremental, and many projects
start life as random notes, some code, then a manuscript, and eventually
everything is a bit mixed together.</p>
<blockquote class="twitter-tweet">
<p>
Managing your projects in a reproducible fashion doesn’t just make your
science reproducible, it makes your life easier.
</p>
— Vince Buffalo (<span class="citation">@vsbuffalo</span>)
<a href="https://twitter.com/vsbuffalo/status/323638476153167872" class="external-link">April
15, 2013</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><p>Most people tend to organize their projects like this:</p>
<figure><img src="fig/bad_layout.png" alt="Screenshot of file manager demonstrating bad project organisation" class="figure mx-auto d-block"></figure><p>There are many reasons why we should <em>ALWAYS</em> avoid this:</p>
<ol style="list-style-type: decimal">
<li>It is really hard to tell which version of your data is the original
and which is the modified;</li>
<li>It gets really messy because it mixes files with various extensions
together;</li>
<li>It probably takes you a lot of time to actually find things, and
relate the correct figures to the exact code that has been used to
generate it;</li>
</ol>
<p>A good project layout will ultimately make your life easier:</p>
<ul>
<li>It will help ensure the integrity of your data;</li>
<li>It makes it simpler to share your code with someone else (a
lab-mate, collaborator, or supervisor);</li>
<li>It allows you to easily upload your code with your manuscript
submission;</li>
<li>It makes it easier to pick the project back up after a break.</li>
</ul></section><section><h2 class="section-heading" id="a-possible-solution">A possible solution<a class="anchor" aria-label="anchor" href="#a-possible-solution"></a>
<a class="anchor" aria-label="anchor" href="#a-possible-solution"></a>
</h2>
<hr class="half-width">
<p>Fortunately, there are tools and packages which can help you manage
your work effectively.</p>
<p>One of the most powerful and useful aspects of RStudio is its project
management functionality. We’ll be using this today to create a
self-contained, reproducible project.</p>
<div id="challenge-1-creating-a-self-contained-project" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-1-creating-a-self-contained-project" class="callout-inner">
<h3 class="callout-title">Challenge 1: Creating a self-contained project<a class="anchor" aria-label="anchor" href="#challenge-1-creating-a-self-contained-project"></a>
</h3>
<div class="callout-content">
<p>We’re going to create a new project in RStudio:</p>
<ol style="list-style-type: decimal">
<li>Click the “File” menu button, then “New Project”.</li>
<li>Click “New Directory”.</li>
<li>Click “New Project”.</li>
<li>Type in the name of the directory to store your project,
e.g. “my_project”.</li>
<li>If available, select the checkbox for “Create a git
repository.”</li>
<li>Click the “Create Project” button.</li>
</ol>
</div>
</div>
</div>
<p>The simplest way to open an RStudio project once it has been created
is to click through your file system to get to the directory where it
was saved and double click on the <code>.Rproj</code> file. This will
open RStudio and start your R session in the same directory as the
<code>.Rproj</code> file. All your data, plots and scripts will now be
relative to the project directory. RStudio projects have the added
benefit of allowing you to open multiple projects at the same time each
open to its own project directory. This allows you to keep multiple
projects open without them interfering with each other.</p>
<div id="challenge-2-opening-an-rstudio-project-through-the-file-system" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-2-opening-an-rstudio-project-through-the-file-system" class="callout-inner">
<h3 class="callout-title">Challenge 2: Opening an RStudio project through the file system<a class="anchor" aria-label="anchor" href="#challenge-2-opening-an-rstudio-project-through-the-file-system"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Exit RStudio.</li>
<li>Navigate to the directory where you created a project in Challenge
1.</li>
<li>Double click on the <code>.Rproj</code> file in that directory.</li>
</ol>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="best-practices-for-project-organization">Best practices for project organization<a class="anchor" aria-label="anchor" href="#best-practices-for-project-organization"></a>
<a class="anchor" aria-label="anchor" href="#best-practices-for-project-organization"></a>
</h2>
<hr class="half-width">
<p>Although there is no “best” way to lay out a project, there are some
general principles to adhere to that will make project management
easier:</p>
<div class="section level3">
<h3 id="treat-data-as-read-only">Treat data as read only<a class="anchor" aria-label="anchor" href="#treat-data-as-read-only"></a>
</h3>
<p>This is probably the most important goal of setting up a project.
Data is typically time consuming and/or expensive to collect. Working
with them interactively (e.g., in Excel) where they can be modified
means you are never sure of where the data came from, or how it has been
modified since collection. It is therefore a good idea to treat your
data as “read-only”.</p>
</div>
<div class="section level3">
<h3 id="data-cleaning">Data Cleaning<a class="anchor" aria-label="anchor" href="#data-cleaning"></a>
</h3>
<p>In many cases your data will be “dirty”: it will need significant
preprocessing to get into a format R (or any other programming language)
will find useful. This task is sometimes called “data munging”. Storing
these scripts in a separate folder, and creating a second “read-only”
data folder to hold the “cleaned” data sets can prevent confusion
between the two sets.</p>
</div>
<div class="section level3">
<h3 id="treat-generated-output-as-disposable">Treat generated output as disposable<a class="anchor" aria-label="anchor" href="#treat-generated-output-as-disposable"></a>
</h3>
<p>Anything generated by your scripts should be treated as disposable:
it should all be able to be regenerated from your scripts.</p>
<p>There are lots of different ways to manage this output. Having an
output folder with different sub-directories for each separate analysis
makes it easier later. Since many analyses are exploratory and don’t end
up being used in the final project, and some of the analyses get shared
between projects.</p>
<div id="tip-good-enough-practices-for-scientific-computing" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-good-enough-practices-for-scientific-computing" class="callout-inner">
<h3 class="callout-title">Tip: Good Enough Practices for Scientific Computing<a class="anchor" aria-label="anchor" href="#tip-good-enough-practices-for-scientific-computing"></a>
</h3>
<div class="callout-content">
<p><a href="https://github.com/swcarpentry/good-enough-practices-in-scientific-computing/blob/gh-pages/good-enough-practices-for-scientific-computing.pdf" class="external-link">Good
Enough Practices for Scientific Computing</a> gives the following
recommendations for project organization:</p>
<ol style="list-style-type: decimal">
<li>Put each project in its own directory, which is named after the
project.</li>
<li>Put text documents associated with the project in the
<code>doc</code> directory.</li>
<li>Put raw data and metadata in the <code>data</code> directory, and
files generated during cleanup and analysis in a <code>results</code>
directory.</li>
<li>Put source for the project’s scripts and programs in the
<code>src</code> directory, and programs brought in from elsewhere or
compiled locally in the <code>bin</code> directory.</li>
<li>Name all files to reflect their content or function.</li>
</ol>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="separate-function-definition-and-application">Separate function definition and application<a class="anchor" aria-label="anchor" href="#separate-function-definition-and-application"></a>
</h3>
<p>One of the more effective ways to work with R is to start by writing
the code you want to run directly in a .R script, and then running the
selected lines (either using the keyboard shortcuts in RStudio or
clicking the “Run” button) in the interactive R console.</p>
<p>When your project is in its early stages, the initial .R script file
usually contains many lines of directly executed code. As it matures,
reusable chunks get pulled into their own functions. It’s a good idea to
separate these functions into two separate folders; one to store useful
functions that you’ll reuse across analyses and projects, and one to
store the analysis scripts.</p>
</div>
<div class="section level3">
<h3 id="save-the-data-in-the-data-directory">Save the data in the data directory<a class="anchor" aria-label="anchor" href="#save-the-data-in-the-data-directory"></a>
</h3>
<p>Now we have a good directory structure we will now place/save the
data file in the <code>data/</code> directory.</p>
<div id="challenge-3" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-3" class="callout-inner">
<h3 class="callout-title">Challenge 3<a class="anchor" aria-label="anchor" href="#challenge-3"></a>
</h3>
<div class="callout-content">
<p>Download the gapminder data from <a href="data/gapminder_data.csv">this link to a csv file</a>.</p>
<ol style="list-style-type: decimal">
<li>Download the file (right mouse click on the link above -&gt; “Save
link as” / “Save file as”, or click on the link and after the page
loads, press <kbd>Ctrl</kbd>+<kbd>S</kbd> or choose File -&gt; “Save
page as”)</li>
<li>Make sure it’s saved under the name
<code>gapminder_data.csv</code>
</li>
<li>Save the file in the <code>data/</code> folder within your
project.</li>
</ol>
<p>We will load and inspect these data later.</p>
</div>
</div>
</div>
<div id="challenge-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-4" class="callout-inner">
<h3 class="callout-title">Challenge 4<a class="anchor" aria-label="anchor" href="#challenge-4"></a>
</h3>
<div class="callout-content">
<p>It is useful to get some general idea about the dataset, directly
from the command line, before loading it into R. Understanding the
dataset better will come in handy when making decisions on how to load
it in R. Use the command-line shell to answer the following
questions:</p>
<ol style="list-style-type: decimal">
<li>What is the size of the file?</li>
<li>How many rows of data does it contain?</li>
<li>What kinds of values are stored in this file?</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to Challenge 4
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>By running these commands in the shell:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-lh</span> data/gapminder_data.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>-rw-r--r-- 1 runner docker 80K Aug  1 11:19 data/gapminder_data.csv</code></pre>
</div>
<p>The file size is 80K.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> data/gapminder_data.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1705 data/gapminder_data.csv</code></pre>
</div>
<p>There are 1705 lines. The data looks like:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">head</span> data/gapminder_data.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>country,year,pop,continent,lifeExp,gdpPercap
Afghanistan,1952,8425333,Asia,28.801,779.4453145
Afghanistan,1957,9240934,Asia,30.332,820.8530296
Afghanistan,1962,10267083,Asia,31.997,853.10071
Afghanistan,1967,11537966,Asia,34.02,836.1971382
Afghanistan,1972,13079460,Asia,36.088,739.9811058
Afghanistan,1977,14880372,Asia,38.438,786.11336
Afghanistan,1982,12881816,Asia,39.854,978.0114388
Afghanistan,1987,13867957,Asia,40.822,852.3959448
Afghanistan,1992,16317921,Asia,41.674,649.3413952</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="tip-command-line-in-rstudio" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-command-line-in-rstudio" class="callout-inner">
<h3 class="callout-title">Tip: command line in RStudio<a class="anchor" aria-label="anchor" href="#tip-command-line-in-rstudio"></a>
</h3>
<div class="callout-content">
<p>The Terminal tab in the console pane provides a convenient place
directly within RStudio to interact directly with the command line.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="working-directory">Working directory<a class="anchor" aria-label="anchor" href="#working-directory"></a>
</h3>
<p>Knowing R’s current working directory is important because when you
need to access other files (for example, to import a data file), R will
look for them relative to the current working directory.</p>
<p>Each time you create a new RStudio Project, it will create a new
directory for that project. When you open an existing
<code>.Rproj</code> file, it will open that project and set R’s working
directory to the folder that file is in.</p>
<div id="challenge-5" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-5" class="callout-inner">
<h3 class="callout-title">Challenge 5<a class="anchor" aria-label="anchor" href="#challenge-5"></a>
</h3>
<div class="callout-content">
<p>You can check the current working directory with the
<code>getwd()</code> command, or by using the menus in RStudio.</p>
<ol style="list-style-type: decimal">
<li>In the console, type <code>getwd()</code> (“wd” is short for
“working directory”) and hit Enter.</li>
<li>In the Files pane, double click on the <code>data</code> folder to
open it (or navigate to any other folder you wish). To get the Files
pane back to the current working directory, click “More” and then select
“Go To Working Directory”.</li>
</ol>
<p>You can change the working directory with <code>setwd()</code>, or by
using RStudio menus.</p>
<ol style="list-style-type: decimal">
<li>In the console, type <code>setwd("data")</code> and hit Enter. Type
<code>getwd()</code> and hit Enter to see the new working
directory.</li>
<li>In the menus at the top of the RStudio window, click the “Session”
menu button, and then select “Set Working Directory” and then “Choose
Directory”. Next, in the windows navigator that opens, navigate back to
the project directory, and click “Open”. Note that a <code>setwd</code>
command will automatically appear in the console.</li>
</ol>
</div>
</div>
</div>
<div id="tip-file-does-not-exist-errors" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-file-does-not-exist-errors" class="callout-inner">
<h3 class="callout-title">Tip: File does not exist errors<a class="anchor" aria-label="anchor" href="#tip-file-does-not-exist-errors"></a>
</h3>
<div class="callout-content">
<p>When you’re attempting to reference a file in your R code and you’re
getting errors saying the file doesn’t exist, it’s a good idea to check
your working directory. You need to either provide an absolute path to
the file, or you need to make sure the file is saved in the working
directory (or a subfolder of the working directory) and provide a
relative path.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="version-control">Version Control<a class="anchor" aria-label="anchor" href="#version-control"></a>
</h3>
<p>It is important to use version control with projects. Go <a href="https://swcarpentry.github.io/git-novice/14-supplemental-rstudio.html" class="external-link">here
for a good lesson which describes using Git with RStudio</a>.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use RStudio to create and manage projects with consistent
layout.</li>
<li>Treat raw data as read-only.</li>
<li>Treat generated output as disposable.</li>
<li>Separate function definition and application.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-03-seeking-help"><p>Content from <a href="03-seeking-help.html">Seeking Help</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/03-seeking-help.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I get help in R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>To be able to read R help files for functions and special
operators.</li>
<li>To be able to use CRAN task views to identify packages to solve a
problem.</li>
<li>To be able to seek help from your peers.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="reading-help-files">Reading Help Files<a class="anchor" aria-label="anchor" href="#reading-help-files"></a>
<a class="anchor" aria-label="anchor" href="#reading-help-files"></a>
</h2>
<hr class="half-width">
<p>R, and every package, provide help files for functions. The general
syntax to search for help on any function, “function_name”, from a
specific function that is in a package loaded into your namespace (your
interactive R session) is:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">function_name</span></span>
<span><span class="fu">help</span><span class="op">(</span><span class="va">function_name</span><span class="op">)</span></span></code></pre>
</div>
<p>For example take a look at the help file for
<code>write.table()</code>, we will be using a similar function in an
upcoming episode.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="fu">write.table</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>This will load up a help page in RStudio (or as plain text in R
itself).</p>
<p>Each help page is broken down into sections:</p>
<ul>
<li>Description: An extended description of what the function does.</li>
<li>Usage: The arguments of the function and their default values (which
can be changed).</li>
<li>Arguments: An explanation of the data each argument is
expecting.</li>
<li>Details: Any important details to be aware of.</li>
<li>Value: The data the function returns.</li>
<li>See Also: Any related functions you might find useful.</li>
<li>Examples: Some examples for how to use the function.</li>
</ul>
<p>Different functions might have different sections, but these are the
main ones you should be aware of.</p>
<p>Notice how related functions might call for the same help file:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="fu">write.table</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">?</span><span class="fu">write.csv</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>This is because these functions have very similar applicability and
often share the same arguments as inputs to the function, so package
authors often choose to document them together in a single help
file.</p>
<div id="tip-running-examples" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-running-examples" class="callout-inner">
<h3 class="callout-title">Tip: Running Examples<a class="anchor" aria-label="anchor" href="#tip-running-examples"></a>
</h3>
<div class="callout-content">
<p>From within the function help page, you can highlight code in the
Examples and hit <kbd>Ctrl</kbd>+<kbd>Return</kbd> to run it in RStudio
console. This gives you a quick way to get a feel for how a function
works.</p>
</div>
</div>
</div>
<div id="tip-reading-help-files" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-reading-help-files" class="callout-inner">
<h3 class="callout-title">Tip: Reading Help Files<a class="anchor" aria-label="anchor" href="#tip-reading-help-files"></a>
</h3>
<div class="callout-content">
<p>One of the most daunting aspects of R is the large number of
functions available. It would be prohibitive, if not impossible to
remember the correct usage for every function you use. Luckily, using
the help files means you don’t have to remember that!</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="special-operators">Special Operators<a class="anchor" aria-label="anchor" href="#special-operators"></a>
<a class="anchor" aria-label="anchor" href="#special-operators"></a>
</h2>
<hr class="half-width">
<p>To seek help on special operators, use quotes or backticks:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="st">"&lt;-"</span></span>
<span><span class="op">?</span><span class="va">`&lt;-`</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="getting-help-with-packages">Getting Help with Packages<a class="anchor" aria-label="anchor" href="#getting-help-with-packages"></a>
<a class="anchor" aria-label="anchor" href="#getting-help-with-packages"></a>
</h2>
<hr class="half-width">
<p>Many packages come with “vignettes”: tutorials and extended example
documentation. Without any arguments, <code>vignette()</code> will list
all vignettes for all installed packages;
<code>vignette(package="package-name")</code> will list all available
vignettes for <code>package-name</code>, and
<code>vignette("vignette-name")</code> will open the specified
vignette.</p>
<p>If a package doesn’t have any vignettes, you can usually find help by
typing <code>help("package-name")</code>.</p>
<p>RStudio also has a set of excellent <a href="https://rstudio.com/resources/cheatsheets/" class="external-link">cheatsheets</a> for
many packages.</p>
</section><section><h2 class="section-heading" id="when-you-remember-part-of-the-function-name">When You Remember Part of the Function Name<a class="anchor" aria-label="anchor" href="#when-you-remember-part-of-the-function-name"></a>
<a class="anchor" aria-label="anchor" href="#when-you-remember-part-of-the-function-name"></a>
</h2>
<hr class="half-width">
<p>If you’re not sure what package a function is in or how it’s
specifically spelled, you can do a fuzzy search:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="op">?</span><span class="va">function_name</span></span></code></pre>
</div>
<p>A fuzzy search is when you search for an approximate string match.
For example, you may remember that the function to set your working
directory includes “set” in its name. You can do a fuzzy search to help
you identify the function:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="op">?</span><span class="va">set</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="when-you-have-no-idea-where-to-begin">When You Have No Idea Where to Begin<a class="anchor" aria-label="anchor" href="#when-you-have-no-idea-where-to-begin"></a>
<a class="anchor" aria-label="anchor" href="#when-you-have-no-idea-where-to-begin"></a>
</h2>
<hr class="half-width">
<p>If you don’t know what function or package you need to use <a href="https://cran.at.r-project.org/web/views" class="external-link">CRAN Task Views</a> is a
specially maintained list of packages grouped into fields. This can be a
good starting point.</p>
</section><section><h2 class="section-heading" id="when-your-code-doesnt-work-seeking-help-from-your-peers">When Your Code Doesn’t Work: Seeking Help from Your Peers<a class="anchor" aria-label="anchor" href="#when-your-code-doesnt-work-seeking-help-from-your-peers"></a>
<a class="anchor" aria-label="anchor" href="#when-your-code-doesnt-work-seeking-help-from-your-peers"></a>
</h2>
<hr class="half-width">
<p>If you’re having trouble using a function, 9 times out of 10, the
answers you seek have already been answered on <a href="https://stackoverflow.com/" class="external-link">Stack Overflow</a>. You can search
using the <code>[r]</code> tag. Please make sure to see their page on <a href="https://stackoverflow.com/help/how-to-ask" class="external-link">how to ask a good
question.</a></p>
<p>If you can’t find the answer, there are a few useful functions to
help you ask your peers:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">dput</span></span></code></pre>
</div>
<p>Will dump the data you’re working with into a format that can be
copied and pasted by others into their own R session.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sessionInfo</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>R version 4.4.1 (2024-06-14)
Platform: x86_64-pc-linux-gnu
Running under: Ubuntu 22.04.4 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.10.0
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.10.0

locale:
 [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8
 [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8
 [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C
[10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C

time zone: UTC
tzcode source: system (glibc)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.4.1  tools_4.4.1     yaml_2.3.10     knitr_1.48
[5] xfun_0.46       renv_1.0.7      evaluate_0.24.0</code></pre>
</div>
<p>Will print out your current version of R, as well as any packages you
have loaded. This can be useful for others to help reproduce and debug
your issue.</p>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1<a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<p>Look at the help page for the <code>c</code> function. What kind of
vector do you expect will be created if you evaluate the following:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu">c</span><span class="op">(</span><span class="st">'d'</span>, <span class="st">'e'</span>, <span class="st">'f'</span><span class="op">)</span></span>
<span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="st">'f'</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to Challenge 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>The <code>c()</code> function creates a vector, in which all elements
are of the same type. In the first case, the elements are numeric, in
the second, they are characters, and in the third they are also
characters: the numeric values are “coerced” to be characters.</p>
</div>
</div>
</div>
</div>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2<a class="anchor" aria-label="anchor" href="#challenge-2"></a>
</h3>
<div class="callout-content">
<p>Look at the help for the <code>paste</code> function. You will need
to use it later. What’s the difference between the <code>sep</code> and
<code>collapse</code> arguments?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution to Challenge 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>To look at the help for the <code>paste()</code> function, use:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">help</span><span class="op">(</span><span class="st">"paste"</span><span class="op">)</span></span>
<span><span class="op">?</span><span class="va">paste</span></span></code></pre>
</div>
<p>The difference between <code>sep</code> and <code>collapse</code> is
a little tricky. The <code>paste</code> function accepts any number of
arguments, each of which can be a vector of any length. The
<code>sep</code> argument specifies the string used between concatenated
terms — by default, a space. The result is a vector as long as the
longest argument supplied to <code>paste</code>. In contrast,
<code>collapse</code> specifies that after concatenation the elements
are <em>collapsed</em> together using the given separator, the result
being a single string.</p>
<p>It is important to call the arguments explicitly by typing out the
argument name e.g <code>sep = ","</code> so the function understands to
use the “,” as a separator and not a term to concatenate. e.g.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"b"</span><span class="op">)</span>, <span class="st">"c"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a c" "b c"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"b"</span><span class="op">)</span>, <span class="st">"c"</span>, <span class="st">","</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a c ," "b c ,"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"b"</span><span class="op">)</span>, <span class="st">"c"</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a,c" "b,c"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"b"</span><span class="op">)</span>, <span class="st">"c"</span>, collapse <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a c|b c"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"b"</span><span class="op">)</span>, <span class="st">"c"</span>, sep <span class="op">=</span> <span class="st">","</span>, collapse <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a,c|b,c"</code></pre>
</div>
<p>(For more information, scroll to the bottom of the
<code>?paste</code> help page and look at the examples, or try
<code>example('paste')</code>.)</p>
</div>
</div>
</div>
</div>
<div id="challenge-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-3" class="callout-inner">
<h3 class="callout-title">Challenge 3<a class="anchor" aria-label="anchor" href="#challenge-3"></a>
</h3>
<div class="callout-content">
<p>Use help to find a function (and its associated parameters) that you
could use to load data from a tabular file in which columns are
delimited with “\t” (tab) and the decimal point is a “.” (period). This
check for decimal separator is important, especially if you are working
with international colleagues, because different countries have
different conventions for the decimal point (i.e. comma vs period).
Hint: use <code>??"read table"</code> to look up functions related to
reading in tabular data.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solution to Challenge 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>The standard R function for reading tab-delimited files with a period
decimal separator is read.delim(). You can also do this with
<code>read.table(file, sep="\t")</code> (the period is the
<em>default</em> decimal separator for <code>read.table()</code>),
although you may have to change the <code>comment.char</code> argument
as well if your data file contains hash (#) characters.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="other-resources">Other Resources<a class="anchor" aria-label="anchor" href="#other-resources"></a>
<a class="anchor" aria-label="anchor" href="#other-resources"></a>
</h2>
<hr class="half-width">
<ul>
<li><a href="https://www.statmethods.net/" class="external-link">Quick R</a></li>
<li><a href="https://www.rstudio.com/resources/cheatsheets/" class="external-link">RStudio
cheat sheets</a></li>
<li><a href="https://www.cookbook-r.com/" class="external-link">Cookbook for R</a></li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>help()</code> to get online help in R.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-04-data-structures-part1"><p>Content from <a href="04-data-structures-part1.html">Data Structures</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/04-data-structures-part1.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I read data in R?</li>
<li>What are the basic data types in R?</li>
<li>How do I represent categorical information in R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>To be able to identify the 5 main data types.</li>
<li>To begin exploring data frames, and understand how they are related
to vectors and lists.</li>
<li>To be able to ask questions from R about the type, class, and
structure of an object.</li>
<li>To understand the information of the attributes “names”, “class”,
and “dim”.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>One of R’s most powerful features is its ability to deal with tabular
data - such as you may already have in a spreadsheet or a CSV file.
Let’s start by making a toy dataset in your <code>data/</code>
directory, called <code>feline-data.csv</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>coat <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"calico"</span>, <span class="st">"black"</span>, <span class="st">"tabby"</span><span class="op">)</span>,</span>
<span>                    weight <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2.1</span>, <span class="fl">5.0</span>, <span class="fl">3.2</span><span class="op">)</span>,</span>
<span>                    likes_string <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>We can now save <code>cats</code> as a CSV file. It is good practice
to call the argument names explicitly so the function knows what default
values you are changing. Here we are setting
<code>row.names = FALSE</code>. Recall you can use
<code>?write.csv</code> to pull up the help file to check out the
argument names and their default values.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write.csv</span><span class="op">(</span>x <span class="op">=</span> <span class="va">cats</span>, file <span class="op">=</span> <span class="st">"data/feline-data.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
<p>The contents of the new file, <code>feline-data.csv</code>:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>coat,weight,likes_string</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>calico,<span class="fl">2.1</span>,<span class="dv">1</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>black,<span class="fl">5.0</span>,<span class="dv">0</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>tabby,<span class="fl">3.2</span>,<span class="dv">1</span></span></code></pre>
</div>
<div id="tip-editing-text-files-in-r" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-editing-text-files-in-r" class="callout-inner">
<h3 class="callout-title">Tip: Editing Text files in R<a class="anchor" aria-label="anchor" href="#tip-editing-text-files-in-r"></a>
</h3>
<div class="callout-content">
<p>Alternatively, you can create <code>data/feline-data.csv</code> using
a text editor (Nano), or within RStudio with the <strong>File -&gt; New
File -&gt; Text File</strong> menu item.</p>
</div>
</div>
</div>
<p>We can load this into R via the following:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/feline-data.csv"</span><span class="op">)</span></span>
<span><span class="va">cats</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    coat weight likes_string
1 calico    2.1            1
2  black    5.0            0
3  tabby    3.2            1</code></pre>
</div>
<p>The <code>read.table</code> function is used for reading in tabular
data stored in a text file where the columns of data are separated by
punctuation characters such as CSV files (csv = comma-separated values).
Tabs and commas are the most common punctuation characters used to
separate or delimit data points in csv files. For convenience R provides
2 other versions of <code>read.table</code>. These are:
<code>read.csv</code> for files where the data are separated with commas
and <code>read.delim</code> for files where the data are separated with
tabs. Of these three functions <code>read.csv</code> is the most
commonly used. If needed it is possible to override the default
delimiting punctuation marks for both <code>read.csv</code> and
<code>read.delim</code>.</p>
<div id="check-your-data-for-factors" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="check-your-data-for-factors" class="callout-inner">
<h3 class="callout-title">Check your data for factors<a class="anchor" aria-label="anchor" href="#check-your-data-for-factors"></a>
</h3>
<div class="callout-content">
<p>In recent times, the default way how R handles textual data has
changed. Text data was interpreted by R automatically into a format
called “factors”. But there is an easier format that is called
“character”. We will hear about factors later, and what to use them for.
For now, remember that in most cases, they are not needed and only
complicate your life, which is why newer R versions read in text as
“character”. Check now if your version of R has automatically created
factors and convert them to “character” format:</p>
<ol style="list-style-type: decimal">
<li>Check the data types of your input by typing
<code>str(cats)</code>
</li>
<li>In the output, look at the three-letter codes after the colons: If
you see only “num” and “chr”, you can continue with the lesson and skip
this box. If you find “fct”, continue to step 3.</li>
<li>Prevent R from automatically creating “factor” data. That can be
done by the following code:
<code>options(stringsAsFactors = FALSE)</code>. Then, re-read the cats
table for the change to take effect.</li>
<li>You must set this option every time you restart R. To not forget
this, include it in your analysis script before you read in any data,
for example in one of the first lines.</li>
<li>For R versions greater than 4.0.0, text data is no longer converted
to factors anymore. So you can install this or a newer version to avoid
this problem. If you are working on an institute or company computer,
ask your administrator to do it.</li>
</ol>
</div>
</div>
</div>
<p>We can begin exploring our dataset right away, pulling out columns by
specifying them using the <code>$</code> operator:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">$</span><span class="va">weight</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2.1 5.0 3.2</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">$</span><span class="va">coat</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "calico" "black"  "tabby" </code></pre>
</div>
<p>We can do other operations on the columns:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Say we discovered that the scale weighs two Kg light:</span></span>
<span><span class="va">cats</span><span class="op">$</span><span class="va">weight</span> <span class="op">+</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 4.1 7.0 5.2</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="st">"My cat is"</span>, <span class="va">cats</span><span class="op">$</span><span class="va">coat</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "My cat is calico" "My cat is black"  "My cat is tabby" </code></pre>
</div>
<p>But what about</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">$</span><span class="va">weight</span> <span class="op">+</span> <span class="va">cats</span><span class="op">$</span><span class="va">coat</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in cats$weight + cats$coat: non-numeric argument to binary operator</code></pre>
</div>
<p>Understanding what happened here is key to successfully analyzing
data in R.</p>
<div class="section level3">
<h3 id="data-types">Data Types<a class="anchor" aria-label="anchor" href="#data-types"></a>
</h3>
<p>If you guessed that the last command will return an error because
<code>2.1</code> plus <code>"black"</code> is nonsense, you’re right -
and you already have some intuition for an important concept in
programming called <em>data types</em>. We can ask what type of data
something is:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">cats</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "double"</code></pre>
</div>
<p>There are 5 main types: <code>double</code>, <code>integer</code>,
<code>complex</code>, <code>logical</code> and <code>character</code>.
For historic reasons, <code>double</code> is also called
<code>numeric</code>.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="fl">3.14</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "double"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="fl">1L</span><span class="op">)</span> <span class="co"># The L suffix forces the number to be an integer, since by default R uses float numbers</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "integer"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="fl">1i</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "complex"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "logical"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="st">'banana'</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<p>No matter how complicated our analyses become, all data in R is
interpreted as one of these basic data types. This strictness has some
really important consequences.</p>
<p>A user has added details of another cat. This information is in the
file <code>data/feline-data_v2.csv</code>.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">file.show</span><span class="op">(</span><span class="st">"data/feline-data_v2.csv"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>coat,weight,likes_string</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>calico,<span class="fl">2.1</span>,<span class="dv">1</span></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>black,<span class="fl">5.0</span>,<span class="dv">0</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>tabby,<span class="fl">3.2</span>,<span class="dv">1</span></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>tabby,<span class="fl">2.3</span> or <span class="fl">2.4</span>,<span class="dv">1</span></span></code></pre>
</div>
<p>Load the new cats data like before, and check what type of data we
find in the <code>weight</code> column:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file<span class="op">=</span><span class="st">"data/feline-data_v2.csv"</span><span class="op">)</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">cats</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<p>Oh no, our weights aren’t the double type anymore! If we try to do
the same math we did on them before, we run into trouble:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">$</span><span class="va">weight</span> <span class="op">+</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in cats$weight + 2: non-numeric argument to binary operator</code></pre>
</div>
<p>What happened? The <code>cats</code> data we are working with is
something called a <em>data frame</em>. Data frames are one of the most
common and versatile types of <em>data structures</em> we will work with
in R. A given column in a data frame cannot be composed of different
data types. In this case, R does not read everything in the data frame
column <code>weight</code> as a <em>double</em>, therefore the entire
column data type changes to something that is suitable for everything in
the column.</p>
<p>When R reads a csv file, it reads it in as a <em>data frame</em>.
Thus, when we loaded the <code>cats</code> csv file, it is stored as a
data frame. We can recognize data frames by the first row that is
written by the <code>str()</code> function:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">cats</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	4 obs. of  3 variables:
 $ coat        : chr  "calico" "black" "tabby" "tabby"
 $ weight      : chr  "2.1" "5" "3.2" "2.3 or 2.4"
 $ likes_string: int  1 0 1 1</code></pre>
</div>
<p><em>Data frames</em> are composed of rows and columns, where each
column has the same number of rows. Different columns in a data frame
can be made up of different data types (this is what makes them so
versatile), but everything in a given column needs to be the same type
(e.g., vector, factor, or list).</p>
<p>Let’s explore more about different data structures and how they
behave. For now, let’s remove that extra line from our cats data and
reload it, while we investigate this behavior further:</p>
<p>feline-data.csv:</p>
<pre><code>coat,weight,likes_string
calico,2.1,1
black,5.0,0
tabby,3.2,1</code></pre>
<p>And back in RStudio:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file<span class="op">=</span><span class="st">"data/feline-data.csv"</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="vectors-and-type-coercion">Vectors and Type Coercion<a class="anchor" aria-label="anchor" href="#vectors-and-type-coercion"></a>
</h3>
<p>To better understand this behavior, let’s meet another of the data
structures: the <em>vector</em>.</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_vector</span> <span class="op">&lt;-</span> <span class="fu">vector</span><span class="op">(</span>length <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">my_vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE FALSE FALSE</code></pre>
</div>
<p>A vector in R is essentially an ordered list of things, with the
special condition that <em>everything in the vector must be the same
basic data type</em>. If you don’t choose the datatype, it’ll default to
<code>logical</code>; or, you can declare an empty vector of whatever
type you like.</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">another_vector</span> <span class="op">&lt;-</span> <span class="fu">vector</span><span class="op">(</span>mode<span class="op">=</span><span class="st">'character'</span>, length<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">another_vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "" "" ""</code></pre>
</div>
<p>You can check if something is a vector:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">another_vector</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> chr [1:3] "" "" ""</code></pre>
</div>
<p>The somewhat cryptic output from this command indicates the basic
data type found in this vector - in this case <code>chr</code>,
character; an indication of the number of things in the vector -
actually, the indexes of the vector, in this case <code>[1:3]</code>;
and a few examples of what’s actually in the vector - in this case empty
character strings. If we similarly do</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">cats</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> num [1:3] 2.1 5 3.2</code></pre>
</div>
<p>we see that <code>cats$weight</code> is a vector, too - <em>the
columns of data we load into R data.frames are all vectors</em>, and
that’s the root of why R forces everything in a column to be the same
basic data type.</p>
<div id="discussion-1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="discussion-1" class="callout-inner">
<h3 class="callout-title">Discussion 1<a class="anchor" aria-label="anchor" href="#discussion-1"></a>
</h3>
<div class="callout-content">
<p>Why is R so opinionated about what we put in our columns of data? How
does this help us?</p>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Discussion 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>By keeping everything in a column the same, we allow ourselves to
make simple assumptions about our data; if you can interpret one entry
in the column as a number, then you can interpret <em>all</em> of them
as numbers, so we don’t have to check every time. This consistency is
what people mean when they talk about <em>clean data</em>; in the long
run, strict consistency goes a long way to making our lives easier in
R.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="coercion-by-combining-vectors">Coercion by combining vectors<a class="anchor" aria-label="anchor" href="#coercion-by-combining-vectors"></a>
</h4>
<p>You can also make vectors with explicit contents with the combine
function:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">combine_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>,<span class="fl">6</span>,<span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">combine_vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2 6 3</code></pre>
</div>
<p>Given what we’ve learned so far, what do you think the following will
produce?</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">quiz_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>,<span class="fl">6</span>,<span class="st">'3'</span><span class="op">)</span></span></code></pre>
</div>
<p>This is something called <em>type coercion</em>, and it is the source
of many surprises and the reason why we need to be aware of the basic
data types and how R will interpret them. When R encounters a mix of
types (here double and character) to be combined into a single vector,
it will force them all to be the same type. Consider:</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coercion_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">coercion_vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a"    "TRUE"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">another_coercion_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">another_coercion_vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0 1</code></pre>
</div>
</div>
<div class="section level4">
<h4 id="the-type-hierarchy">The type hierarchy<a class="anchor" aria-label="anchor" href="#the-type-hierarchy"></a>
</h4>
<p>The coercion rules go: <code>logical</code> -&gt;
<code>integer</code> -&gt; <code>double</code> (“<code>numeric</code>”)
-&gt; <code>complex</code> -&gt; <code>character</code>, where -&gt; can
be read as <em>are transformed into</em>. For example, combining
<code>logical</code> and <code>character</code> transforms the result to
<code>character</code>:</p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a"    "TRUE"</code></pre>
</div>
<p>A quick way to recognize <code>character</code> vectors is by the
quotes that enclose them when they are printed.</p>
<p>You can try to force coercion against this flow using the
<code>as.</code> functions:</p>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">character_vector_example</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'0'</span>,<span class="st">'2'</span>,<span class="st">'4'</span><span class="op">)</span></span>
<span><span class="va">character_vector_example</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "0" "2" "4"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">character_coerced_to_double</span> <span class="op">&lt;-</span> <span class="fu">as.double</span><span class="op">(</span><span class="va">character_vector_example</span><span class="op">)</span></span>
<span><span class="va">character_coerced_to_double</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0 2 4</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">double_coerced_to_logical</span> <span class="op">&lt;-</span> <span class="fu">as.logical</span><span class="op">(</span><span class="va">character_coerced_to_double</span><span class="op">)</span></span>
<span><span class="va">double_coerced_to_logical</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE  TRUE  TRUE</code></pre>
</div>
<p>As you can see, some surprising things can happen when R forces one
basic data type into another! Nitty-gritty of type coercion aside, the
point is: if your data doesn’t look like what you thought it was going
to look like, type coercion may well be to blame; make sure everything
is the same type in your vectors and your columns of data.frames, or you
will get nasty surprises!</p>
<p>But coercion can also be very useful! For example, in our
<code>cats</code> data <code>likes_string</code> is numeric, but we know
that the 1s and 0s actually represent <code>TRUE</code> and
<code>FALSE</code> (a common way of representing them). We should use
the <code>logical</code> datatype here, which has two states:
<code>TRUE</code> or <code>FALSE</code>, which is exactly what our data
represents. We can ‘coerce’ this column to be <code>logical</code> by
using the <code>as.logical</code> function:</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">$</span><span class="va">likes_string</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 0 1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">$</span><span class="va">likes_string</span> <span class="op">&lt;-</span> <span class="fu">as.logical</span><span class="op">(</span><span class="va">cats</span><span class="op">$</span><span class="va">likes_string</span><span class="op">)</span></span>
<span><span class="va">cats</span><span class="op">$</span><span class="va">likes_string</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  TRUE FALSE  TRUE</code></pre>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1<a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<p>An important part of every data analysis is cleaning the input data.
If you know that the input data is all of the same format,
(e.g. numbers), your analysis is much easier! Clean the cat data set
from the chapter about type coercion.</p>
<div class="section level4">
<h4 id="copy-the-code-template">Copy the code template<a class="anchor" aria-label="anchor" href="#copy-the-code-template"></a>
</h4>
<p>Create a new script in RStudio and copy and paste the following code.
Then move on to the tasks below, which help you to fill in the gaps
(______).</p>
<pre><code># Read data
cats &lt;- read.csv("data/feline-data_v2.csv")

# 1. Print the data
_____

# 2. Show an overview of the table with all data types
_____(cats)

# 3. The "weight" column has the incorrect data type __________.
#    The correct data type is: ____________.

# 4. Correct the 4th weight data point with the mean of the two given values
cats$weight[4] &lt;- 2.35
#    print the data again to see the effect
cats

# 5. Convert the weight to the right data type
cats$weight &lt;- ______________(cats$weight)

#    Calculate the mean to test yourself
mean(cats$weight)

# If you see the correct mean value (and not NA), you did the exercise
# correctly!</code></pre>
</div>
<div class="section level3">
<h3 id="instructions-for-the-tasks">Instructions for the tasks<a class="anchor" aria-label="anchor" href="#instructions-for-the-tasks"></a>
</h3>
<div class="section level4">
<h4 id="print-the-data">1. Print the data<a class="anchor" aria-label="anchor" href="#print-the-data"></a>
</h4>
<p>Execute the first statement (<code>read.csv(...)</code>). Then print
the data to the console</p>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Tip 1.1
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>Show the content of any variable by typing its name.</p>
<div class="section level3">
<h3 id="solution-to-challenge-1-1">Solution to Challenge 1.1<a class="anchor" aria-label="anchor" href="#solution-to-challenge-1-1"></a>
</h3>
<p>Two correct solutions:</p>
<pre><code><span><span class="va">cats</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">cats</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="overview-of-the-data-types" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="overview-of-the-data-types" class="callout-inner">
<h3 class="callout-title">2. Overview of the data types<a class="anchor" aria-label="anchor" href="#overview-of-the-data-types"></a>
</h3>
<div class="callout-content">
<p>The data type of your data is as important as the data itself. Use a
function we saw earlier to print out the data types of all columns of
the <code>cats</code> table.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Tip 1.2
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>In the chapter “Data types” we saw two functions that can show data
types. One printed just a single word, the data type name. The other
printed a short form of the data type, and the first few values. We need
the second here.</p>
</div>
</div>
</div>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1<em> (continued)</em><a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<blockquote>
<h3 id="solution-to-challenge-1.2">Solution to Challenge 1.2</h3>
<pre><code><span><span class="fu">str</span><span class="op">(</span><span class="va">cats</span><span class="op">)</span></span></code></pre>
</blockquote>
<div class="section level4">
<h4 id="which-data-type-do-we-need">3. Which data type do we need?<a class="anchor" aria-label="anchor" href="#which-data-type-do-we-need"></a>
</h4>
<p>The shown data type is not the right one for this data (weight of a
cat). Which data type do we need?</p>
<ul>
<li>Why did the <code>read.csv()</code> function not choose the correct
data type?</li>
<li>Fill in the gap in the comment with the correct data type for cat
weight!</li>
</ul>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Tip 1.3
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>Scroll up to the section about the <a href="#the-type-hierarchy">type
hierarchy</a> to review the available data types</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Solution to Challenge 1.3
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<ul>
<li>Weight is expressed on a continuous scale (real numbers). The R data
type for this is “double” (also known as “numeric”).</li>
<li>The fourth row has the value “2.3 or 2.4”. That is not a number but
two, and an english word. Therefore, the “character” data type is
chosen. The whole column is now text, because all values in the same
columns have to be the same data type.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="correct-the-problematic-value" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="correct-the-problematic-value" class="callout-inner">
<h3 class="callout-title">4. Correct the problematic value<a class="anchor" aria-label="anchor" href="#correct-the-problematic-value"></a>
</h3>
<div class="callout-content">
<p>The code to assign a new weight value to the problematic fourth row
is given. Think first and then execute it: What will be the data type
after assigning a number like in this example? You can check the data
type after executing to see if you were right.</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Tip 1.4
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<p>Revisit the hierarchy of data types when two different data types are
combined.</p>
</div>
</div>
</div>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1<em> (continued)</em><a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<blockquote>
<h3 id="solution-to-challenge-1.4">Solution to challenge 1.4</h3>
<p>The data type of the column “weight” is “character”. The assigned
data type is “double”. Combining two data types yields the data type
that is higher in the following hierarchy:</p>
<pre><code>logical &lt; integer &lt; double &lt; complex &lt; character</code></pre>
<p>Therefore, the column is still of type character! We need to manually
convert it to “double”. {: .solution}</p>
</blockquote>
<div class="section level4">
<h4 id="convert-the-column-weight-to-the-correct-data-type">5. Convert the column “weight” to the correct data type<a class="anchor" aria-label="anchor" href="#convert-the-column-weight-to-the-correct-data-type"></a>
</h4>
<p>Cat weight are numbers. But the column does not have this data type
yet. Coerce the column to floating point numbers.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">
  Tip 1.5
  </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<p>The functions to convert data types start with <code>as.</code>. You
can look for the function further up in the manuscript or use the
RStudio auto-complete function: Type “<code>as.</code>” and then press
the TAB key.</p>
</div>
</div>
</div>
</div>
<div id="challenge-1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1<em> (continued)</em><a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<blockquote>
<h3 id="solution-to-challenge-1.5">Solution to Challenge 1.5</h3>
<p>There are two functions that are synonymous for historic reasons:</p>
<pre><code><span><span class="va">cats</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="fu">as.double</span><span class="op">(</span><span class="va">cats</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span>
<span><span class="va">cats</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="va">cats</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span></code></pre>
</blockquote>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="some-basic-vector-functions">Some basic vector functions<a class="anchor" aria-label="anchor" href="#some-basic-vector-functions"></a>
</h3>
<p>The combine function, <code>c()</code>, will also append things to an
existing vector:</p>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ab_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span><span class="op">)</span></span>
<span><span class="va">ab_vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a" "b"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">combine_example</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="va">ab_vector</span>, <span class="st">'SWC'</span><span class="op">)</span></span>
<span><span class="va">combine_example</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a"   "b"   "SWC"</code></pre>
</div>
<p>You can also make series of numbers:</p>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mySeries</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span></span>
<span><span class="va">mySeries</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb76">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">seq</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb78">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">seq</span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span>, by<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1]  1.0  1.1  1.2  1.3  1.4  1.5  1.6  1.7  1.8  1.9  2.0  2.1  2.2  2.3  2.4
[16]  2.5  2.6  2.7  2.8  2.9  3.0  3.1  3.2  3.3  3.4  3.5  3.6  3.7  3.8  3.9
[31]  4.0  4.1  4.2  4.3  4.4  4.5  4.6  4.7  4.8  4.9  5.0  5.1  5.2  5.3  5.4
[46]  5.5  5.6  5.7  5.8  5.9  6.0  6.1  6.2  6.3  6.4  6.5  6.6  6.7  6.8  6.9
[61]  7.0  7.1  7.2  7.3  7.4  7.5  7.6  7.7  7.8  7.9  8.0  8.1  8.2  8.3  8.4
[76]  8.5  8.6  8.7  8.8  8.9  9.0  9.1  9.2  9.3  9.4  9.5  9.6  9.7  9.8  9.9
[91] 10.0</code></pre>
</div>
<p>We can ask a few questions about vectors:</p>
<div class="codewrapper sourceCode" id="cb80">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sequence_example</span> <span class="op">&lt;-</span> <span class="fl">20</span><span class="op">:</span><span class="fl">25</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">sequence_example</span>, n<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 20 21</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb82">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tail</span><span class="op">(</span><span class="va">sequence_example</span>, n<span class="op">=</span><span class="fl">4</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 22 23 24 25</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb84">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">length</span><span class="op">(</span><span class="va">sequence_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb86">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">sequence_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "integer"</code></pre>
</div>
<p>We can get individual elements of a vector by using the bracket
notation:</p>
<div class="codewrapper sourceCode" id="cb88">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">first_element</span> <span class="op">&lt;-</span> <span class="va">sequence_example</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">first_element</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 20</code></pre>
</div>
<p>To change a single element, use the bracket on the other side of the
arrow:</p>
<div class="codewrapper sourceCode" id="cb90">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sequence_example</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">30</span></span>
<span><span class="va">sequence_example</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 30 21 22 23 24 25</code></pre>
</div>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2<a class="anchor" aria-label="anchor" href="#challenge-2"></a>
</h3>
<div class="callout-content">
<p>Start by making a vector with the numbers 1 through 26. Then,
multiply the vector by 2.</p>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8">
  Solution to Challenge 2
  </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" data-bs-parent="#accordionSolution8" aria-labelledby="headingSolution8">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb92">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">26</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">*</span> <span class="fl">2</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="lists">Lists<a class="anchor" aria-label="anchor" href="#lists"></a>
</h3>
<p>Another data structure you’ll want in your bag of tricks is the
<code>list</code>. A list is simpler in some ways than the other types,
because you can put anything you want in it. Remember <em>everything in
the vector must be of the same basic data type</em>, but a list can have
different data types:</p>
<div class="codewrapper sourceCode" id="cb93">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">list_example</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span><span class="fl">1</span>, <span class="st">"a"</span>, <span class="cn">TRUE</span>, <span class="fl">1</span><span class="op">+</span><span class="fl">4i</span><span class="op">)</span></span>
<span><span class="va">list_example</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[[1]]
[1] 1

[[2]]
[1] "a"

[[3]]
[1] TRUE

[[4]]
[1] 1+4i</code></pre>
</div>
<p>When printing the object structure with <code>str()</code>, we see
the data types of all elements:</p>
<div class="codewrapper sourceCode" id="cb95">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">list_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>List of 4
 $ : num 1
 $ : chr "a"
 $ : logi TRUE
 $ : cplx 1+4i</code></pre>
</div>
<p>What is the use of lists? They can <strong>organize data of different
types</strong>. For example, you can organize different tables that
belong together, similar to spreadsheets in Excel. But there are many
other uses, too.</p>
<p>We will see another example that will maybe surprise you in the next
chapter.</p>
<p>To retrieve one of the elements of a list, use the <strong>double
bracket</strong>:</p>
<div class="codewrapper sourceCode" id="cb97">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">list_example</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a"</code></pre>
</div>
<p>The elements of lists also can have <strong>names</strong>, they can
be given by prepending them to the values, separated by an equals
sign:</p>
<div class="codewrapper sourceCode" id="cb99">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">another_list</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Numbers"</span>, numbers <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, data <span class="op">=</span> <span class="cn">TRUE</span> <span class="op">)</span></span>
<span><span class="va">another_list</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$title
[1] "Numbers"

$numbers
 [1]  1  2  3  4  5  6  7  8  9 10

$data
[1] TRUE</code></pre>
</div>
<p>This results in a <strong>named list</strong>. Now we have a new
function of our object! We can access single elements by an additional
way!</p>
<div class="codewrapper sourceCode" id="cb101">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">another_list</span><span class="op">$</span><span class="va">title</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Numbers"</code></pre>
</div>
</div>
<section><h2 class="section-heading" id="names">Names<a class="anchor" aria-label="anchor" href="#names"></a>
<a class="anchor" aria-label="anchor" href="#names"></a>
</h2>
<hr class="half-width">
<p>With names, we can give meaning to elements. It is the first time
that we do not only have the <strong>data</strong>, but also explaining
information. It is <em>metadata</em> that can be stuck to the object
like a label. In R, this is called an <strong>attribute</strong>. Some
attributes enable us to do more with our object, for example, like here,
accessing an element by a self-defined name.</p>
<div class="section level3">
<h3 id="accessing-vectors-and-lists-by-name">Accessing vectors and lists by name<a class="anchor" aria-label="anchor" href="#accessing-vectors-and-lists-by-name"></a>
</h3>
<p>We have already seen how to generate a named list. The way to
generate a named vector is very similar. You have seen this function
before:</p>
<div class="codewrapper sourceCode" id="cb103">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pizza_price</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span> pizzasubito <span class="op">=</span> <span class="fl">5.64</span>, pizzafresh <span class="op">=</span> <span class="fl">6.60</span>, callapizza <span class="op">=</span> <span class="fl">4.50</span> <span class="op">)</span></span></code></pre>
</div>
<p>The way to retrieve elements is different, though:</p>
<div class="codewrapper sourceCode" id="cb104">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pizza_price</span><span class="op">[</span><span class="st">"pizzasubito"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">pizzasubito</span></span>
<span>       <span class="fl">5.64</span> </span></code></pre>
</div>
<p>The approach used for the list does not work:</p>
<div class="codewrapper sourceCode" id="cb106">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pizza_price</span><span class="op">$</span><span class="va">pizzafresh</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in pizza_price$pizzafresh: $ operator is invalid for atomic vectors</code></pre>
</div>
<p>It will pay off if you remember this error message, you will meet it
in your own analyses. It means that you have just tried accessing an
element like it was in a list, but it is actually in a vector.</p>
</div>
<div class="section level3">
<h3 id="accessing-and-changing-names">Accessing and changing names<a class="anchor" aria-label="anchor" href="#accessing-and-changing-names"></a>
</h3>
<p>If you are only interested in the names, use the <code>names()</code>
function:</p>
<div class="codewrapper sourceCode" id="cb108">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">pizza_price</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "pizzasubito" "pizzafresh"  "callapizza" </code></pre>
</div>
<p>We have seen how to access and change single elements of a vector.
The same is possible for names:</p>
<div class="codewrapper sourceCode" id="cb110">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">pizza_price</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "callapizza"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb112">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">pizza_price</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"call-a-pizza"</span></span>
<span><span class="va">pizza_price</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> pizzasubito   pizzafresh call-a-pizza
        5.64         6.60         4.50 </code></pre>
</div>
<div id="challenge-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-3" class="callout-inner">
<h3 class="callout-title">Challenge 3<a class="anchor" aria-label="anchor" href="#challenge-3"></a>
</h3>
<div class="callout-content">
<ul>
<li>What is the data type of the names of <code>pizza_price</code>? You
can find out using the <code>str()</code> or <code>typeof()</code>
functions.</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution9" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution9" aria-expanded="false" aria-controls="collapseSolution9">
  <h4 class="accordion-header" id="headingSolution9">
  Solution to Challenge 3
  </h4>
</button>
<div id="collapseSolution9" class="accordion-collapse collapse" data-bs-parent="#accordionSolution9" aria-labelledby="headingSolution9">
<div class="accordion-body">
<p>You get the names of an object by wrapping the object name inside
<code>names(...)</code>. Similarly, you get the data type of the names
by again wrapping the whole code in <code>typeof(...)</code>:</p>
<pre><code><span><span class="fu">typeof</span><span class="op">(</span><span class="fu">names</span><span class="op">(</span><span class="va">pizza</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>alternatively, use a new variable if this is easier for you to
read:</p>
<pre><code><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu">names</span><span class="op">(</span><span class="va">pizza</span><span class="op">)</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="challenge-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-4" class="callout-inner">
<h3 class="callout-title">Challenge 4<a class="anchor" aria-label="anchor" href="#challenge-4"></a>
</h3>
<div class="callout-content">
<p>Instead of just changing some of the names a vector/list already has,
you can also set all names of an object by writing code like (replace
ALL CAPS text):</p>
<pre><code><span><span class="fu">names</span><span class="op">(</span> <span class="va">OBJECT</span> <span class="op">)</span> <span class="op">&lt;-</span>  <span class="va">CHARACTER_VECTOR</span></span></code></pre>
<p>Create a vector that gives the number for each letter in the
alphabet!</p>
<ol style="list-style-type: decimal">
<li>Generate a vector called <code>letter_no</code> with the sequence of
numbers from 1 to 26!</li>
<li>R has a built-in object called <code>LETTERS</code>. It is a
26-character vector, from A to Z. Set the names of the number sequence
to this 26 letters</li>
<li>Test yourself by calling <code>letter_no["B"]</code>, which should
give you the number 2!</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution10" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution10" aria-expanded="false" aria-controls="collapseSolution10">
  <h4 class="accordion-header" id="headingSolution10">
  Solution to Challenge 4
  </h4>
</button>
<div id="collapseSolution10" class="accordion-collapse collapse" data-bs-parent="#accordionSolution10" aria-labelledby="headingSolution10">
<div class="accordion-body">
<pre><code><span><span class="va">letter_no</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">26</span>   <span class="co"># or seq(1,26)</span></span>
<span><span class="fu">names</span><span class="op">(</span><span class="va">letter_no</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">LETTERS</span></span>
<span><span class="va">letter_no</span><span class="op">[</span><span class="st">"B"</span><span class="op">]</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="data-frames">Data frames<a class="anchor" aria-label="anchor" href="#data-frames"></a>
<a class="anchor" aria-label="anchor" href="#data-frames"></a>
</h2>
<hr class="half-width">
<p>We have data frames at the very beginning of this lesson, they
represent a table of data. We didn’t go much further into detail with
our example cat data frame:</p>
<div class="codewrapper sourceCode" id="cb118">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    coat weight likes_string
1 calico    2.1         TRUE
2  black    5.0        FALSE
3  tabby    3.2         TRUE</code></pre>
</div>
<p>We can now understand something a bit surprising in our data.frame;
what happens if we run:</p>
<div class="codewrapper sourceCode" id="cb120">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">cats</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "list"</code></pre>
</div>
<p>We see that data.frames look like lists ‘under the hood’. Think again
what we heard about what lists can be used for:</p>
<blockquote>
<p>Lists organize data of different types</p>
</blockquote>
<p>Columns of a data frame are vectors of different types, that are
organized by belonging to the same table.</p>
<p>A data.frame is really a list of vectors. It is a special list in
which all the vectors must have the same length.</p>
<p>How is this “special”-ness written into the object, so that R does
not treat it like any other list, but as a table?</p>
<div class="codewrapper sourceCode" id="cb122">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">cats</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "data.frame"</code></pre>
</div>
<p>A <strong>class</strong>, just like names, is an attribute attached
to the object. It tells us what this object means for humans.</p>
<p>You might wonder: Why do we need another
what-type-of-object-is-this-function? We already have
<code>typeof()</code>? That function tells us how the object is
<strong>constructed in the computer</strong>. The <code>class</code> is
the <strong>meaning of the object for humans</strong>. Consequently,
what <code>typeof()</code> returns is <em>fixed</em> in R (mainly the
five data types), whereas the output of <code>class()</code> is
<em>diverse</em> and <em>extendable</em> by R packages.</p>
<p>In our <code>cats</code> example, we have an integer, a double and a
logical variable. As we have seen already, each column of data.frame is
a vector.</p>
<div class="codewrapper sourceCode" id="cb124">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">$</span><span class="va">coat</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "calico" "black"  "tabby" </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb126">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "calico" "black"  "tabby" </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb128">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">cats</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb130">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">cats</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> chr [1:3] "calico" "black" "tabby"</code></pre>
</div>
<p>Each row is an <em>observation</em> of different variables, itself a
data.frame, and thus can be composed of elements of different types.</p>
<div class="codewrapper sourceCode" id="cb132">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    coat weight likes_string
1 calico    2.1         TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb134">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">cats</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "list"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb136">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">cats</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	1 obs. of  3 variables:
 $ coat        : chr "calico"
 $ weight      : num 2.1
 $ likes_string: logi TRUE</code></pre>
</div>
<div id="challenge-5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-5" class="callout-inner">
<h3 class="callout-title">Challenge 5<a class="anchor" aria-label="anchor" href="#challenge-5"></a>
</h3>
<div class="callout-content">
<p>There are several subtly different ways to call variables,
observations and elements from data.frames:</p>
<ul>
<li><code>cats[1]</code></li>
<li><code>cats[[1]]</code></li>
<li><code>cats$coat</code></li>
<li><code>cats["coat"]</code></li>
<li><code>cats[1, 1]</code></li>
<li><code>cats[, 1]</code></li>
<li><code>cats[1, ]</code></li>
</ul>
<p>Try out these examples and explain what is returned by each one.</p>
<p><em>Hint:</em> Use the function <code>typeof()</code> to examine what
is returned in each case.</p>
</div>
</div>
</div>
<div id="accordionSolution11" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution11" aria-expanded="false" aria-controls="collapseSolution11">
  <h4 class="accordion-header" id="headingSolution11">
  Solution to Challenge 5
  </h4>
</button>
<div id="collapseSolution11" class="accordion-collapse collapse" data-bs-parent="#accordionSolution11" aria-labelledby="headingSolution11">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb138">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    coat
1 calico
2  black
3  tabby</code></pre>
</div>
<p>We can think of a data frame as a list of vectors. The single brace
<code>[1]</code> returns the first slice of the list, as another list.
In this case it is the first column of the data frame.</p>
<div class="codewrapper sourceCode" id="cb140">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "calico" "black"  "tabby" </code></pre>
</div>
<p>The double brace <code>[[1]]</code> returns the contents of the list
item. In this case it is the contents of the first column, a
<em>vector</em> of type <em>character</em>.</p>
<div class="codewrapper sourceCode" id="cb142">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">$</span><span class="va">coat</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "calico" "black"  "tabby" </code></pre>
</div>
<p>This example uses the <code>$</code> character to address items by
name. <em>coat</em> is the first column of the data frame, again a
<em>vector</em> of type <em>character</em>.</p>
<div class="codewrapper sourceCode" id="cb144">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">[</span><span class="st">"coat"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    coat
1 calico
2  black
3  tabby</code></pre>
</div>
<p>Here we are using a single brace <code>["coat"]</code> replacing the
index number with the column name. Like example 1, the returned object
is a <em>list</em>.</p>
<div class="codewrapper sourceCode" id="cb146">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "calico"</code></pre>
</div>
<p>This example uses a single brace, but this time we provide row and
column coordinates. The returned object is the value in row 1, column 1.
The object is a <em>vector</em> of type <em>character</em>.</p>
<div class="codewrapper sourceCode" id="cb148">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "calico" "black"  "tabby" </code></pre>
</div>
<p>Like the previous example we use single braces and provide row and
column coordinates. The row coordinate is not specified, R interprets
this missing value as all the elements in this <em>column</em> and
returns them as a <em>vector</em>.</p>
<div class="codewrapper sourceCode" id="cb150">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    coat weight likes_string
1 calico    2.1         TRUE</code></pre>
</div>
<p>Again we use the single brace with row and column coordinates. The
column coordinate is not specified. The return value is a <em>list</em>
containing all the values in the first row.</p>
</div>
</div>
</div>
</div>
<div id="tip-renaming-data-frame-columns" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-renaming-data-frame-columns" class="callout-inner">
<h3 class="callout-title">Tip: Renaming data frame columns<a class="anchor" aria-label="anchor" href="#tip-renaming-data-frame-columns"></a>
</h3>
<div class="callout-content">
<p>Data frames have column names, which can be accessed with the
<code>names()</code> function.</p>
<div class="codewrapper sourceCode" id="cb152">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">cats</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "coat"         "weight"       "likes_string"</code></pre>
</div>
<p>If you want to rename the second column of <code>cats</code>, you can
assign a new name to the second element of <code>names(cats)</code>.</p>
<div class="codewrapper sourceCode" id="cb154">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">cats</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"weight_kg"</span></span>
<span><span class="va">cats</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    coat weight_kg likes_string
1 calico       2.1         TRUE
2  black       5.0        FALSE
3  tabby       3.2         TRUE</code></pre>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="matrices">Matrices<a class="anchor" aria-label="anchor" href="#matrices"></a>
</h3>
<p>Last but not least is the matrix. We can declare a matrix full of
zeros:</p>
<div class="codewrapper sourceCode" id="cb156">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">matrix_example</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">0</span>, ncol<span class="op">=</span><span class="fl">6</span>, nrow<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">matrix_example</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    0    0    0    0    0    0
[2,]    0    0    0    0    0    0
[3,]    0    0    0    0    0    0</code></pre>
</div>
<p>What makes it special is the <code>dim()</code> attribute:</p>
<div class="codewrapper sourceCode" id="cb158">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dim</span><span class="op">(</span><span class="va">matrix_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3 6</code></pre>
</div>
<p>And similar to other data structures, we can ask things about our
matrix:</p>
<div class="codewrapper sourceCode" id="cb160">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">matrix_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "double"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb162">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">matrix_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "matrix" "array" </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb164">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">matrix_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> num [1:3, 1:6] 0 0 0 0 0 0 0 0 0 0 ...</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb166">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nrow</span><span class="op">(</span><span class="va">matrix_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb168">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ncol</span><span class="op">(</span><span class="va">matrix_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6</code></pre>
</div>
<div id="challenge-6" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-6" class="callout-inner">
<h3 class="callout-title">Challenge 6<a class="anchor" aria-label="anchor" href="#challenge-6"></a>
</h3>
<div class="callout-content">
<p>What do you think will be the result of
<code>length(matrix_example)</code>? Try it. Were you right? Why / why
not?</p>
</div>
</div>
</div>
<div id="accordionSolution12" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution12" aria-expanded="false" aria-controls="collapseSolution12">
  <h4 class="accordion-header" id="headingSolution12">
  Solution to Challenge 6
  </h4>
</button>
<div id="collapseSolution12" class="accordion-collapse collapse" data-bs-parent="#accordionSolution12" aria-labelledby="headingSolution12">
<div class="accordion-body">
<p>What do you think will be the result of
<code>length(matrix_example)</code>?</p>
<div class="codewrapper sourceCode" id="cb170">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">matrix_example</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">0</span>, ncol<span class="op">=</span><span class="fl">6</span>, nrow<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu">length</span><span class="op">(</span><span class="va">matrix_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 18</code></pre>
</div>
<p>Because a matrix is a vector with added dimension attributes,
<code>length</code> gives you the total number of elements in the
matrix.</p>
</div>
</div>
</div>
</div>
<div id="challenge-7" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-7" class="callout-inner">
<h3 class="callout-title">Challenge 7<a class="anchor" aria-label="anchor" href="#challenge-7"></a>
</h3>
<div class="callout-content">
<p>Make another matrix, this time containing the numbers 1:50, with 5
columns and 10 rows. Did the <code>matrix</code> function fill your
matrix by column, or by row, as its default behaviour? See if you can
figure out how to change this. (hint: read the documentation for
<code>matrix</code>!)</p>
</div>
</div>
</div>
<div id="accordionSolution13" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution13" aria-expanded="false" aria-controls="collapseSolution13">
  <h4 class="accordion-header" id="headingSolution13">
  Solution to Challenge 7
  </h4>
</button>
<div id="collapseSolution13" class="accordion-collapse collapse" data-bs-parent="#accordionSolution13" aria-labelledby="headingSolution13">
<div class="accordion-body">
<p>Make another matrix, this time containing the numbers 1:50, with 5
columns and 10 rows. Did the <code>matrix</code> function fill your
matrix by column, or by row, as its default behaviour? See if you can
figure out how to change this. (hint: read the documentation for
<code>matrix</code>!)</p>
<div class="codewrapper sourceCode" id="cb172">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, ncol<span class="op">=</span><span class="fl">5</span>, nrow<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, ncol<span class="op">=</span><span class="fl">5</span>, nrow<span class="op">=</span><span class="fl">10</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># to fill by row</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-8" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-8" class="callout-inner">
<h3 class="callout-title">Challenge 8<a class="anchor" aria-label="anchor" href="#challenge-8"></a>
</h3>
<div class="callout-content">
<p>Create a list of length two containing a character vector for each of
the sections in this part of the workshop:</p>
<ul>
<li>Data types</li>
<li>Data structures</li>
</ul>
<p>Populate each character vector with the names of the data types and
data structures we’ve seen so far.</p>
</div>
</div>
</div>
<div id="accordionSolution14" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution14" aria-expanded="false" aria-controls="collapseSolution14">
  <h4 class="accordion-header" id="headingSolution14">
  Solution to Challenge 8
  </h4>
</button>
<div id="collapseSolution14" class="accordion-collapse collapse" data-bs-parent="#accordionSolution14" aria-labelledby="headingSolution14">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb173">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataTypes</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'double'</span>, <span class="st">'complex'</span>, <span class="st">'integer'</span>, <span class="st">'character'</span>, <span class="st">'logical'</span><span class="op">)</span></span>
<span><span class="va">dataStructures</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'data.frame'</span>, <span class="st">'vector'</span>, <span class="st">'list'</span>, <span class="st">'matrix'</span><span class="op">)</span></span>
<span><span class="va">answer</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span><span class="va">dataTypes</span>, <span class="va">dataStructures</span><span class="op">)</span></span></code></pre>
</div>
<p>Note: it’s nice to make a list in big writing on the board or taped
to the wall listing all of these types and structures - leave it up for
the rest of the workshop to remind people of the importance of these
basics.</p>
</div>
</div>
</div>
</div>
<div id="challenge-9" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-9" class="callout-inner">
<h3 class="callout-title">Challenge 9<a class="anchor" aria-label="anchor" href="#challenge-9"></a>
</h3>
<div class="callout-content">
<p>Consider the R output of the matrix below:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2]
[1,]    4    1
[2,]    9    5
[3,]   10    7</code></pre>
</div>
<p>What was the correct command used to write this matrix? Examine each
command and try to figure out the correct one before typing them. Think
about what matrices the other commands will produce.</p>
<ol style="list-style-type: decimal">
<li><code>matrix(c(4, 1, 9, 5, 10, 7), nrow = 3)</code></li>
<li><code>matrix(c(4, 9, 10, 1, 5, 7), ncol = 2, byrow = TRUE)</code></li>
<li><code>matrix(c(4, 9, 10, 1, 5, 7), nrow = 2)</code></li>
<li><code>matrix(c(4, 1, 9, 5, 10, 7), ncol = 2, byrow = TRUE)</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution15" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution15" aria-expanded="false" aria-controls="collapseSolution15">
  <h4 class="accordion-header" id="headingSolution15">
  Solution to Challenge 9
  </h4>
</button>
<div id="collapseSolution15" class="accordion-collapse collapse" data-bs-parent="#accordionSolution15" aria-labelledby="headingSolution15">
<div class="accordion-body">
<p>Consider the R output of the matrix below:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2]
[1,]    4    1
[2,]    9    5
[3,]   10    7</code></pre>
</div>
<p>What was the correct command used to write this matrix? Examine each
command and try to figure out the correct one before typing them. Think
about what matrices the other commands will produce.</p>
<div class="codewrapper sourceCode" id="cb176">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">matrix</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">9</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">7</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>read.csv</code> to read tabular data in R.</li>
<li>The basic data types in R are double, integer, complex, logical, and
character.</li>
<li>Data structures such as data frames or matrices are built on top of
lists and vectors, with some added attributes.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-05-data-structures-part2"><p>Content from <a href="05-data-structures-part2.html">Exploring Data Frames</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/05-data-structures-part2.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I manipulate a data frame?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Add and remove rows or columns.</li>
<li>Append two data frames.</li>
<li>Display basic properties of data frames including size and class of
the columns, names, and first few rows.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>At this point, you’ve seen it all: in the last lesson, we toured all
the basic data types and data structures in R. Everything you do will be
a manipulation of those tools. But most of the time, the star of the
show is the data frame—the table that we created by loading information
from a csv file. In this lesson, we’ll learn a few more things about
working with data frames.</p>
<section><h2 class="section-heading" id="adding-columns-and-rows-in-data-frames">Adding columns and rows in data frames<a class="anchor" aria-label="anchor" href="#adding-columns-and-rows-in-data-frames"></a>
<a class="anchor" aria-label="anchor" href="#adding-columns-and-rows-in-data-frames"></a>
</h2>
<hr class="half-width">
<p>We already learned that the columns of a data frame are vectors, so
that our data are consistent in type throughout the columns. As such, if
we want to add a new column, we can start by making a new vector:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">cats</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    coat weight likes_string
1 calico    2.1            1
2  black    5.0            0
3  tabby    3.2            1</code></pre>
</div>
<p>We can then add this as a column via:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cbind</span><span class="op">(</span><span class="va">cats</span>, <span class="va">age</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    coat weight likes_string age
1 calico    2.1            1   2
2  black    5.0            0   3
3  tabby    3.2            1   5</code></pre>
</div>
<p>Note that if we tried to add a vector of ages with a different number
of entries than the number of rows in the data frame, it would fail:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">12</span><span class="op">)</span></span>
<span><span class="fu">cbind</span><span class="op">(</span><span class="va">cats</span>, <span class="va">age</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data.frame(..., check.names = FALSE): arguments imply differing number of rows: 3, 4</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu">cbind</span><span class="op">(</span><span class="va">cats</span>, <span class="va">age</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data.frame(..., check.names = FALSE): arguments imply differing number of rows: 3, 2</code></pre>
</div>
<p>Why didn’t this work? Of course, R wants to see one element in our
new column for every row in the table:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nrow</span><span class="op">(</span><span class="va">cats</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">length</span><span class="op">(</span><span class="va">age</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2</code></pre>
</div>
<p>So for it to work we need to have <code>nrow(cats)</code> =
<code>length(age)</code>. Let’s overwrite the content of cats with our
new data frame.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">cats</span> <span class="op">&lt;-</span> <span class="fu">cbind</span><span class="op">(</span><span class="va">cats</span>, <span class="va">age</span><span class="op">)</span></span></code></pre>
</div>
<p>Now how about adding rows? We already know that the rows of a data
frame are lists:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">newRow</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span><span class="st">"tortoiseshell"</span>, <span class="fl">3.3</span>, <span class="cn">TRUE</span>, <span class="fl">9</span><span class="op">)</span></span>
<span><span class="va">cats</span> <span class="op">&lt;-</span> <span class="fu">rbind</span><span class="op">(</span><span class="va">cats</span>, <span class="va">newRow</span><span class="op">)</span></span></code></pre>
</div>
<p>Let’s confirm that our new row was added correctly.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>           coat weight likes_string age
1        calico    2.1            1   2
2         black    5.0            0   3
3         tabby    3.2            1   5
4 tortoiseshell    3.3            1   9</code></pre>
</div>
</section><section><h2 class="section-heading" id="removing-rows">Removing rows<a class="anchor" aria-label="anchor" href="#removing-rows"></a>
<a class="anchor" aria-label="anchor" href="#removing-rows"></a>
</h2>
<hr class="half-width">
<p>We now know how to add rows and columns to our data frame in R. Now
let’s learn to remove rows.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>           coat weight likes_string age
1        calico    2.1            1   2
2         black    5.0            0   3
3         tabby    3.2            1   5
4 tortoiseshell    3.3            1   9</code></pre>
</div>
<p>We can ask for a data frame minus the last row:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">[</span><span class="op">-</span><span class="fl">4</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    coat weight likes_string age
1 calico    2.1            1   2
2  black    5.0            0   3
3  tabby    3.2            1   5</code></pre>
</div>
<p>Notice the comma with nothing after it to indicate that we want to
drop the entire fourth row.</p>
<p>Note: we could also remove several rows at once by putting the row
numbers inside of a vector, for example:
<code>cats[c(-3,-4), ]</code></p>
</section><section><h2 class="section-heading" id="removing-columns">Removing columns<a class="anchor" aria-label="anchor" href="#removing-columns"></a>
<a class="anchor" aria-label="anchor" href="#removing-columns"></a>
</h2>
<hr class="half-width">
<p>We can also remove columns in our data frame. What if we want to
remove the column “age”. We can remove it in two ways, by variable
number or by index.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span><span class="op">[</span>,<span class="op">-</span><span class="fl">4</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>           coat weight likes_string
1        calico    2.1            1
2         black    5.0            0
3         tabby    3.2            1
4 tortoiseshell    3.3            1</code></pre>
</div>
<p>Notice the comma with nothing before it, indicating we want to keep
all of the rows.</p>
<p>Alternatively, we can drop the column by using the index name and the
<code>%in%</code> operator. The <code>%in%</code> operator goes through
each element of its left argument, in this case the names of
<code>cats</code>, and asks, “Does this element occur in the second
argument?”</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">drop</span> <span class="op">&lt;-</span> <span class="fu">names</span><span class="op">(</span><span class="va">cats</span><span class="op">)</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"age"</span><span class="op">)</span></span>
<span><span class="va">cats</span><span class="op">[</span>,<span class="op">!</span><span class="va">drop</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>           coat weight likes_string
1        calico    2.1            1
2         black    5.0            0
3         tabby    3.2            1
4 tortoiseshell    3.3            1</code></pre>
</div>
<p>We will cover subsetting with logical operators like
<code>%in%</code> in more detail in the next episode. See the section <a href="06-data-subsetting.html">Subsetting through other logical
operations</a></p>
</section><section><h2 class="section-heading" id="appending-to-a-data-frame">Appending to a data frame<a class="anchor" aria-label="anchor" href="#appending-to-a-data-frame"></a>
<a class="anchor" aria-label="anchor" href="#appending-to-a-data-frame"></a>
</h2>
<hr class="half-width">
<p>The key to remember when adding data to a data frame is that
<em>columns are vectors and rows are lists.</em> We can also glue two
data frames together with <code>rbind</code>:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cats</span> <span class="op">&lt;-</span> <span class="fu">rbind</span><span class="op">(</span><span class="va">cats</span>, <span class="va">cats</span><span class="op">)</span></span>
<span><span class="va">cats</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>           coat weight likes_string age
1        calico    2.1            1   2
2         black    5.0            0   3
3         tabby    3.2            1   5
4 tortoiseshell    3.3            1   9
5        calico    2.1            1   2
6         black    5.0            0   3
7         tabby    3.2            1   5
8 tortoiseshell    3.3            1   9</code></pre>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1<a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<p>You can create a new data frame right from within R with the
following syntax:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>id <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span>,</span>
<span>                 x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span>
<span>                 y <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Make a data frame that holds the following information for
yourself:</p>
<ul>
<li>first name</li>
<li>last name</li>
<li>lucky number</li>
</ul>
<p>Then use <code>rbind</code> to add an entry for the people sitting
beside you. Finally, use <code>cbind</code> to add a column with each
person’s answer to the question, “Is it time for coffee break?”</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to Challenge 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>first <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Grace"</span><span class="op">)</span>,</span>
<span>                 last <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Hopper"</span><span class="op">)</span>,</span>
<span>                 lucky_number <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">rbind</span><span class="op">(</span><span class="va">df</span>, <span class="fu">list</span><span class="op">(</span><span class="st">"Marie"</span>, <span class="st">"Curie"</span>, <span class="fl">238</span><span class="op">)</span> <span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">cbind</span><span class="op">(</span><span class="va">df</span>, coffeetime <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>,<span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="realistic-example">Realistic example<a class="anchor" aria-label="anchor" href="#realistic-example"></a>
<a class="anchor" aria-label="anchor" href="#realistic-example"></a>
</h2>
<hr class="half-width">
<p>So far, you have seen the basics of manipulating data frames with our
cat data; now let’s use those skills to digest a more realistic dataset.
Let’s read in the <code>gapminder</code> dataset that we downloaded
previously:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"data/gapminder_data.csv"</span><span class="op">)</span></span></code></pre>
</div>
<div id="miscellaneous-tips" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="miscellaneous-tips" class="callout-inner">
<h3 class="callout-title">Miscellaneous Tips<a class="anchor" aria-label="anchor" href="#miscellaneous-tips"></a>
</h3>
<div class="callout-content">
<ul>
<li><p>Another type of file you might encounter are tab-separated value
files (.tsv). To specify a tab as a separator, use <code>"\\t"</code> or
<code>read.delim()</code>.</p></li>
<li><p>Files can also be downloaded directly from the Internet into a
local folder of your choice onto your computer using the
<code>download.file</code> function. The <code>read.csv</code> function
can then be executed to read the downloaded file from the download
location, for example,</p></li>
</ul>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/swcarpentry/r-novice-gapminder/main/episodes/data/gapminder_data.csv"</span>, destfile <span class="op">=</span> <span class="st">"data/gapminder_data.csv"</span><span class="op">)</span></span>
<span><span class="va">gapminder</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"data/gapminder_data.csv"</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li>Alternatively, you can also read in files directly into R from the
Internet by replacing the file paths with a web address in
<code>read.csv</code>. One should note that in doing this no local copy
of the csv file is first saved onto your computer. For example,</li>
</ul>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/swcarpentry/r-novice-gapminder/main/episodes/data/gapminder_data.csv"</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li><p>You can read directly from excel spreadsheets without converting
them to plain text first by using the <a href="https://cran.r-project.org/package=readxl" class="external-link">readxl</a>
package.</p></li>
<li><p>The argument “stringsAsFactors” can be useful to tell R how to
read strings either as factors or as character strings. In R versions
after 4.0, all strings are read-in as characters by default, but in
earlier versions of R, strings are read-in as factors by default. For
more information, see the call-out in <a href="https://swcarpentry.github.io/r-novice-gapminder/04-data-structures-part1.html#check-your-data-for-factors" class="external-link">the
previous episode</a>.</p></li>
</ul>
</div>
</div>
</div>
<p>Let’s investigate gapminder a bit; the first thing we should always
do is check out what the data looks like with <code>str</code>:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	1704 obs. of  6 variables:
 $ country  : chr  "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...
 $ year     : int  1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
 $ pop      : num  8425333 9240934 10267083 11537966 13079460 ...
 $ continent: chr  "Asia" "Asia" "Asia" "Asia" ...
 $ lifeExp  : num  28.8 30.3 32 34 36.1 ...
 $ gdpPercap: num  779 821 853 836 740 ...</code></pre>
</div>
<p>An additional method for examining the structure of gapminder is to
use the <code>summary</code> function. This function can be used on
various objects in R. For data frames, <code>summary</code> yields a
numeric, tabular, or descriptive summary of each column. Numeric or
integer columns are described by the descriptive statistics (quartiles
and mean), and character columns by its length, class, and mode.</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   country               year           pop             continent
 Length:1704        Min.   :1952   Min.   :6.001e+04   Length:1704
 Class :character   1st Qu.:1966   1st Qu.:2.794e+06   Class :character
 Mode  :character   Median :1980   Median :7.024e+06   Mode  :character
                    Mean   :1980   Mean   :2.960e+07
                    3rd Qu.:1993   3rd Qu.:1.959e+07
                    Max.   :2007   Max.   :1.319e+09
    lifeExp        gdpPercap
 Min.   :23.60   Min.   :   241.2
 1st Qu.:48.20   1st Qu.:  1202.1
 Median :60.71   Median :  3531.8
 Mean   :59.47   Mean   :  7215.3
 3rd Qu.:70.85   3rd Qu.:  9325.5
 Max.   :82.60   Max.   :113523.1  </code></pre>
</div>
<p>Along with the <code>str</code> and <code>summary</code> functions,
we can examine individual columns of the data frame with our
<code>typeof</code> function:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "integer"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> chr [1:1704] "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...</code></pre>
</div>
<p>We can also interrogate the data frame for information about its
dimensions; remembering that <code>str(gapminder)</code> said there were
1704 observations of 6 variables in gapminder, what do you think the
following will produce, and why?</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">length</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6</code></pre>
</div>
<p>A fair guess would have been to say that the length of a data frame
would be the number of rows it has (1704), but this is not the case;
remember, a data frame is a <em>list of vectors and factors</em>:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "list"</code></pre>
</div>
<p>When <code>length</code> gave us 6, it’s because gapminder is built
out of a list of 6 columns. To get the number of rows and columns in our
dataset, try:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nrow</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1704</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ncol</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6</code></pre>
</div>
<p>Or, both at once:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dim</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1704    6</code></pre>
</div>
<p>We’ll also likely want to know what the titles of all the columns
are, so we can ask for them later:</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">colnames</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "country"   "year"      "pop"       "continent" "lifeExp"   "gdpPercap"</code></pre>
</div>
<p>At this stage, it’s important to ask ourselves if the structure R is
reporting matches our intuition or expectations; do the basic data types
reported for each column make sense? If not, we need to sort any
problems out now before they turn into bad surprises down the road,
using what we’ve learned about how R interprets data, and the importance
of <em>strict consistency</em> in how we record our data.</p>
<p>Once we’re happy that the data types and structures seem reasonable,
it’s time to start digging into our data proper. Check out the first few
lines:</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      country year      pop continent lifeExp gdpPercap
1 Afghanistan 1952  8425333      Asia  28.801  779.4453
2 Afghanistan 1957  9240934      Asia  30.332  820.8530
3 Afghanistan 1962 10267083      Asia  31.997  853.1007
4 Afghanistan 1967 11537966      Asia  34.020  836.1971
5 Afghanistan 1972 13079460      Asia  36.088  739.9811
6 Afghanistan 1977 14880372      Asia  38.438  786.1134</code></pre>
</div>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2<a class="anchor" aria-label="anchor" href="#challenge-2"></a>
</h3>
<div class="callout-content">
<p>It’s good practice to also check the last few lines of your data and
some in the middle. How would you do this?</p>
<p>Searching for ones specifically in the middle isn’t too hard, but we
could ask for a few lines at random. How would you code this?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution to Challenge 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>To check the last few lines it’s relatively simple as R already has a
function for this:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tail</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span>
<span><span class="fu">tail</span><span class="op">(</span><span class="va">gapminder</span>, n <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span></code></pre>
</div>
<p>What about a few arbitrary rows just in case something is odd in the
middle?</p>
<div class="section level2">
<h2 id="tip-there-are-several-ways-to-achieve-this-">Tip: There are several ways to achieve this.<a class="anchor" aria-label="anchor" href="#tip-there-are-several-ways-to-achieve-this-"></a>
</h2>
<p>The solution here presents one form of using nested functions, i.e. a
function passed as an argument to another function. This might sound
like a new concept, but you are already using it! Remember
my_dataframe[rows, cols] will print to screen your data frame with the
number of rows and columns you asked for (although you might have asked
for a range or named columns for example). How would you get the last
row if you don’t know how many rows your data frame has? R has a
function for this. What about getting a (pseudorandom) sample? R also
has a function for this.</p>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">[</span><span class="fu">sample</span><span class="op">(</span><span class="fu">nrow</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span>, <span class="op">]</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<p>To make sure our analysis is reproducible, we should put the code
into a script file so we can come back to it later.</p>
<div id="challenge-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-3" class="callout-inner">
<h3 class="callout-title">Challenge 3<a class="anchor" aria-label="anchor" href="#challenge-3"></a>
</h3>
<div class="callout-content">
<p>Go to file -&gt; new file -&gt; R script, and write an R script to
load in the gapminder dataset. Put it in the <code>scripts/</code>
directory and add it to version control.</p>
<p>Run the script using the <code>source</code> function, using the file
path as its argument (or by pressing the “source” button in
RStudio).</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solution to Challenge 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>The <code>source</code> function can be used to use a script within a
script. Assume you would like to load the same type of file over and
over again and therefore you need to specify the arguments to fit the
needs of your file. Instead of writing the necessary argument again and
again you could just write it once and save it as a script. Then, you
can use <code>source("Your_Script_containing_the_load_function")</code>
in a new script to use the function of that script without writing
everything again. Check out <code>?source</code> to find out more.</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/swcarpentry/r-novice-gapminder/main/episodes/data/gapminder_data.csv"</span>, destfile <span class="op">=</span> <span class="st">"data/gapminder_data.csv"</span><span class="op">)</span></span>
<span><span class="va">gapminder</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/gapminder_data.csv"</span><span class="op">)</span></span></code></pre>
</div>
<p>To run the script and load the data into the <code>gapminder</code>
variable:</p>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">source</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"scripts/load-gapminder.R"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-4" class="callout-inner">
<h3 class="callout-title">Challenge 4<a class="anchor" aria-label="anchor" href="#challenge-4"></a>
</h3>
<div class="callout-content">
<p>Read the output of <code>str(gapminder)</code> again; this time, use
what you’ve learned about lists and vectors, as well as the output of
functions like <code>colnames</code> and <code>dim</code> to explain
what everything that <code>str</code> prints out for gapminder means. If
there are any parts you can’t interpret, discuss with your
neighbors!</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solution to Challenge 4
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>The object <code>gapminder</code> is a data frame with columns</p>
<ul>
<li>
<code>country</code> and <code>continent</code> are character
strings.</li>
<li>
<code>year</code> is an integer vector.</li>
<li>
<code>pop</code>, <code>lifeExp</code>, and <code>gdpPercap</code>
are numeric vectors.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>cbind()</code> to add a new column to a data frame.</li>
<li>Use <code>rbind()</code> to add a new row to a data frame.</li>
<li>Remove rows from a data frame.</li>
<li>Use <code>str()</code>, <code>summary()</code>, <code>nrow()</code>,
<code>ncol()</code>, <code>dim()</code>, <code>colnames()</code>,
<code>head()</code>, and <code>typeof()</code> to understand the
structure of a data frame.</li>
<li>Read in a csv file using <code>read.csv()</code>.</li>
<li>Understand what <code>length()</code> of a data frame
represents.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-06-filedir"><p>Content from <a href="06-filedir.html">Navigating Files and Directories</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/06-filedir.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I move around on my computer?</li>
<li>How can I see what files and directories I have?</li>
<li>How can I specify the location of a file or directory on my
computer?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain the similarities and differences between a file and a
directory.</li>
<li>Translate an absolute path into a relative path and vice versa.</li>
<li>Construct absolute and relative paths that identify specific files
and directories.</li>
<li>Use options and arguments to change the behaviour of a shell
command.</li>
<li>Demonstrate the use of tab completion and explain its
advantages.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>The part of the operating system responsible for managing files and
directories is called the <strong>file system</strong>. It organizes our
data into files, which hold information, and directories (also called
‘folders’), which hold files or other directories.</p>
<p>Several commands are frequently used to create, inspect, rename, and
delete files and directories. To start exploring them, we’ll go to our
open shell window.</p>
<p>First, let’s find out where we are by running a command called
<code>pwd</code> (which stands for ‘print working directory’).
Directories are like <em>places</em> — at any time while we are using
the shell, we are in exactly one place called our <strong>current
working directory</strong>. Commands mostly read and write files in the
current working directory, i.e. ‘here’, so knowing where you are before
running a command is important. <code>pwd</code> shows you where you
are:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle</code></pre>
</div>
<p>Here, the computer’s response is <code>/Users/nelle</code>, which is
Nelle’s <strong>home directory</strong>:</p>
<div id="home-directory-variation" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="home-directory-variation" class="callout-inner">
<h3 class="callout-title">Home Directory Variation<a class="anchor" aria-label="anchor" href="#home-directory-variation"></a>
</h3>
<div class="callout-content">
<p>The home directory path will look different on different operating
systems. On Linux, it may look like <code>/home/nelle</code>, and on
Windows, it will be similar to
<code>C:\Documents and Settings\nelle</code> or
<code>C:\Users\nelle</code>. (Note that it may look slightly different
for different versions of Windows.) In future examples, we’ve used Mac
output as the default - Linux and Windows output may differ slightly but
should be generally similar.</p>
<p>We will also assume that your <code>pwd</code> command returns your
user’s home directory. If <code>pwd</code> returns something different,
you may need to navigate there using <code>cd</code> or some commands in
this lesson will not work as written. See <a href="#exploring-other-directories">Exploring Other Directories</a> for
more details on the <code>cd</code> command.</p>
</div>
</div>
</div>
<p>To understand what a ‘home directory’ is, let’s have a look at how
the file system as a whole is organized. For the sake of this example,
we’ll be illustrating the filesystem on our scientist Nelle’s computer.
After this illustration, you’ll be learning commands to explore your own
filesystem, which will be constructed in a similar way, but not be
exactly identical.</p>
<p>On Nelle’s computer, the filesystem looks like this:</p>
<figure><img src="fig/filesystem.svg" alt="The file system is made up of a root directory that contains sub-directories titled bin, data, users, and tmp" class="figure mx-auto d-block"></figure><p>The filesystem looks like an upside down tree. The topmost directory
is the <strong>root directory</strong> that holds everything else. We
refer to it using a slash character, <code>/</code>, on its own; this
character is the leading slash in <code>/Users/nelle</code>.</p>
<p>Inside that directory are several other directories: <code>bin</code>
(which is where some built-in programs are stored), <code>data</code>
(for miscellaneous data files), <code>Users</code> (where users’
personal directories are located), <code>tmp</code> (for temporary files
that don’t need to be stored long-term), and so on.</p>
<p>We know that our current working directory <code>/Users/nelle</code>
is stored inside <code>/Users</code> because <code>/Users</code> is the
first part of its name. Similarly, we know that <code>/Users</code> is
stored inside the root directory <code>/</code> because its name begins
with <code>/</code>.</p>
<div id="slashes" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="slashes" class="callout-inner">
<h3 class="callout-title">Slashes<a class="anchor" aria-label="anchor" href="#slashes"></a>
</h3>
<div class="callout-content">
<p>Notice that there are two meanings for the <code>/</code> character.
When it appears at the front of a file or directory name, it refers to
the root directory. When it appears <em>inside</em> a path, it’s just a
separator.</p>
</div>
</div>
</div>
<p>Underneath <code>/Users</code>, we find one directory for each user
with an account on Nelle’s machine, her colleagues <em>imhotep</em> and
<em>larry</em>.</p>
<figure><img src="fig/home-directories.svg" alt='Like other directories, home directories are sub-directories underneath "/Users" like "/Users/imhotep", "/Users/larry" or"/Users/nelle"' class="figure mx-auto d-block"></figure><p>The user <em>imhotep</em>’s files are stored in
<code>/Users/imhotep</code>, user <em>larry</em>’s in
<code>/Users/larry</code>, and Nelle’s in <code>/Users/nelle</code>.
Nelle is the user in our examples here; therefore, we get
<code>/Users/nelle</code> as our home directory. Typically, when you
open a new command prompt, you will be in your home directory to
start.</p>
<p>Now let’s learn the command that will let us see the contents of our
own filesystem. We can see what’s in our home directory by running
<code>ls</code>:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Applications Documents    Library      Music        Public
Desktop      Downloads    Movies       Pictures</code></pre>
</div>
<p>(Again, your results may be slightly different depending on your
operating system and how you have customized your filesystem.)</p>
<p><code>ls</code> prints the names of the files and directories in the
current directory. We can make its output more comprehensible by using
the <code>-F</code> <strong>option</strong> which tells <code>ls</code>
to classify the output by adding a marker to file and directory names to
indicate what they are:</p>
<ul>
<li>a trailing <code>/</code> indicates that this is a directory</li>
<li>
<code>@</code> indicates a link</li>
<li>
<code>*</code> indicates an executable</li>
</ul>
<p>Depending on your shell’s default settings, the shell might also use
colors to indicate whether each entry is a file or directory.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Applications/ Documents/    Library/      Music/        Public/
Desktop/      Downloads/    Movies/       Pictures/</code></pre>
</div>
<p>Here, we can see that the home directory contains only
<strong>sub-directories</strong>. Any names in the output that don’t
have a classification symbol are <strong>files</strong> in the current
working directory.</p>
<div id="clearing-your-terminal" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="clearing-your-terminal" class="callout-inner">
<h3 class="callout-title">Clearing your terminal<a class="anchor" aria-label="anchor" href="#clearing-your-terminal"></a>
</h3>
<div class="callout-content">
<p>If your screen gets too cluttered, you can clear your terminal using
the <code>clear</code> command. You can still access previous commands
using <kbd>↑</kbd> and <kbd>↓</kbd> to move line-by-line, or by
scrolling in your terminal.</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="getting-help">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h3>
<p><code>ls</code> has lots of other <strong>options</strong>. There are
two common ways to find out how to use a command and what options it
accepts — <strong>depending on your environment, you might find that
only one of these ways works:</strong></p>
<ol style="list-style-type: decimal">
<li>We can pass a <code>--help</code> option to any command (available
on Linux and Git Bash), for example:</li>
</ol>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">--help</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>We can read its manual with <code>man</code> (available on Linux and
macOS):</li>
</ol>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> man ls</span></code></pre>
</div>
<p>We’ll describe both ways next.</p>
<div id="help-for-built-in-commands" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="help-for-built-in-commands" class="callout-inner">
<h3 class="callout-title">Help for built-in commands<a class="anchor" aria-label="anchor" href="#help-for-built-in-commands"></a>
</h3>
<div class="callout-content">
<p>Some commands are built in to the Bash shell, rather than existing as
separate programs on the filesystem. One example is the <code>cd</code>
(change directory) command. If you get a message like
<code>No manual entry for cd</code>, try <code>help cd</code> instead.
The <code>help</code> command is how you get usage information for <a href="https://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html" class="external-link">Bash
built-ins</a>.</p>
</div>
</div>
</div>
<div class="section level4">
<h4 id="the---help-option">The <code>--help</code> option<a class="anchor" aria-label="anchor" href="#the---help-option"></a>
</h4>
<p>Most bash commands and programs that people have written to be run
from within bash, support a <code>--help</code> option that displays
more information on how to use the command or program.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">--help</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Usage: ls [OPTION]... [FILE]...
List information about the FILEs (the current directory by default).
Sort entries alphabetically if neither -cftuvSUX nor --sort is specified.

Mandatory arguments to long options are mandatory for short options, too.
  -a, --all                  do not ignore entries starting with .
  -A, --almost-all           do not list implied . and ..
      --author               with -l, print the author of each file
  -b, --escape               print C-style escapes for nongraphic characters
      --block-size=SIZE      scale sizes by SIZE before printing them; e.g.,
                               '--block-size=M' prints sizes in units of
                               1,048,576 bytes; see SIZE format below
  -B, --ignore-backups       do not list implied entries ending with ~
  -c                         with -lt: sort by, and show, ctime (time of last
                               modification of file status information);
                               with -l: show ctime and sort by name;
                               otherwise: sort by ctime, newest first
  -C                         list entries by columns
      --color[=WHEN]         colorize the output; WHEN can be 'always' (default
                               if omitted), 'auto', or 'never'; more info below
  -d, --directory            list directories themselves, not their contents
  -D, --dired                generate output designed for Emacs' dired mode
  -f                         do not sort, enable -aU, disable -ls --color
  -F, --classify             append indicator (one of */=&gt;@|) to entries
...        ...        ...</code></pre>
</div>
<div id="when-to-use-short-or-long-options" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="when-to-use-short-or-long-options" class="callout-inner">
<h3 class="callout-title">When to use short or long options<a class="anchor" aria-label="anchor" href="#when-to-use-short-or-long-options"></a>
</h3>
<div class="callout-content">
<p>When options exist as both short and long options:</p>
<ul>
<li>Use the short option when typing commands directly into the shell to
minimize keystrokes and get your task done faster.</li>
<li>Use the long option in scripts to provide clarity. It will be read
many times and typed once.</li>
</ul>
</div>
</div>
</div>
<div id="unsupported-command-line-options" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="unsupported-command-line-options" class="callout-inner">
<h3 class="callout-title">Unsupported command-line options<a class="anchor" aria-label="anchor" href="#unsupported-command-line-options"></a>
</h3>
<div class="callout-content">
<p>If you try to use an option that is not supported, <code>ls</code>
and other commands will usually print an error message similar to:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-j</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>ls: invalid option -- 'j'
Try 'ls --help' for more information.</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="the-man-command">The <code>man</code> command<a class="anchor" aria-label="anchor" href="#the-man-command"></a>
</h4>
<p>The other way to learn about <code>ls</code> is to type</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> man ls</span></code></pre>
</div>
<p>This command will turn your terminal into a page with a description
of the <code>ls</code> command and its options.</p>
<p>To navigate through the <code>man</code> pages, you may use
<kbd>↑</kbd> and <kbd>↓</kbd> to move line-by-line, or try <kbd>b</kbd>
and <kbd>Spacebar</kbd> to skip up and down by a full page. To search
for a character or word in the <code>man</code> pages, use <kbd>/</kbd>
followed by the character or word you are searching for. Sometimes a
search will result in multiple hits. If so, you can move between hits
using <kbd>N</kbd> (for moving forward) and
<kbd>Shift</kbd>+<kbd>N</kbd> (for moving backward).</p>
<p>To <strong>quit</strong> the <code>man</code> pages, press
<kbd>q</kbd>.</p>
<div id="manual-pages-on-the-web" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="manual-pages-on-the-web" class="callout-inner">
<h3 class="callout-title">Manual pages on the web<a class="anchor" aria-label="anchor" href="#manual-pages-on-the-web"></a>
</h3>
<div class="callout-content">
<p>Of course, there is a third way to access help for commands:
searching the internet via your web browser. When using internet search,
including the phrase <code>unix man page</code> in your search query
will help to find relevant results.</p>
<p>GNU provides links to its <a href="https://www.gnu.org/manual/manual.html" class="external-link">manuals</a> including the
<a href="https://www.gnu.org/software/coreutils/manual/coreutils.html" class="external-link">core
GNU utilities</a>, which covers many commands introduced within this
lesson.</p>
</div>
</div>
</div>
<div id="exploring-more-ls-options" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exploring-more-ls-options" class="callout-inner">
<h3 class="callout-title">Exploring More <code>ls</code> Options<a class="anchor" aria-label="anchor" href="#exploring-more-ls-options"></a>
</h3>
<div class="callout-content">
<p>You can also use two options at the same time. What does the command
<code>ls</code> do when used with the <code>-l</code> option? What about
if you use both the <code>-l</code> and the <code>-h</code> option?</p>
<p>Some of its output is about properties that we do not cover in this
lesson (such as file permissions and ownership), but the rest should be
useful nevertheless.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The <code>-l</code> option makes <code>ls</code> use a
<strong>l</strong>ong listing format, showing not only the
file/directory names but also additional information, such as the file
size and the time of its last modification. If you use both the
<code>-h</code> option and the <code>-l</code> option, this makes the
file size ‘<strong>h</strong>uman readable’, i.e. displaying something
like <code>5.3K</code> instead of <code>5369</code>.</p>
</div>
</div>
</div>
</div>
<div id="listing-in-reverse-chronological-order" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="listing-in-reverse-chronological-order" class="callout-inner">
<h3 class="callout-title">Listing in Reverse Chronological Order<a class="anchor" aria-label="anchor" href="#listing-in-reverse-chronological-order"></a>
</h3>
<div class="callout-content">
<p>By default, <code>ls</code> lists the contents of a directory in
alphabetical order by name. The command <code>ls -t</code> lists items
by time of last change instead of alphabetically. The command
<code>ls -r</code> lists the contents of a directory in reverse order.
Which file is displayed last when you combine the <code>-t</code> and
<code>-r</code> options? Hint: You may need to use the <code>-l</code>
option to see the last changed dates.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>The most recently changed file is listed last when using
<code>-rt</code>. This can be very useful for finding your most recent
edits or checking to see if a new output file was written.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="exploring-other-directories">Exploring Other Directories<a class="anchor" aria-label="anchor" href="#exploring-other-directories"></a>
</h3>
<p>Not only can we use <code>ls</code> on the current working directory,
but we can use it to list the contents of a different directory. Let’s
take a look at our <code>Desktop</code> directory by running
<code>ls -F Desktop</code>, i.e., the command <code>ls</code> with the
<code>-F</code> <strong>option</strong> and the <a href="https://swcarpentry.github.io/shell-novice/reference.html#argument" class="external-link"><strong>argument</strong></a>
<code>Desktop</code>. The argument <code>Desktop</code> tells
<code>ls</code> that we want a listing of something other than our
current working directory:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> Desktop</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>shell-lesson-data/</code></pre>
</div>
<p>Note that if a directory named <code>Desktop</code> does not exist in
your current working directory, this command will return an error.
Typically, a <code>Desktop</code> directory exists in your home
directory, which we assume is the current working directory of your bash
shell.</p>
<p>Your output should be a list of all the files and sub-directories in
your Desktop directory, including the <code>shell-lesson-data</code>
directory you downloaded at the <a href="index.html#setup">setup for this
lesson</a>. (On most systems, the contents of the <code>Desktop</code>
directory in the shell will show up as icons in a graphical user
interface behind all the open windows. See if this is the case for
you.)</p>
<p>Organizing things hierarchically helps us keep track of our work.
While it’s possible to put hundreds of files in our home directory just
as it’s possible to pile hundreds of printed papers on our desk, it’s
much easier to find things when they’ve been organized into
sensibly-named subdirectories.</p>
<p>Now that we know the <code>shell-lesson-data</code> directory is
located in our Desktop directory, we can do two things.</p>
<p>First, using the same strategy as before, we can look at its contents
by passing a directory name to <code>ls</code>:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> Desktop/shell-lesson-data</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>exercise-data/  north-pacific-gyre/</code></pre>
</div>
<p>Second, we can actually change our location to a different directory,
so we are no longer located in our home directory.</p>
<p>The command to change locations is <code>cd</code> followed by a
directory name to change our working directory. <code>cd</code> stands
for ‘change directory’, which is a bit misleading. The command doesn’t
change the directory; it changes the shell’s current working directory.
In other words it changes the shell’s settings for what directory we are
in. The <code>cd</code> command is akin to double-clicking a folder in a
graphical interface to get into that folder.</p>
<p>Let’s say we want to move into the <code>exercise-data</code>
directory we saw above. We can use the following series of commands to
get there:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> cd Desktop</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="ex">$</span> cd shell-lesson-data</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="ex">$</span> cd exercise-data</span></code></pre>
</div>
<p>These commands will move us from our home directory into our Desktop
directory, then into the <code>shell-lesson-data</code> directory, then
into the <code>exercise-data</code> directory. You will notice that
<code>cd</code> doesn’t print anything. This is normal. Many shell
commands will not output anything to the screen when successfully
executed. But if we run <code>pwd</code> after it, we can see that we
are now in
<code>/Users/nelle/Desktop/shell-lesson-data/exercise-data</code>.</p>
<p>If we run <code>ls -F</code> without arguments now, it lists the
contents of
<code>/Users/nelle/Desktop/shell-lesson-data/exercise-data</code>,
because that’s where we now are:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle/Desktop/shell-lesson-data/exercise-data</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>alkanes/  animal-counts/  creatures/  numbers.txt  writing/</code></pre>
</div>
<p>We now know how to go down the directory tree (i.e. how to go into a
subdirectory), but how do we go up (i.e. how do we leave a directory and
go into its parent directory)? We might try the following:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> cd shell-lesson-data</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>-bash: cd: shell-lesson-data: No such file or directory</code></pre>
</div>
<p>But we get an error! Why is this?</p>
<p>With our methods so far, <code>cd</code> can only see sub-directories
inside your current directory. There are different ways to see
directories above your current location; we’ll start with the
simplest.</p>
<p>There is a shortcut in the shell to move up one directory level. It
works as follows:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> cd ..</span></code></pre>
</div>
<p><code>..</code> is a special directory name meaning “the directory
containing this one”, or more succinctly, the <strong>parent</strong> of
the current directory. Sure enough, if we run <code>pwd</code> after
running <code>cd ..</code>, we’re back in
<code>/Users/nelle/Desktop/shell-lesson-data</code>:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle/Desktop/shell-lesson-data</code></pre>
</div>
<p>The special directory <code>..</code> doesn’t usually show up when we
run <code>ls</code>. If we want to display it, we can add the
<code>-a</code> option to <code>ls -F</code>:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> <span class="at">-a</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>./  ../  exercise-data/  north-pacific-gyre/</code></pre>
</div>
<p><code>-a</code> stands for ‘show all’ (including hidden files); it
forces <code>ls</code> to show us file and directory names that begin
with <code>.</code>, such as <code>..</code> (which, if we’re in
<code>/Users/nelle</code>, refers to the <code>/Users</code> directory).
As you can see, it also displays another special directory that’s just
called <code>.</code>, which means ‘the current working directory’. It
may seem redundant to have a name for it, but we’ll see some uses for it
soon.</p>
<p>Note that in most command line tools, multiple options can be
combined with a single <code>-</code> and no spaces between the options;
<code>ls -F -a</code> is equivalent to <code>ls -Fa</code>.</p>
<div id="other-hidden-files" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="other-hidden-files" class="callout-inner">
<h3 class="callout-title">Other Hidden Files<a class="anchor" aria-label="anchor" href="#other-hidden-files"></a>
</h3>
<div class="callout-content">
<p>In addition to the hidden directories <code>..</code> and
<code>.</code>, you may also see a file called
<code>.bash_profile</code>. This file usually contains shell
configuration settings. You may also see other files and directories
beginning with <code>.</code>. These are usually files and directories
that are used to configure different programs on your computer. The
prefix <code>.</code> is used to prevent these configuration files from
cluttering the terminal when a standard <code>ls</code> command is
used.</p>
</div>
</div>
</div>
<p>These three commands are the basic commands for navigating the
filesystem on your computer: <code>pwd</code>, <code>ls</code>, and
<code>cd</code>. Let’s explore some variations on those commands. What
happens if you type <code>cd</code> on its own, without giving a
directory?</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> cd</span></code></pre>
</div>
<p>How can you check what happened? <code>pwd</code> gives us the
answer!</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle</code></pre>
</div>
<p>It turns out that <code>cd</code> without an argument will return you
to your home directory, which is great if you’ve got lost in your own
filesystem.</p>
<p>Let’s try returning to the <code>exercise-data</code> directory from
before. Last time, we used three commands, but we can actually string
together the list of directories to move to <code>exercise-data</code>
in one step:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">$</span> cd Desktop/shell-lesson-data/exercise-data</span></code></pre>
</div>
<p>Check that we’ve moved to the right place by running <code>pwd</code>
and <code>ls -F</code>.</p>
<p>If we want to move up one level from the data directory, we could use
<code>cd ..</code>. But there is another way to move to any directory,
regardless of your current location.</p>
<p>So far, when specifying directory names, or even a directory path (as
above), we have been using <strong>relative paths</strong>. When you use
a relative path with a command like <code>ls</code> or <code>cd</code>,
it tries to find that location from where we are, rather than from the
root of the file system.</p>
<p>However, it is possible to specify the <strong>absolute path</strong>
to a directory by including its entire path from the root directory,
which is indicated by a leading slash. The leading <code>/</code> tells
the computer to follow the path from the root of the file system, so it
always refers to exactly one directory, no matter where we are when we
run the command.</p>
<p>This allows us to move to our <code>shell-lesson-data</code>
directory from anywhere on the filesystem (including from inside
<code>exercise-data</code>). To find the absolute path we’re looking
for, we can use <code>pwd</code> and then extract the piece we need to
move to <code>shell-lesson-data</code>.</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle/Desktop/shell-lesson-data/exercise-data</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> cd /Users/nelle/Desktop/shell-lesson-data</span></code></pre>
</div>
<p>Run <code>pwd</code> and <code>ls -F</code> to ensure that we’re in
the directory we expect.</p>
<div id="two-more-shortcuts" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="two-more-shortcuts" class="callout-inner">
<h3 class="callout-title">Two More Shortcuts<a class="anchor" aria-label="anchor" href="#two-more-shortcuts"></a>
</h3>
<div class="callout-content">
<p>The shell interprets a tilde (<code>~</code>) character at the start
of a path to mean “the current user’s home directory”. For example, if
Nelle’s home directory is <code>/Users/nelle</code>, then
<code>~/data</code> is equivalent to <code>/Users/nelle/data</code>.
This only works if it is the first character in the path;
<code>here/there/~/elsewhere</code> is <em>not</em>
<code>here/there/Users/nelle/elsewhere</code>.</p>
<p>Another shortcut is the <code>-</code> (dash) character.
<code>cd</code> will translate <code>-</code> into <em>the previous
directory I was in</em>, which is faster than having to remember, then
type, the full path. This is a <em>very</em> efficient way of moving
<em>back and forth between two directories</em> – i.e. if you execute
<code>cd -</code> twice, you end up back in the starting directory.</p>
<p>The difference between <code>cd ..</code> and <code>cd -</code> is
that the former brings you <em>up</em>, while the latter brings you
<em>back</em>.</p>
<hr>
<p>Try it! First navigate to <code>~/Desktop/shell-lesson-data</code>
(you should already be there).</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/shell-lesson-data</span></code></pre>
</div>
<p>Then <code>cd</code> into the <code>exercise-data/creatures</code>
directory</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> cd exercise-data/creatures</span></code></pre>
</div>
<p>Now if you run</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> cd <span class="at">-</span></span></code></pre>
</div>
<p>you’ll see you’re back in <code>~/Desktop/shell-lesson-data</code>.
Run <code>cd -</code> again and you’re back in
<code>~/Desktop/shell-lesson-data/exercise-data/creatures</code></p>
</div>
</div>
</div>
<div id="absolute-vs-relative-paths" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="absolute-vs-relative-paths" class="callout-inner">
<h3 class="callout-title">Absolute vs Relative Paths<a class="anchor" aria-label="anchor" href="#absolute-vs-relative-paths"></a>
</h3>
<div class="callout-content">
<p>Starting from <code>/Users/nelle/data</code>, which of the following
commands could Nelle use to navigate to her home directory, which is
<code>/Users/nelle</code>?</p>
<ol style="list-style-type: decimal">
<li><code>cd .</code></li>
<li><code>cd /</code></li>
<li><code>cd /home/nelle</code></li>
<li><code>cd ../..</code></li>
<li><code>cd ~</code></li>
<li><code>cd home</code></li>
<li><code>cd ~/data/..</code></li>
<li><code>cd</code></li>
<li><code>cd ..</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>No: <code>.</code> stands for the current directory.</li>
<li>No: <code>/</code> stands for the root directory.</li>
<li>No: Nelle’s home directory is <code>/Users/nelle</code>.</li>
<li>No: this command goes up two levels, i.e. ends in
<code>/Users</code>.</li>
<li>Yes: <code>~</code> stands for the user’s home directory, in this
case <code>/Users/nelle</code>.</li>
<li>No: this command would navigate into a directory <code>home</code>
in the current directory if it exists.</li>
<li>Yes: unnecessarily complicated, but correct.</li>
<li>Yes: shortcut to go back to the user’s home directory.</li>
<li>Yes: goes up one level.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="relative-path-resolution" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="relative-path-resolution" class="callout-inner">
<h3 class="callout-title">Relative Path Resolution<a class="anchor" aria-label="anchor" href="#relative-path-resolution"></a>
</h3>
<div class="callout-content">
<p>Using the filesystem diagram below, if <code>pwd</code> displays
<code>/Users/thing</code>, what will <code>ls -F ../backup</code>
display?</p>
<ol style="list-style-type: decimal">
<li><code>../backup: No such file or directory</code></li>
<li><code>2012-12-01 2013-01-08 2013-01-27</code></li>
<li><code>2012-12-01/ 2013-01-08/ 2013-01-27/</code></li>
<li><code>original/ pnas_final/ pnas_sub/</code></li>
</ol>
<figure><img src="fig/filesystem-challenge.svg" alt='A directory tree below the Users directory where "/Users" contains the directories "backup" and "thing"; "/Users/backup" contains "original","pnas_final" and "pnas_sub"; "/Users/thing" contains "backup"; and"/Users/thing/backup" contains "2012-12-01", "2013-01-08" and"2013-01-27"' class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>No: there <em>is</em> a directory <code>backup</code> in
<code>/Users</code>.</li>
<li>No: this is the content of <code>Users/thing/backup</code>, but with
<code>..</code>, we asked for one level further up.</li>
<li>No: see previous explanation.</li>
<li>Yes: <code>../backup/</code> refers to
<code>/Users/backup/</code>.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="ls-reading-comprehension" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="ls-reading-comprehension" class="callout-inner">
<h3 class="callout-title">
<code>ls</code> Reading Comprehension<a class="anchor" aria-label="anchor" href="#ls-reading-comprehension"></a>
</h3>
<div class="callout-content">
<p>Using the filesystem diagram below, if <code>pwd</code> displays
<code>/Users/backup</code>, and <code>-r</code> tells <code>ls</code> to
display things in reverse order, what command(s) will result in the
following output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>pnas_sub/ pnas_final/ original/</code></pre>
</div>
<figure><img src="fig/filesystem-challenge.svg" alt='A directory tree below the Users directory where "/Users" contains the directories "backup" and "thing"; "/Users/backup" contains "original","pnas_final" and "pnas_sub"; "/Users/thing" contains "backup"; and"/Users/thing/backup" contains "2012-12-01", "2013-01-08" and"2013-01-27"' class="figure mx-auto d-block"></figure><ol style="list-style-type: decimal">
<li><code>ls pwd</code></li>
<li><code>ls -r -F</code></li>
<li><code>ls -r -F /Users/backup</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>No: <code>pwd</code> is not the name of a directory.</li>
<li>Yes: <code>ls</code> without directory argument lists files and
directories in the current directory.</li>
<li>Yes: uses the absolute path explicitly.</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="general-syntax-of-a-shell-command">General Syntax of a Shell Command<a class="anchor" aria-label="anchor" href="#general-syntax-of-a-shell-command"></a>
<a class="anchor" aria-label="anchor" href="#general-syntax-of-a-shell-command"></a>
</h2>
<hr class="half-width">
<p>We have now encountered commands, options, and arguments, but it is
perhaps useful to formalise some terminology.</p>
<p>Consider the command below as a general example of a command, which
we will dissect into its component parts:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> /</span></code></pre>
</div>
<figure><img src="fig/shell_command_syntax.svg" alt="General syntax of a shell command" class="figure mx-auto d-block"></figure><p><code>ls</code> is the <strong>command</strong>, with an
<strong>option</strong> <code>-F</code> and an <strong>argument</strong>
<code>/</code>. We’ve already encountered options which either start
with a single dash (<code>-</code>), known as <strong>short
options</strong>, or two dashes (<code>--</code>), known as <strong>long
options</strong>. [Options] change the behavior of a command and <a href="https://swcarpentry.github.io/shell-novice/reference.html#argument" class="external-link">Arguments</a>
tell the command what to operate on (e.g. files and directories).
Sometimes options and arguments are referred to as
<strong>parameters</strong>. A command can be called with more than one
option and more than one argument, but a command doesn’t always require
an argument or an option.</p>
<p>You might sometimes see options being referred to as
<strong>switches</strong> or <strong>flags</strong>, especially for
options that take no argument. In this lesson we will stick with using
the term <em>option</em>.</p>
<p>Each part is separated by spaces. If you omit the space between
<code>ls</code> and <code>-F</code> the shell will look for a command
called <code>ls-F</code>, which doesn’t exist. Also, capitalization can
be important. For example, <code>ls -s</code> will display the size of
files and directories alongside the names, while <code>ls -S</code> will
sort the files and directories by size, as shown below:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/shell-lesson-data</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-s</span> exercise-data</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>total 28
 4 animal-counts   4 creatures  12 numbers.txt   4 alkanes   4 writing</code></pre>
</div>
<p>Note that the sizes returned by <code>ls -s</code> are in
<em>blocks</em>. As these are defined differently for different
operating systems, you may not obtain the same figures as in the
example.</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-S</span> exercise-data</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>animal-counts  creatures  alkanes  writing  numbers.txt</code></pre>
</div>
<p>Putting all that together, our command <code>ls -F /</code> above
gives us a listing of files and directories in the root directory
<code>/</code>. An example of the output you might get from the above
command is given below:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> /</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Applications/         System/
Library/              Users/
Network/              Volumes/</code></pre>
</div>
<div class="section level3">
<h3 id="nelles-pipeline-organizing-files">Nelle’s Pipeline: Organizing Files<a class="anchor" aria-label="anchor" href="#nelles-pipeline-organizing-files"></a>
</h3>
<p>Knowing this much about files and directories, Nelle is ready to
organize the files that the protein assay machine will create.</p>
<p>She creates a directory called <code>north-pacific-gyre</code> (to
remind herself where the data came from), which will contain the data
files from the assay machine and her data processing scripts.</p>
<p>Each of her physical samples is labelled according to her lab’s
convention with a unique ten-character ID, such as ‘NENE01729A’. This ID
is what she used in her collection log to record the location, time,
depth, and other characteristics of the sample, so she decides to use it
within the filename of each data file. Since the output of the assay
machine is plain text, she will call her files
<code>NENE01729A.txt</code>, <code>NENE01812A.txt</code>, and so on. All
1520 files will go into the same directory.</p>
<p>Now in her current directory <code>shell-lesson-data</code>, Nelle
can see what files she has using the command:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="ex">$</span> ls north-pacific-gyre/</span></code></pre>
</div>
<p>This command is a lot to type, but she can let the shell do most of
the work through what is called <strong>tab completion</strong>. If she
types:</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="ex">$</span> ls nor</span></code></pre>
</div>
<p>and then presses <kbd>Tab</kbd> (the tab key on her keyboard), the
shell automatically completes the directory name for her:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="ex">$</span> ls north-pacific-gyre/</span></code></pre>
</div>
<p>Pressing <kbd>Tab</kbd> again does nothing, since there are multiple
possibilities; pressing <kbd>Tab</kbd> twice brings up a list of all the
files.</p>
<p>If Nelle then presses <kbd>G</kbd> and then presses <kbd>Tab</kbd>
again, the shell will append ‘goo’ since all files that start with ‘g’
share the first three characters ‘goo’.</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="ex">$</span> ls north-pacific-gyre/goo</span></code></pre>
</div>
<p>To see all of those files, she can press <kbd>Tab</kbd> twice
more.</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="fu">ls</span> north-pacific-gyre/goo</span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a><span class="ex">goodiff.sh</span>   goostats.sh</span></code></pre>
</div>
<p>This is called <strong>tab completion</strong>, and we will see it in
many other tools as we go on.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>The file system is responsible for managing information on the
disk.</li>
<li>Information is stored in files, which are stored in directories
(folders).</li>
<li>Directories can also store other directories, which then form a
directory tree.</li>
<li>
<code>pwd</code> prints the user’s current working directory.</li>
<li>
<code>ls [path]</code> prints a listing of a specific file or
directory; <code>ls</code> on its own lists the current working
directory.</li>
<li>
<code>cd [path]</code> changes the current working directory.</li>
<li>Most commands take options that begin with a single
<code>-</code>.</li>
<li>Directory names in a path are separated with <code>/</code> on Unix,
but <code>\</code> on Windows.</li>
<li>
<code>/</code> on its own is the root directory of the whole file
system.</li>
<li>An absolute path specifies a location from the root of the file
system.</li>
<li>A relative path specifies a location starting from the current
location.</li>
<li>
<code>.</code> on its own means ‘the current directory’;
<code>..</code> means ‘the directory above the current one’.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-07-basics"><p>Content from <a href="07-basics.html">Automated Version Control</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/07-basics.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is version control and why should I use it?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand the benefits of an automated version control system.</li>
<li>Understand the basics of how automated version control systems
work.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>We’ll start by exploring how version control can be used to keep
track of what one person did and when. Even if you aren’t collaborating
with other people, automated version control is much better than this
situation:</p>
<figure><img src="fig/phd101212s.png" alt='Comic: a PhD student sends "FINAL.doc" to their supervisor, but after several increasingly intense and frustrating rounds of comments and revisions they end up with a file named "FINAL_rev.22.comments49.corrections.10.#@$%WHYDIDCOMETOGRADSCHOOL????.doc"' class="figure mx-auto d-block"><div class="figcaption">“notFinal.doc” by Jorge Cham, <a href="https://www.phdcomics.com" class="external-link uri">https://www.phdcomics.com</a>
</div>
</figure><p>We’ve all been in this situation before: it seems unnecessary to have
multiple nearly-identical versions of the same document. Some word
processors let us deal with this a little better, such as Microsoft
Word’s <a href="https://support.office.com/en-us/article/Track-changes-in-Word-197ba630-0f5f-4a8e-9a77-3712475e806a" class="external-link">Track
Changes</a>, Google Docs’ <a href="https://support.google.com/docs/answer/190843?hl=en" class="external-link">version
history</a>, or LibreOffice’s <a href="https://help.libreoffice.org/Common/Recording_and_Displaying_Changes" class="external-link">Recording
and Displaying Changes</a>.</p>
<p>Version control systems start with a base version of the document and
then record changes you make each step of the way. You can think of it
as a recording of your progress: you can rewind to start at the base
document and play back each change you made, eventually arriving at your
more recent version.</p>
<figure><img src="fig/play-changes.svg" alt="A diagram demonstrating how a single document grows as the result of sequential changes" class="figure mx-auto d-block"></figure><p>Once you think of changes as separate from the document itself, you
can then think about “playing back” different sets of changes on the
base document, ultimately resulting in different versions of that
document. For example, two users can make independent sets of changes on
the same document.</p>
<figure><img src="fig/versions.svg" alt="A diagram with one source document that has been modified in two different ways to produce two different versions of the document" class="figure mx-auto d-block"></figure><p>Unless multiple users make changes to the same section of the
document - a <a href="reference.html#conflict">conflict</a> - you can
incorporate two sets of changes into the same base document.</p>
<figure><img src="fig/merge.svg" alt="A diagram that shows the merging of two different document versions into one document that contains all of the changes from both versions" class="figure mx-auto d-block"></figure><p>A version control system is a tool that keeps track of these changes
for us, effectively creating different versions of our files. It allows
us to decide which changes will be made to the next version (each record
of these changes is called a <a href="reference.html#commit">commit</a>), and keeps useful metadata
about them. The complete history of commits for a particular project and
their metadata make up a <a href="reference.html#repository">repository</a>. Repositories can be
kept in sync across different computers, facilitating collaboration
among different people.</p>
<div id="the-long-history-of-version-control-systems" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-long-history-of-version-control-systems" class="callout-inner">
<h3 class="callout-title">The Long History of Version Control Systems<a class="anchor" aria-label="anchor" href="#the-long-history-of-version-control-systems"></a>
</h3>
<div class="callout-content">
<p>Automated version control systems are nothing new. Tools like <a href="https://en.wikipedia.org/wiki/Revision_Control_System" class="external-link">RCS</a>, <a href="https://en.wikipedia.org/wiki/Concurrent_Versions_System" class="external-link">CVS</a>,
or <a href="https://en.wikipedia.org/wiki/Apache_Subversion" class="external-link">Subversion</a>
have been around since the early 1980s and are used by many large
companies. However, many of these are now considered legacy systems
(i.e., outdated) due to various limitations in their capabilities. More
modern systems, such as Git and <a href="https://swcarpentry.github.io/hg-novice/" class="external-link">Mercurial</a>, are
<em>distributed</em>, meaning that they do not need a centralized server
to host the repository. These modern systems also include powerful
merging tools that make it possible for multiple authors to work on the
same files concurrently.</p>
</div>
</div>
</div>
<div id="paper-writing" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="paper-writing" class="callout-inner">
<h3 class="callout-title">Paper Writing<a class="anchor" aria-label="anchor" href="#paper-writing"></a>
</h3>
<div class="callout-content">
<ul>
<li><p>Imagine you drafted an excellent paragraph for a paper you are
writing, but later ruin it. How would you retrieve the
<em>excellent</em> version of your conclusion? Is it even
possible?</p></li>
<li><p>Imagine you have 5 co-authors. How would you manage the changes
and comments they make to your paper? If you use LibreOffice Writer or
Microsoft Word, what happens if you accept changes made using the
<code>Track Changes</code> option? Do you have a history of those
changes?</p></li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ul>
<li><p>Recovering the excellent version is only possible if you created
a copy of the old version of the paper. The danger of losing good
versions often leads to the problematic workflow illustrated in the PhD
Comics cartoon at the top of this page.</p></li>
<li><p>Collaborative writing with traditional word processors is
cumbersome. Either every collaborator has to work on a document
sequentially (slowing down the process of writing), or you have to send
out a version to all collaborators and manually merge their comments
into your document. The ‘track changes’ or ‘record changes’ option can
highlight changes for you and simplifies merging, but as soon as you
accept changes you will lose their history. You will then no longer know
who suggested that change, why it was suggested, or when it was merged
into the rest of the document. Even online word processors like Google
Docs or Microsoft Office Online do not fully resolve these
problems.</p></li>
</ul>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Version control is like an unlimited ‘undo’.</li>
<li>Version control also allows many people to work in parallel.</li>
</ul>
</div>
</div>
</div></section><section id="aio-08-setup"><p>Content from <a href="08-setup.html">Setting Up Git</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/08-setup.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I get set up to use Git?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Configure <code>git</code> the first time it is used on a
computer.</li>
<li>Understand the meaning of the <code>--global</code> configuration
flag.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>When we use Git on a new computer for the first time, we need to
configure a few things. Below are a few examples of configurations we
will set as we get started with Git:</p>
<ul>
<li>our name and email address,</li>
<li>what our preferred text editor is,</li>
<li>and that we want to use these settings globally (i.e. for every
project).</li>
</ul>
<p>On a command line, Git commands are written as
<code>git verb options</code>, where <code>verb</code> is what we
actually want to do and <code>options</code> is additional optional
information which may be needed for the <code>verb</code>. So here is
how Dracula sets up his new laptop:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> user.name <span class="st">"Vlad Dracula"</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> user.email <span class="st">"vlad@tran.sylvan.ia"</span></span></code></pre>
</div>
<p>Please use your own name and email address instead of Dracula’s. This
user name and email will be associated with your subsequent Git
activity, which means that any changes pushed to <a href="https://github.com/" class="external-link">GitHub</a>, <a href="https://bitbucket.org/" class="external-link">BitBucket</a>, <a href="https://gitlab.com/" class="external-link">GitLab</a> or another Git host server after
this lesson will include this information.</p>
<p>For this lesson, we will be interacting with <a href="https://github.com/" class="external-link">GitHub</a> and so the email address used
should be the same as the one used when setting up your GitHub account.
If you are concerned about privacy, please review <a href="https://help.github.com/articles/keeping-your-email-address-private/" class="external-link">GitHub’s
instructions for keeping your email address private</a>.</p>
<div id="keeping-your-email-private" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="keeping-your-email-private" class="callout-inner">
<h3 class="callout-title">Keeping your email private<a class="anchor" aria-label="anchor" href="#keeping-your-email-private"></a>
</h3>
<div class="callout-content">
<p>If you elect to use a private email address with GitHub, then use
GitHub’s no-reply email address for the <code>user.email</code> value.
It looks like <code>ID+username@users.noreply.github.com</code>. You can
look up your own address in your GitHub <a href="https://github.com/settings/emails" class="external-link">email settings</a>.</p>
</div>
</div>
</div>
<div id="line-endings" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="line-endings" class="callout-inner">
<h3 class="callout-title">Line Endings<a class="anchor" aria-label="anchor" href="#line-endings"></a>
</h3>
<div class="callout-content">
<p>As with other keys, when you hit <kbd>Enter</kbd> or <kbd>↵</kbd> or
on Macs, <kbd>Return</kbd> on your keyboard, your computer encodes this
input as a character. Different operating systems use different
character(s) to represent the end of a line. (You may also hear these
referred to as newlines or line breaks.) Because Git uses these
characters to compare files, it may cause unexpected issues when editing
a file on different machines. Though it is beyond the scope of this
lesson, you can read more about this issue <a href="https://www.git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_core_autocrlf" class="external-link">in
the Pro Git book</a>.</p>
<p>You can change the way Git recognizes and encodes line endings using
the <code>core.autocrlf</code> command to <code>git config</code>. The
following settings are recommended:</p>
<p>On macOS and Linux:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> core.autocrlf input</span></code></pre>
</div>
<p>And on Windows:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> core.autocrlf true</span></code></pre>
</div>
</div>
</div>
</div>
<p>Dracula also has to set his favorite text editor, following this
table:</p>
<table class="table">
<colgroup>
<col width="27%">
<col width="72%">
</colgroup>
<thead><tr class="header">
<th align="left">Editor</th>
<th align="left">Configuration command</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Atom</td>
<td align="left"><code>$ git config --global core.editor "atom --wait"</code></td>
</tr>
<tr class="even">
<td align="left">nano</td>
<td align="left"><code>$ git config --global core.editor "nano -w"</code></td>
</tr>
<tr class="odd">
<td align="left">BBEdit (Mac, with command line tools)</td>
<td align="left"><code>$ git config --global core.editor "bbedit -w"</code></td>
</tr>
<tr class="even">
<td align="left">Sublime Text (Mac)</td>
<td align="left"><code>$ git config --global core.editor "/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl -n -w"</code></td>
</tr>
<tr class="odd">
<td align="left">Sublime Text (Win, 32-bit install)</td>
<td align="left"><code>$ git config --global core.editor "'c:/program files (x86)/sublime text 3/sublime_text.exe' -w"</code></td>
</tr>
<tr class="even">
<td align="left">Sublime Text (Win, 64-bit install)</td>
<td align="left"><code>$ git config --global core.editor "'c:/program files/sublime text 3/sublime_text.exe' -w"</code></td>
</tr>
<tr class="odd">
<td align="left">Notepad (Win)</td>
<td align="left"><code>$ git config --global core.editor "c:/Windows/System32/notepad.exe"</code></td>
</tr>
<tr class="even">
<td align="left">Notepad++ (Win, 32-bit install)</td>
<td align="left"><code>$ git config --global core.editor "'c:/program files (x86)/Notepad++/notepad++.exe' -multiInst -notabbar -nosession -noPlugin"</code></td>
</tr>
<tr class="odd">
<td align="left">Notepad++ (Win, 64-bit install)</td>
<td align="left"><code>$ git config --global core.editor "'c:/program files/Notepad++/notepad++.exe' -multiInst -notabbar -nosession -noPlugin"</code></td>
</tr>
<tr class="even">
<td align="left">Kate (Linux)</td>
<td align="left"><code>$ git config --global core.editor "kate"</code></td>
</tr>
<tr class="odd">
<td align="left">Gedit (Linux)</td>
<td align="left"><code>$ git config --global core.editor "gedit --wait --new-window"</code></td>
</tr>
<tr class="even">
<td align="left">Scratch (Linux)</td>
<td align="left"><code>$ git config --global core.editor "scratch-text-editor"</code></td>
</tr>
<tr class="odd">
<td align="left">Emacs</td>
<td align="left"><code>$ git config --global core.editor "emacs"</code></td>
</tr>
<tr class="even">
<td align="left">Vim</td>
<td align="left"><code>$ git config --global core.editor "vim"</code></td>
</tr>
<tr class="odd">
<td align="left">VS Code</td>
<td align="left"><code>$ git config --global core.editor "code --wait"</code></td>
</tr>
</tbody>
</table>
<p>It is possible to reconfigure the text editor for Git whenever you
want to change it.</p>
<div id="exiting-vim" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="exiting-vim" class="callout-inner">
<h3 class="callout-title">Exiting Vim<a class="anchor" aria-label="anchor" href="#exiting-vim"></a>
</h3>
<div class="callout-content">
<p>Note that Vim is the default editor for many programs. If you haven’t
used Vim before and wish to exit a session without saving your changes,
press <kbd>Esc</kbd> then type <code>:q!</code> and hit <kbd>Enter</kbd>
or <kbd>↵</kbd> or on Macs, <kbd>Return</kbd>. If you want to save your
changes and quit, press <kbd>Esc</kbd> then type <code>:wq</code> and
hit <kbd>Enter</kbd> or <kbd>↵</kbd> or on Macs, <kbd>Return</kbd>.</p>
</div>
</div>
</div>
<p>Git (2.28+) allows configuration of the name of the branch created
when you initialize any new repository. Dracula decides to use that
feature to set it to <code>main</code> so it matches the cloud service
he will eventually use.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> init.defaultBranch main</span></code></pre>
</div>
<div id="default-git-branch-naming" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="default-git-branch-naming" class="callout-inner">
<h3 class="callout-title">Default Git branch naming<a class="anchor" aria-label="anchor" href="#default-git-branch-naming"></a>
</h3>
<div class="callout-content">
<p>Source file changes are associated with a “branch.” For new learners
in this lesson, it’s enough to know that branches exist, and this lesson
uses one branch.<br>
By default, Git will create a branch called <code>master</code> when you
create a new repository with <code>git init</code> (as explained in the
next Episode). This term evokes the racist practice of human slavery and
the <a href="https://github.com/github/renaming" class="external-link">software development
community</a> has moved to adopt more inclusive language.</p>
<p>In 2020, most Git code hosting services transitioned to using
<code>main</code> as the default branch. As an example, any new
repository that is opened in GitHub and GitLab default to
<code>main</code>. However, Git has not yet made the same change. As a
result, local repositories must be manually configured have the same
main branch name as most cloud services.</p>
<p>For versions of Git prior to 2.28, the change can be made on an
individual repository level. The command for this is in the next
episode. Note that if this value is unset in your local Git
configuration, the <code>init.defaultBranch</code> value defaults to
<code>master</code>.</p>
</div>
</div>
</div>
<p>The five commands we just ran above only need to be run once: the
flag <code>--global</code> tells Git to use the settings for every
project, in your user account, on this computer.</p>
<p>Let’s review those settings and test our <code>core.editor</code>
right away:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> <span class="at">--edit</span></span></code></pre>
</div>
<p>Let’s close the file without making any additional changes. Remember,
since typos in the config file will cause issues, it’s safer to view the
configuration with:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--list</span></span></code></pre>
</div>
<p>And if necessary, change your configuration using the same commands
to choose another editor or update your email address. This can be done
as many times as you want.</p>
<div id="proxy" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="proxy" class="callout-inner">
<h3 class="callout-title">Proxy<a class="anchor" aria-label="anchor" href="#proxy"></a>
</h3>
<div class="callout-content">
<p>In some networks you need to use a <a href="https://en.wikipedia.org/wiki/Proxy_server" class="external-link">proxy</a>. If this is
the case, you may also need to tell Git about the proxy:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> http.proxy proxy-url</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> https.proxy proxy-url</span></code></pre>
</div>
<p>To disable the proxy, use</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> <span class="at">--unset</span> http.proxy</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> <span class="at">--unset</span> https.proxy</span></code></pre>
</div>
</div>
</div>
</div>
<div id="git-help-and-manual" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="git-help-and-manual" class="callout-inner">
<h3 class="callout-title">Git Help and Manual<a class="anchor" aria-label="anchor" href="#git-help-and-manual"></a>
</h3>
<div class="callout-content">
<p>Always remember that if you forget the subcommands or options of a
<code>git</code> command, you can access the relevant list of options
typing <code>git &lt;command&gt; -h</code> or access the corresponding
Git manual by typing <code>git &lt;command&gt; --help</code>, e.g.:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">-h</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--help</span></span></code></pre>
</div>
<p>While viewing the manual, remember the <code>:</code> is a prompt
waiting for commands and you can press <kbd>Q</kbd> to exit the
manual.</p>
<p>More generally, you can get the list of available <code>git</code>
commands and further resources of the Git manual typing:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> git help</span></code></pre>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>git config</code> with the <code>--global</code> option to
configure a user name, email address, editor, and other preferences once
per machine.</li>
</ul>
</div>
</div>
</div></section><section id="aio-09-create"><p>Content from <a href="09-create.html">Creating a Repository</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/09-create.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Where does Git store information?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Create a local Git repository.</li>
<li>Describe the purpose of the <code>.git</code> directory.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Once Git is configured, we can start using it.</p>
<p>We will continue with the story of Wolfman and Dracula who are
investigating if it is possible to send a planetary lander to Mars.</p>
<p><img src="fig/motivatingexample.png" alt="The main elements of the story: Dracula, Wolfman, the Mummy, Mars, Pluto and The Moon" class="figure"><a href="https://www.deviantart.com/b-maze/art/Werewolf-vs-Dracula-124893530" class="external-link">Werewolf
vs dracula</a> by <a href="https://www.deviantart.com/b-maze" class="external-link">b-maze</a>
/ <a href="https://www.deviantart.com/" class="external-link">Deviant Art</a>. <a href="https://en.wikipedia.org/wiki/File:OSIRIS_Mars_true_color.jpg" class="external-link">Mars</a>
by European Space Agency / <a href="https://creativecommons.org/licenses/by/3.0/deed.en" class="external-link">CC-BY-SA 3.0
IGO</a>. <a href="https://commons.wikimedia.org/wiki/File:PIA19873-Pluto-NewHorizons-FlyingPastImage-20150714-transparent.png" class="external-link">Pluto</a>
/ Courtesy NASA/JPL-Caltech. <a href="https://commons.wikimedia.org/wiki/File:Mummy_icon_-_Noun_Project_4070.svg" class="external-link">Mummy</a>
© Gilad Fried / <a href="https://thenounproject.com/" class="external-link">The Noun
Project</a> / <a href="https://creativecommons.org/licenses/by/3.0/deed.en" class="external-link">CC BY
3.0</a>. <a href="https://commons.wikimedia.org/wiki/File:Lune_ico.png" class="external-link">Moon</a> ©
Luc Viatour / <a href="https://lucnix.be/" class="external-link">https://lucnix.be</a> / <a href="https://creativecommons.org/licenses/by-sa/3.0/deed.en" class="external-link">CC BY-SA
3.0</a>.</p>
<p>First, let’s create a new directory in the <code>Desktop</code>
folder for our work and then change the current working directory to the
newly created one:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> mkdir planets</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="ex">$</span> cd planets</span></code></pre>
</div>
<p>Then we tell Git to make <code>planets</code> a <a href="reference.html#repository">repository</a> -- a place where Git can
store versions of our files:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> git init</span></code></pre>
</div>
<p>It is important to note that <code>git init</code> will create a
repository that can include subdirectories and their files—there is no
need to create separate repositories nested within the
<code>planets</code> repository, whether subdirectories are present from
the beginning or added later. Also, note that the creation of the
<code>planets</code> directory and its initialization as a repository
are completely separate processes.</p>
<p>If we use <code>ls</code> to show the directory’s contents, it
appears that nothing has changed:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<p>But if we add the <code>-a</code> flag to show everything, we can see
that Git has created a hidden directory within <code>planets</code>
called <code>.git</code>:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-a</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.	..	.git</code></pre>
</div>
<p>Git uses this special subdirectory to store all the information about
the project, including the tracked files and sub-directories located
within the project’s directory. If we ever delete the <code>.git</code>
subdirectory, we will lose the project’s history.</p>
<p>Next, we will change the default branch to be called
<code>main</code>. This might be the default branch depending on your
settings and version of git. See the <a href="02-setup.html#default-git-branch-naming">setup episode</a> for
more information on this change.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> git checkout <span class="at">-b</span> main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Switched to a new branch 'main'</code></pre>
</div>
<p>We can now start using one of the most important git commands, which
is particularly helpful to beginners. <code>git status</code> tells us
the status of our project, and better, a list of changes in the project
and options on what to do with those changes. We can use it as often as
we want, whenever we want to understand what is going on.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main

No commits yet

nothing to commit (create/copy files and use "git add" to track)</code></pre>
</div>
<p>If you are using a different version of <code>git</code>, the exact
wording of the output might be slightly different.</p>
<div id="places-to-create-git-repositories" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="places-to-create-git-repositories" class="callout-inner">
<h3 class="callout-title">Places to Create Git Repositories<a class="anchor" aria-label="anchor" href="#places-to-create-git-repositories"></a>
</h3>
<div class="callout-content">
<p>Along with tracking information about planets (the project we have
already created), Dracula would also like to track information about
moons. Despite Wolfman’s concerns, Dracula creates a <code>moons</code>
project inside his <code>planets</code> project with the following
sequence of commands:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop   <span class="co"># return to Desktop directory</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="ex">$</span> cd planets     <span class="co"># go into planets directory, which is already a Git repository</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-a</span>          <span class="co"># ensure the .git subdirectory is still present in the planets directory</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="ex">$</span> mkdir moons    <span class="co"># make a subdirectory planets/moons</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="ex">$</span> cd moons       <span class="co"># go into moons subdirectory</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="ex">$</span> git init       <span class="co"># make the moons subdirectory a Git repository</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-a</span>          <span class="co"># ensure the .git subdirectory is present indicating we have created a new Git repository</span></span></code></pre>
</div>
<p>Is the <code>git init</code> command, run inside the
<code>moons</code> subdirectory, required for tracking files stored in
the <code>moons</code> subdirectory?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>No. Dracula does not need to make the <code>moons</code> subdirectory
a Git repository because the <code>planets</code> repository can track
any files, sub-directories, and subdirectory files under the
<code>planets</code> directory. Thus, in order to track all information
about moons, Dracula only needed to add the <code>moons</code>
subdirectory to the <code>planets</code> directory.</p>
<p>Additionally, Git repositories can interfere with each other if they
are “nested”: the outer repository will try to version-control the inner
repository. Therefore, it’s best to create each new Git repository in a
separate directory. To be sure that there is no conflicting repository
in the directory, check the output of <code>git status</code>. If it
looks like the following, you are good to go to create a new repository
as shown above:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>fatal: Not a git repository (or any of the parent directories): .git</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="correcting-git-init-mistakes" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="correcting-git-init-mistakes" class="callout-inner">
<h3 class="callout-title">Correcting <code>git init</code> Mistakes<a class="anchor" aria-label="anchor" href="#correcting-git-init-mistakes"></a>
</h3>
<div class="callout-content">
<p>Wolfman explains to Dracula how a nested repository is redundant and
may cause confusion down the road. Dracula would like to go back to a
single git repository. How can Dracula undo his last
<code>git init</code> in the <code>moons</code> subdirectory?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Solution – USE WITH CAUTION! </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="section level3">
<h3 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h3>
<p>Removing files from a Git repository needs to be done with caution.
But we have not learned yet how to tell Git to track a particular file;
we will learn this in the next episode. Files that are not tracked by
Git can easily be removed like any other “ordinary” files with</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> rm filename</span></code></pre>
</div>
<p>Similarly a directory can be removed using
<code>rm -r dirname</code>. If the files or folder being removed in this
fashion are tracked by Git, then their removal becomes another change
that we will need to track, as we will see in the next episode.</p>
</div>
<div class="section level3">
<h3 id="solution-1">Solution<a class="anchor" aria-label="anchor" href="#solution-1"></a>
</h3>
<p>Git keeps all of its files in the <code>.git</code> directory. To
recover from this little mistake, Dracula can remove the
<code>.git</code> folder in the moons subdirectory by running the
following command from inside the <code>planets</code> directory:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> rm <span class="at">-rf</span> moons/.git</span></code></pre>
</div>
<p>But be careful! Running this command in the wrong directory will
remove the entire Git history of a project you might want to keep. In
general, deleting files and directories using <code>rm</code> from the
command line cannot be reversed. Therefore, always check your current
directory using the command <code>pwd</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>
<code>git init</code> initializes a repository.</li>
<li>Git stores all of its repository data in the <code>.git</code>
directory.</li>
</ul>
</div>
</div>
</div></section><section id="aio-10-changes"><p>Content from <a href="10-changes.html">Tracking Changes</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/10-changes.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I record changes in Git?</li>
<li>How do I check the status of my version control repository?</li>
<li>How do I record notes about what changes I made and why?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Go through the modify-add-commit cycle for one or more files.</li>
<li>Explain where information is stored at each stage of that
cycle.</li>
<li>Distinguish between descriptive and non-descriptive commit
messages.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>First let’s make sure we’re still in the right directory. You should
be in the <code>planets</code> directory.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/planets</span></code></pre>
</div>
<p>Let’s create a file called <code>mars.txt</code> that contains some
notes about the Red Planet’s suitability as a base. We’ll use
<code>nano</code> to edit the file; you can use whatever editor you
like. In particular, this does not have to be the
<code>core.editor</code> you set globally earlier. But remember, the
bash command to create or edit a new file will depend on the editor you
choose (it might not be <code>nano</code>). For a refresher on text
editors, check out <a href="https://swcarpentry.github.io/shell-novice/03-create.html#which-editor" class="external-link">“Which
Editor?”</a> in <a href="https://swcarpentry.github.io/shell-novice/" class="external-link">The Unix Shell</a>
lesson.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> nano mars.txt</span></code></pre>
</div>
<p>Type the text below into the <code>mars.txt</code> file:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cold and dry, but everything is my favorite color</code></pre>
</div>
<p>Let’s first verify that the file was properly created by running the
list command (<code>ls</code>):</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">mars.txt</span></span></code></pre>
</div>
<p><code>mars.txt</code> contains a single line, which we can see by
running:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> cat mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cold and dry, but everything is my favorite color</code></pre>
</div>
<p>If we check the status of our project again, Git tells us that it’s
noticed the new file:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main

No commits yet

Untracked files:
   (use "git add &lt;file&gt;..." to include in what will be committed)

	mars.txt

nothing added to commit but untracked files present (use "git add" to track)</code></pre>
</div>
<p>The “untracked files” message means that there’s a file in the
directory that Git isn’t keeping track of. We can tell Git to track a
file using <code>git add</code>:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> git add mars.txt</span></code></pre>
</div>
<p>and then check that the right thing happened:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main

No commits yet

Changes to be committed:
  (use "git rm --cached &lt;file&gt;..." to unstage)

	new file:   mars.txt
</code></pre>
</div>
<p>Git now knows that it’s supposed to keep track of
<code>mars.txt</code>, but it hasn’t recorded these changes as a commit
yet. To get it to do that, we need to run one more command:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Start notes on Mars as a base"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main (root-commit) f22b25e] Start notes on Mars as a base
 1 file changed, 1 insertion(+)
 create mode 100644 mars.txt</code></pre>
</div>
<p>When we run <code>git commit</code>, Git takes everything we have
told it to save by using <code>git add</code> and stores a copy
permanently inside the special <code>.git</code> directory. This
permanent copy is called a <a href="reference.html#commit">commit</a>
(or <a href="reference.html#revision">revision</a>) and its short
identifier is <code>f22b25e</code>. Your commit may have another
identifier.</p>
<p>We use the <code>-m</code> flag (for “message”) to record a short,
descriptive, and specific comment that will help us remember later on
what we did and why. If we just run <code>git commit</code> without the
<code>-m</code> option, Git will launch <code>nano</code> (or whatever
other editor we configured as <code>core.editor</code>) so that we can
write a longer message.</p>
<p><a href="https://chris.beams.io/posts/git-commit/" class="external-link">Good commit
messages</a> start with a brief (&lt;50 characters) statement about the
changes made in the commit. Generally, the message should complete the
sentence “If applied, this commit will” <commit message here>. If you
want to go into more detail, add a blank line between the summary line
and your additional notes. Use this additional space to explain why you
made changes and/or what their impact will be.</commit></p>
<p>If we run <code>git status</code> now:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
nothing to commit, working tree clean</code></pre>
</div>
<p>it tells us everything is up to date. If we want to know what we’ve
done recently, we can ask Git to show us the project’s history using
<code>git log</code>:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> git log</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>commit f22b25e3233b4645dabd0d81e651fe074bd8e73b
Author: Vlad Dracula &lt;vlad@tran.sylvan.ia&gt;
Date:   Thu Aug 22 09:51:46 2013 -0400

    Start notes on Mars as a base</code></pre>
</div>
<p><code>git log</code> lists all commits made to a repository in
reverse chronological order. The listing for each commit includes the
commit’s full identifier (which starts with the same characters as the
short identifier printed by the <code>git commit</code> command
earlier), the commit’s author, when it was created, and the log message
Git was given when the commit was created.</p>
<div id="where-are-my-changes" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="where-are-my-changes" class="callout-inner">
<h3 class="callout-title">Where Are My Changes?<a class="anchor" aria-label="anchor" href="#where-are-my-changes"></a>
</h3>
<div class="callout-content">
<p>If we run <code>ls</code> at this point, we will still see just one
file called <code>mars.txt</code>. That’s because Git saves information
about files’ history in the special <code>.git</code> directory
mentioned earlier so that our filesystem doesn’t become cluttered (and
so that we can’t accidentally edit or delete an old version).</p>
</div>
</div>
</div>
<p>Now suppose Dracula adds more information to the file. (Again, we’ll
edit with <code>nano</code> and then <code>cat</code> the file to show
its contents; you may use a different editor, and don’t need to
<code>cat</code>.)</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> nano mars.txt</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="ex">$</span> cat mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman</code></pre>
</div>
<p>When we run <code>git status</code> now, it tells us that a file it
already knows about has been modified:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)

	modified:   mars.txt

no changes added to commit (use "git add" and/or "git commit -a")</code></pre>
</div>
<p>The last line is the key phrase: “no changes added to commit”. We
have changed this file, but we haven’t told Git we will want to save
those changes (which we do with <code>git add</code>) nor have we saved
them (which we do with <code>git commit</code>). So let’s do that now.
It is good practice to always review our changes before saving them. We
do this using <code>git diff</code>. This shows us the differences
between the current state of the file and the most recently saved
version:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> git diff</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>diff --git a/mars.txt b/mars.txt
index df0654a..315bf3a 100644
--- a/mars.txt
+++ b/mars.txt
@@ -1 +1,2 @@
 Cold and dry, but everything is my favorite color
+The two moons may be a problem for Wolfman</code></pre>
</div>
<p>The output is cryptic because it is actually a series of commands for
tools like editors and <code>patch</code> telling them how to
reconstruct one file given the other. If we break it down into
pieces:</p>
<ol style="list-style-type: decimal">
<li>The first line tells us that Git is producing output similar to the
Unix <code>diff</code> command comparing the old and new versions of the
file.</li>
<li>The second line tells exactly which versions of the file Git is
comparing; <code>df0654a</code> and <code>315bf3a</code> are unique
computer-generated labels for those versions.</li>
<li>The third and fourth lines once again show the name of the file
being changed.</li>
<li>The remaining lines are the most interesting, they show us the
actual differences and the lines on which they occur. In particular, the
<code>+</code> marker in the first column shows where we added a
line.</li>
</ol>
<p>After reviewing our change, it’s time to commit it:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add concerns about effects of Mars' moons on Wolfman"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)

	modified:   mars.txt

no changes added to commit (use "git add" and/or "git commit -a")</code></pre>
</div>
<p>Whoops: Git won’t commit because we didn’t use <code>git add</code>
first. Let’s fix that:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">$</span> git add mars.txt</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add concerns about effects of Mars' moons on Wolfman"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main 34961b1] Add concerns about effects of Mars' moons on Wolfman
 1 file changed, 1 insertion(+)</code></pre>
</div>
<p>Git insists that we add files to the set we want to commit before
actually committing anything. This allows us to commit our changes in
stages and capture changes in logical portions rather than only large
batches. For example, suppose we’re adding a few citations to relevant
research to our thesis. We might want to commit those additions, and the
corresponding bibliography entries, but <em>not</em> commit some of our
work drafting the conclusion (which we haven’t finished yet).</p>
<p>To allow for this, Git has a special <em>staging area</em> where it
keeps track of things that have been added to the current <a href="reference.html#changeset">changeset</a> but not yet committed.</p>
<div id="staging-area" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="staging-area" class="callout-inner">
<h3 class="callout-title">Staging Area<a class="anchor" aria-label="anchor" href="#staging-area"></a>
</h3>
<div class="callout-content">
<p>If you think of Git as taking snapshots of changes over the life of a
project, <code>git add</code> specifies <em>what</em> will go in a
snapshot (putting things in the staging area), and
<code>git commit</code> then <em>actually takes</em> the snapshot, and
makes a permanent record of it (as a commit). If you don’t have anything
staged when you type <code>git commit</code>, Git will prompt you to use
<code>git commit -a</code> or <code>git commit --all</code>, which is
kind of like gathering <em>everyone</em> to take a group photo! However,
it’s almost always better to explicitly add things to the staging area,
because you might commit changes you forgot you made. (Going back to the
group photo simile, you might get an extra with incomplete makeup
walking on the stage for the picture because you used <code>-a</code>!)
Try to stage things manually, or you might find yourself searching for
“git undo commit” more than you would like!</p>
</div>
</div>
</div>
<figure><img src="fig/git-staging-area.svg" alt='A diagram showing how "git add" registers changes in the staging area, while "git commit" moves changes from the staging area to the repository' class="figure mx-auto d-block"></figure><p>Let’s watch as our changes to a file move from our editor to the
staging area and into long-term storage. First, we’ll add another line
to the file:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">$</span> nano mars.txt</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="ex">$</span> cat mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="ex">$</span> git diff</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>diff --git a/mars.txt b/mars.txt
index 315bf3a..b36abfd 100644
--- a/mars.txt
+++ b/mars.txt
@@ -1,2 +1,3 @@
 Cold and dry, but everything is my favorite color
 The two moons may be a problem for Wolfman
+But the Mummy will appreciate the lack of humidity</code></pre>
</div>
<p>So far, so good: we’ve added one line to the end of the file (shown
with a <code>+</code> in the first column). Now let’s put that change in
the staging area and see what <code>git diff</code> reports:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">$</span> git add mars.txt</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="ex">$</span> git diff</span></code></pre>
</div>
<p>There is no output: as far as Git can tell, there’s no difference
between what it’s been asked to save permanently and what’s currently in
the directory. However, if we do this:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">$</span> git diff <span class="at">--staged</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>diff --git a/mars.txt b/mars.txt
index 315bf3a..b36abfd 100644
--- a/mars.txt
+++ b/mars.txt
@@ -1,2 +1,3 @@
 Cold and dry, but everything is my favorite color
 The two moons may be a problem for Wolfman
+But the Mummy will appreciate the lack of humidity</code></pre>
</div>
<p>it shows us the difference between the last committed change and
what’s in the staging area. Let’s save our changes:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Discuss concerns about Mars' climate for Mummy"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main 005937f] Discuss concerns about Mars' climate for Mummy
 1 file changed, 1 insertion(+)</code></pre>
</div>
<p>check our status:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
nothing to commit, working tree clean</code></pre>
</div>
<p>and look at the history of what we’ve done so far:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="ex">$</span> git log</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>commit 005937fbe2a98fb83f0ade869025dc2636b4dad5 (HEAD -&gt; main)
Author: Vlad Dracula &lt;vlad@tran.sylvan.ia&gt;
Date:   Thu Aug 22 10:14:07 2013 -0400

    Discuss concerns about Mars' climate for Mummy

commit 34961b159c27df3b475cfe4415d94a6d1fcd064d
Author: Vlad Dracula &lt;vlad@tran.sylvan.ia&gt;
Date:   Thu Aug 22 10:07:21 2013 -0400

    Add concerns about effects of Mars' moons on Wolfman

commit f22b25e3233b4645dabd0d81e651fe074bd8e73b
Author: Vlad Dracula &lt;vlad@tran.sylvan.ia&gt;
Date:   Thu Aug 22 09:51:46 2013 -0400

    Start notes on Mars as a base</code></pre>
</div>
<div id="word-based-diffing" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="word-based-diffing" class="callout-inner">
<h3 class="callout-title">Word-based diffing<a class="anchor" aria-label="anchor" href="#word-based-diffing"></a>
</h3>
<div class="callout-content">
<p>Sometimes, e.g. in the case of the text documents a line-wise diff is
too coarse. That is where the <code>--color-words</code> option of
<code>git diff</code> comes in very useful as it highlights the changed
words using colors.</p>
</div>
</div>
</div>
<div id="paging-the-log" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="paging-the-log" class="callout-inner">
<h3 class="callout-title">Paging the Log<a class="anchor" aria-label="anchor" href="#paging-the-log"></a>
</h3>
<div class="callout-content">
<p>When the output of <code>git log</code> is too long to fit in your
screen, <code>git</code> uses a program to split it into pages of the
size of your screen. When this “pager” is called, you will notice that
the last line in your screen is a <code>:</code>, instead of your usual
prompt.</p>
<ul>
<li>To get out of the pager, press <kbd>Q</kbd>.</li>
<li>To move to the next page, press <kbd>Spacebar</kbd>.</li>
<li>To search for <code>some_word</code> in all pages, press
<kbd>/</kbd> and type <code>some_word</code>. Navigate through matches
pressing <kbd>N</kbd>.</li>
</ul>
</div>
</div>
</div>
<div id="limit-log-size" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="limit-log-size" class="callout-inner">
<h3 class="callout-title">Limit Log Size<a class="anchor" aria-label="anchor" href="#limit-log-size"></a>
</h3>
<div class="callout-content">
<p>To avoid having <code>git log</code> cover your entire terminal
screen, you can limit the number of commits that Git lists by using
<code>-N</code>, where <code>N</code> is the number of commits that you
want to view. For example, if you only want information from the last
commit you can use:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">-1</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>commit 005937fbe2a98fb83f0ade869025dc2636b4dad5 (HEAD -&gt; main)
Author: Vlad Dracula &lt;vlad@tran.sylvan.ia&gt;
Date:   Thu Aug 22 10:14:07 2013 -0400

   Discuss concerns about Mars' climate for Mummy</code></pre>
</div>
<p>You can also reduce the quantity of information using the
<code>--oneline</code> option:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--oneline</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>005937f (HEAD -&gt; main) Discuss concerns about Mars' climate for Mummy
34961b1 Add concerns about effects of Mars' moons on Wolfman
f22b25e Start notes on Mars as a base</code></pre>
</div>
<p>You can also combine the <code>--oneline</code> option with others.
One useful combination adds <code>--graph</code> to display the commit
history as a text-based graph and to indicate which commits are
associated with the current <code>HEAD</code>, the current branch
<code>main</code>, or <a href="https://git-scm.com/book/en/v2/Git-Internals-Git-References" class="external-link">other
Git references</a>:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--oneline</span> <span class="at">--graph</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>* 005937f (HEAD -&gt; main) Discuss concerns about Mars' climate for Mummy
* 34961b1 Add concerns about effects of Mars' moons on Wolfman
* f22b25e Start notes on Mars as a base</code></pre>
</div>
</div>
</div>
</div>
<div id="directories" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="directories" class="callout-inner">
<h3 class="callout-title">Directories<a class="anchor" aria-label="anchor" href="#directories"></a>
</h3>
<div class="callout-content">
<p>Two important facts you should know about directories in Git.</p>
<ol style="list-style-type: decimal">
<li>Git does not track directories on their own, only files within them.
Try it for yourself:</li>
</ol>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="ex">$</span> mkdir spaceships</span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a><span class="ex">$</span> git status</span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a><span class="ex">$</span> git add spaceships</span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<p>Note, our newly created empty directory <code>spaceships</code> does
not appear in the list of untracked files even if we explicitly add it
(<em>via</em> <code>git add</code>) to our repository. This is the
reason why you will sometimes see <code>.gitkeep</code> files in
otherwise empty directories. Unlike <code>.gitignore</code>, these files
are not special and their sole purpose is to populate a directory so
that Git adds it to the repository. In fact, you can name such files
anything you like.</p>
<ol start="2" style="list-style-type: decimal">
<li>If you create a directory in your Git repository and populate it
with files, you can add all files in the directory at once by:</li>
</ol>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="fu">git</span> add <span class="op">&lt;</span>directory-with-files<span class="op">&gt;</span></span></code></pre>
</div>
<p>Try it for yourself:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="ex">$</span> touch spaceships/apollo-11 spaceships/sputnik-1</span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a><span class="ex">$</span> git status</span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a><span class="ex">$</span> git add spaceships</span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<p>Before moving on, we will commit these changes.</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add some initial thoughts on spaceships"</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>To recap, when we want to add changes to our repository, we first
need to add the changed files to the staging area (<code>git add</code>)
and then commit the staged changes to the repository
(<code>git commit</code>):</p>
<figure><img src="fig/git-committing.svg" alt="A diagram showing two documents being separately staged using git add, before being combined into one commit using git commit" class="figure mx-auto d-block"></figure><div id="choosing-a-commit-message" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="choosing-a-commit-message" class="callout-inner">
<h3 class="callout-title">Choosing a Commit Message<a class="anchor" aria-label="anchor" href="#choosing-a-commit-message"></a>
</h3>
<div class="callout-content">
<p>Which of the following commit messages would be most appropriate for
the last commit made to <code>mars.txt</code>?</p>
<ol style="list-style-type: decimal">
<li>“Changes”</li>
<li>“Added line ‘But the Mummy will appreciate the lack of humidity’ to
mars.txt”</li>
<li>“Discuss effects of Mars’ climate on the Mummy”</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Answer 1 is not descriptive enough, and the purpose of the commit is
unclear; and answer 2 is redundant to using “git diff” to see what
changed in this commit; but answer 3 is good: short, descriptive, and
imperative.</p>
</div>
</div>
</div>
</div>
<div id="committing-changes-to-git" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="committing-changes-to-git" class="callout-inner">
<h3 class="callout-title">Committing Changes to Git<a class="anchor" aria-label="anchor" href="#committing-changes-to-git"></a>
</h3>
<div class="callout-content">
<p>Which command(s) below would save the changes of
<code>myfile.txt</code> to my local Git repository?</p>
<ol style="list-style-type: decimal">
<li><div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a>   <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"my recent changes"</span></span></code></pre>
</div></li>
<li><div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a>   <span class="ex">$</span> git init myfile.txt</span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a>   <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"my recent changes"</span></span></code></pre>
</div></li>
<li><div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a>   <span class="ex">$</span> git add myfile.txt</span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a>   <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"my recent changes"</span></span></code></pre>
</div></li>
<li><div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a>   <span class="ex">$</span> git commit <span class="at">-m</span> myfile.txt <span class="st">"my recent changes"</span></span></code></pre>
</div></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Would only create a commit if files have already been staged.</li>
<li>Would try to create a new repository.</li>
<li>Is correct: first add the file to the staging area, then
commit.</li>
<li>Would try to commit a file “my recent changes” with the message
myfile.txt.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="committing-multiple-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="committing-multiple-files" class="callout-inner">
<h3 class="callout-title">Committing Multiple Files<a class="anchor" aria-label="anchor" href="#committing-multiple-files"></a>
</h3>
<div class="callout-content">
<p>The staging area can hold changes from any number of files that you
want to commit as a single snapshot.</p>
<ol style="list-style-type: decimal">
<li>Add some text to <code>mars.txt</code> noting your decision to
consider Venus as a base</li>
<li>Create a new file <code>venus.txt</code> with your initial thoughts
about Venus as a base for you and your friends</li>
<li>Add changes from both files to the staging area, and commit those
changes.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>The output below from <code>cat mars.txt</code> reflects only content
added during this exercise. Your output may vary.</p>
<p>First we make our changes to the <code>mars.txt</code> and
<code>venus.txt</code> files:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="ex">$</span> nano mars.txt</span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a><span class="ex">$</span> cat mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Maybe I should start with a base on Venus.</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="ex">$</span> nano venus.txt</span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a><span class="ex">$</span> cat venus.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Venus is a nice planet and I definitely should consider it as a base.</code></pre>
</div>
<p>Now you can add both files to the staging area. We can do that in one
line:</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a><span class="ex">$</span> git add mars.txt venus.txt</span></code></pre>
</div>
<p>Or with multiple commands:</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a><span class="ex">$</span> git add mars.txt</span>
<span id="cb61-2"><a href="#cb61-2" tabindex="-1"></a><span class="ex">$</span> git add venus.txt</span></code></pre>
</div>
<p>Now the files are ready to commit. You can check that using
<code>git status</code>. If you are ready to commit use:</p>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Write plans to start a base on Venus"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main cc127c2]
 Write plans to start a base on Venus
 2 files changed, 2 insertions(+)
 create mode 100644 venus.txt</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="bio-repository" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="bio-repository" class="callout-inner">
<h3 class="callout-title">
<code>bio</code> Repository<a class="anchor" aria-label="anchor" href="#bio-repository"></a>
</h3>
<div class="callout-content">
<ul>
<li>Create a new Git repository on your computer called
<code>bio</code>.</li>
<li>Write a three-line biography for yourself in a file called
<code>me.txt</code>, commit your changes</li>
<li>Modify one line, add a fourth line</li>
<li>Display the differences between its updated state and its original
state.</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>If needed, move out of the <code>planets</code> folder:</p>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a><span class="ex">$</span> cd ..</span></code></pre>
</div>
<p>Create a new folder called <code>bio</code> and ‘move’ into it:</p>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb65-1"><a href="#cb65-1" tabindex="-1"></a><span class="ex">$</span> mkdir bio</span>
<span id="cb65-2"><a href="#cb65-2" tabindex="-1"></a><span class="ex">$</span> cd bio</span></code></pre>
</div>
<p>Initialise git:</p>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a><span class="ex">$</span> git init</span></code></pre>
</div>
<p>Create your biography file <code>me.txt</code> using
<code>nano</code> or another text editor. Once in place, add and commit
it to the repository:</p>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a><span class="ex">$</span> git add me.txt</span>
<span id="cb67-2"><a href="#cb67-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add biography file"</span> </span></code></pre>
</div>
<p>Modify the file as described (modify one line, add a fourth line). To
display the differences between its updated state and its original
state, use <code>git diff</code>:</p>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a><span class="ex">$</span> git diff me.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>
<code>git status</code> shows the status of a repository.</li>
<li>Files can be stored in a project’s working directory (which users
see), the staging area (where the next commit is being built up) and the
local repository (where commits are permanently recorded).</li>
<li>
<code>git add</code> puts files in the staging area.</li>
<li>
<code>git commit</code> saves the staged content as a new commit in
the local repository.</li>
<li>Write a commit message that accurately describes your changes.</li>
</ul>
</div>
</div>
</div></section><section id="aio-11-history"><p>Content from <a href="11-history.html">Exploring History</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/11-history.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I identify old versions of files?</li>
<li>How do I review my changes?</li>
<li>How can I recover old versions of files?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what the HEAD of a repository is and how to use it.</li>
<li>Identify and use Git commit numbers.</li>
<li>Compare various versions of tracked files.</li>
<li>Restore old versions of files.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>As we saw in the previous episode, we can refer to commits by their
identifiers. You can refer to the <em>most recent commit</em> of the
working directory by using the identifier <code>HEAD</code>.</p>
<p>We’ve been adding one line at a time to <code>mars.txt</code>, so
it’s easy to track our progress by looking, so let’s do that using our
<code>HEAD</code>s. Before we start, let’s make a change to
<code>mars.txt</code>, adding yet another line.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> nano mars.txt</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> cat mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity
An ill-considered change</code></pre>
</div>
<p>Now, let’s see what we get.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> git diff HEAD mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>diff --git a/mars.txt b/mars.txt
index b36abfd..0848c8d 100644
--- a/mars.txt
+++ b/mars.txt
@@ -1,3 +1,4 @@
 Cold and dry, but everything is my favorite color
 The two moons may be a problem for Wolfman
 But the Mummy will appreciate the lack of humidity
+An ill-considered change.</code></pre>
</div>
<p>which is the same as what you would get if you leave out
<code>HEAD</code> (try it). The real goodness in all this is when you
can refer to previous commits. We do that by adding <code>~1</code>
(where “~” is “tilde”, pronounced [<strong>til</strong>-d<em>uh</em>])
to refer to the commit one before <code>HEAD</code>.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> git diff HEAD~1 mars.txt</span></code></pre>
</div>
<p>If we want to see the differences between older commits we can use
<code>git diff</code> again, but with the notation <code>HEAD~1</code>,
<code>HEAD~2</code>, and so on, to refer to them:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> git diff HEAD~2 mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>diff --git a/mars.txt b/mars.txt
index df0654a..b36abfd 100644
--- a/mars.txt
+++ b/mars.txt
@@ -1 +1,4 @@
 Cold and dry, but everything is my favorite color
+The two moons may be a problem for Wolfman
+But the Mummy will appreciate the lack of humidity
+An ill-considered change</code></pre>
</div>
<p>We could also use <code>git show</code> which shows us what changes
we made at an older commit as well as the commit message, rather than
the <em>differences</em> between a commit and our working directory that
we see by using <code>git diff</code>.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> git show HEAD~2 mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>commit f22b25e3233b4645dabd0d81e651fe074bd8e73b
Author: Vlad Dracula &lt;vlad@tran.sylvan.ia&gt;
Date:   Thu Aug 22 09:51:46 2013 -0400

    Start notes on Mars as a base

diff --git a/mars.txt b/mars.txt
new file mode 100644
index 0000000..df0654a
--- /dev/null
+++ b/mars.txt
@@ -0,0 +1 @@
+Cold and dry, but everything is my favorite color</code></pre>
</div>
<p>In this way, we can build up a chain of commits. The most recent end
of the chain is referred to as <code>HEAD</code>; we can refer to
previous commits using the <code>~</code> notation, so
<code>HEAD~1</code> means “the previous commit”, while
<code>HEAD~123</code> goes back 123 commits from where we are now.</p>
<p>We can also refer to commits using those long strings of digits and
letters that both <code>git log</code> and <code>git show</code>
display. These are unique IDs for the changes, and “unique” really does
mean unique: every change to any set of files on any computer has a
unique 40-character identifier. Our first commit was given the ID
<code>f22b25e3233b4645dabd0d81e651fe074bd8e73b</code>, so let’s try
this:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> git diff f22b25e3233b4645dabd0d81e651fe074bd8e73b mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>diff --git a/mars.txt b/mars.txt
index df0654a..93a3e13 100644
--- a/mars.txt
+++ b/mars.txt
@@ -1 +1,4 @@
 Cold and dry, but everything is my favorite color
+The two moons may be a problem for Wolfman
+But the Mummy will appreciate the lack of humidity
+An ill-considered change</code></pre>
</div>
<p>That’s the right answer, but typing out random 40-character strings
is annoying, so Git lets us use just the first few characters (typically
seven for normal size projects):</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> git diff f22b25e mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>diff --git a/mars.txt b/mars.txt
index df0654a..93a3e13 100644
--- a/mars.txt
+++ b/mars.txt
@@ -1 +1,4 @@
 Cold and dry, but everything is my favorite color
+The two moons may be a problem for Wolfman
+But the Mummy will appreciate the lack of humidity
+An ill-considered change</code></pre>
</div>
<p>All right! So we can save changes to files and see what we’ve
changed. Now, how can we restore older versions of things? Let’s suppose
we change our mind about the last update to <code>mars.txt</code> (the
“ill-considered change”).</p>
<p><code>git status</code> now tells us that the file has been changed,
but those changes haven’t been staged:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)

    modified:   mars.txt

no changes added to commit (use "git add" and/or "git commit -a")</code></pre>
</div>
<p>We can put things back the way they were by using
<code>git restore</code>:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> git restore mars.txt</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="ex">$</span> cat mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity</code></pre>
</div>
<p>As you might guess from its name, <code>git restore</code> restores
an old version of a file. By default, it recovers the version of the
file recorded in <code>HEAD</code>, which is the last saved commit. If
we want to go back even further, we can use a commit identifier instead,
using <code>-s</code> option:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> git restore <span class="at">-s</span> f22b25e mars.txt</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> cat mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cold and dry, but everything is my favorite color</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
        modified:   mars.txt

no changes added to commit (use "git add" and/or "git commit -a")
</code></pre>
</div>
<p>Notice that the changes are currently in the staging area. Again, we
can put things back the way they were by using
<code>git restore</code>:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> git restore mars.txt</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="ex">$</span> cat mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity</code></pre>
</div>
<p>It’s important to remember that we must use the commit number that
identifies the state of the repository <em>before</em> the change we’re
trying to undo. A common mistake is to use the number of the commit in
which we made the change we’re trying to discard. In the example below,
we want to retrieve the state from before the most recent commit
(<code>HEAD~1</code>), which is commit <code>f22b25e</code>. We use the
<code>.</code> to mean all files:</p>
<figure><img src="fig/git-restore.svg" alt="A diagram showing how git restore can be used to restore the previous version of two files" class="figure mx-auto d-block"></figure><p>So, to put it all together, here’s how Git works in cartoon form:</p>
<figure><img src="fig/git_staging.svg" alt="A diagram showing the entire git workflow: local changes are staged using git add, applied to the local repository using git commit, and can be restored from the repository using git checkout" class="figure mx-auto d-block"><div class="figcaption"><a href="https://figshare.com/articles/How_Git_works_a_cartoon/1328266" class="external-link uri">https://figshare.com/articles/How_Git_works_a_cartoon/1328266</a></div>
</figure><p>The fact that files can be reverted one by one tends to change the
way people organize their work. If everything is in one large document,
it’s hard (but not impossible) to undo changes to the introduction
without also undoing changes made later to the conclusion. If the
introduction and conclusion are stored in separate files, on the other
hand, moving backward and forward in time becomes much easier.</p>
<div id="recovering-older-versions-of-a-file" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="recovering-older-versions-of-a-file" class="callout-inner">
<h3 class="callout-title">Recovering Older Versions of a File<a class="anchor" aria-label="anchor" href="#recovering-older-versions-of-a-file"></a>
</h3>
<div class="callout-content">
<p>Jennifer has made changes to the Python script that she has been
working on for weeks, and the modifications she made this morning
“broke” the script and it no longer runs. She has spent ~ 1hr trying to
fix it, with no luck…</p>
<p>Luckily, she has been keeping track of her project’s versions using
Git! Which commands below will let her recover the last committed
version of her Python script called <code>data_cruncher.py</code>?</p>
<ol style="list-style-type: decimal">
<li><p><code>$ git restore</code></p></li>
<li><p><code>$ git restore data_cruncher.py</code></p></li>
<li><p><code>$ git restore -s HEAD~1 data_cruncher.py</code></p></li>
<li><p><code>$ git restore -s &lt;unique ID of last commit&gt; data_cruncher.py</code></p></li>
<li><p>Both 2 and 4</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The answer is (5)-Both 2 and 4.</p>
<p>The <code>restore</code> command restores files from the repository,
overwriting the files in your working directory. Answers 2 and 4 both
restore the <em>latest</em> version <em>in the repository</em> of the
file <code>data_cruncher.py</code>. Answer 2 uses <code>HEAD</code> to
indicate the <em>latest</em>, whereas answer 4 uses the unique ID of the
last commit, which is what <code>HEAD</code> means.</p>
<p>Answer 3 gets the version of <code>data_cruncher.py</code> from the
commit <em>before</em> <code>HEAD</code>, which is NOT what we
wanted.</p>
<p>Answer 1 results in an error. You need to specify a file to restore.
If you want to restore all files you should use
<code>git restore .</code></p>
</div>
</div>
</div>
</div>
<div id="reverting-a-commit" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="reverting-a-commit" class="callout-inner">
<h3 class="callout-title">Reverting a Commit<a class="anchor" aria-label="anchor" href="#reverting-a-commit"></a>
</h3>
<div class="callout-content">
<p>Jennifer is collaborating with colleagues on her Python script. She
realizes her last commit to the project’s repository contained an error,
and wants to undo it. Jennifer wants to undo correctly so everyone in
the project’s repository gets the correct change. The command
<code>git revert [erroneous commit ID]</code> will create a new commit
that reverses the erroneous commit.</p>
<p>The command <code>git revert</code> is different from
<code>git restore -s [commit ID] .</code> because
<code>git restore</code> returns the files not yet committed within the
local repository to a previous state, whereas <code>git revert</code>
reverses changes committed to the local and project repositories.</p>
<p>Below are the right steps and explanations for Jennifer to use
<code>git revert</code>, what is the missing command?</p>
<ol style="list-style-type: decimal">
<li><p><code>________ # Look at the git history of the project to find the commit ID</code></p></li>
<li><p>Copy the ID (the first few characters of the ID,
e.g. 0b1d055).</p></li>
<li><p><code>git revert [commit ID]</code></p></li>
<li><p>Type in the new commit message.</p></li>
<li><p>Save and close</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>The command <code>git log</code> lists project history with commit
IDs.</p>
<p>The command <code>git show HEAD</code> shows changes made at the
latest commit, and lists the commit ID; however, Jennifer should
double-check it is the correct commit, and no one else has committed
changes to the repository.</p>
</div>
</div>
</div>
</div>
<div id="understanding-workflow-and-history" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="understanding-workflow-and-history" class="callout-inner">
<h3 class="callout-title">Understanding Workflow and History<a class="anchor" aria-label="anchor" href="#understanding-workflow-and-history"></a>
</h3>
<div class="callout-content">
<p>What is the output of the last command in</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> cd planets</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="ex">$</span> echo <span class="st">"Venus is beautiful and full of love"</span> <span class="op">&gt;</span> venus.txt</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="ex">$</span> git add venus.txt</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="ex">$</span> echo <span class="st">"Venus is too hot to be suitable as a base"</span> <span class="op">&gt;&gt;</span> venus.txt</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Comment on Venus as an unsuitable base"</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="ex">$</span> git restore venus.txt</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="ex">$</span> cat venus.txt <span class="co">#this will print the contents of venus.txt to the screen</span></span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li><div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Venus is too hot to be suitable as a base</code></pre>
</div></li>
<li><div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Venus is beautiful and full of love</code></pre>
</div></li>
<li><div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Venus is beautiful and full of love
  Venus is too hot to be suitable as a base</code></pre>
</div></li>
<li><div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Error because you have changed venus.txt without committing the changes</code></pre>
</div></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>The answer is 2.</p>
<p>The command <code>git add venus.txt</code> places the current version
of <code>venus.txt</code> into the staging area. The changes to the file
from the second <code>echo</code> command are only applied to the
working copy, not the version in the staging area.</p>
<p>So, when
<code>git commit -m "Comment on Venus as an unsuitable base"</code> is
executed, the version of <code>venus.txt</code> committed to the
repository is the one from the staging area and has only one line.</p>
<p>At this time, the working copy still has the second line (and
<code>git status</code> will show that the file is modified). However,
<code>git restore venus.txt</code> replaces the working copy with the
most recently committed version of <code>venus.txt</code>.</p>
<p>So, <code>cat venus.txt</code> will output</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Venus is beautiful and full of love.</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="checking-understanding-of-git-diff" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="checking-understanding-of-git-diff" class="callout-inner">
<h3 class="callout-title">Checking Understanding of
<code>git diff</code><a class="anchor" aria-label="anchor" href="#checking-understanding-of-git-diff"></a>
</h3>
<div class="callout-content">
<p>Consider this command: <code>git diff HEAD~9 mars.txt</code>. What do
you predict this command will do if you execute it? What happens when
you do execute it? Why?</p>
<p>Try another command, <code>git diff [ID] mars.txt</code>, where [ID]
is replaced with the unique identifier for your most recent commit. What
do you think will happen, and what does happen?</p>
</div>
</div>
</div>
<div id="getting-rid-of-staged-changes" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="getting-rid-of-staged-changes" class="callout-inner">
<h3 class="callout-title">Getting Rid of Staged Changes<a class="anchor" aria-label="anchor" href="#getting-rid-of-staged-changes"></a>
</h3>
<div class="callout-content">
<p><code>git restore</code> can be used to restore a previous commit
when unstaged changes have been made, but will it also work for changes
that have been staged but not committed? Make a change to
<code>mars.txt</code>, add that change using <code>git add</code>, then
use <code>git restore</code> to see if you can remove your change.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>After adding a change, <code>git restore</code> can not be used
directly. Let’s look at the output of <code>git status</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
        modified:   mars.txt
</code></pre>
</div>
<p>Note that if you don’t have the same output you may either have
forgotten to change the file, or you have added it <em>and</em>
committed it.</p>
<p>Using the command <code>git restore mars.txt</code> now does not give
an error, but it does not restore the file either. Git helpfully tells
us that we need to use <code>git restore --staged</code> first to
unstage the file:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="ex">$</span> git restore <span class="at">--staged</span> mars.txt</span></code></pre>
</div>
<p>Now, <code>git status</code> gives us:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git git restore &lt;file&gt;..." to discard changes in working directory)

        modified:   mars.txt

no changes added to commit (use "git add" and/or "git commit -a")</code></pre>
</div>
<p>This means we can now use <code>git restore</code> to restore the
file to the previous commit:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="ex">$</span> git restore mars.txt</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
nothing to commit, working tree clean</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="explore-and-summarize-histories" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="explore-and-summarize-histories" class="callout-inner">
<h3 class="callout-title">Explore and Summarize Histories<a class="anchor" aria-label="anchor" href="#explore-and-summarize-histories"></a>
</h3>
<div class="callout-content">
<p>Exploring history is an important part of Git, and often it is a
challenge to find the right commit ID, especially if the commit is from
several months ago.</p>
<p>Imagine the <code>planets</code> project has more than 50 files. You
would like to find a commit that modifies some specific text in
<code>mars.txt</code>. When you type <code>git log</code>, a very long
list appeared. How can you narrow down the search?</p>
<p>Recall that the <code>git diff</code> command allows us to explore
one specific file, e.g., <code>git diff mars.txt</code>. We can apply a
similar idea here.</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="ex">$</span> git log mars.txt</span></code></pre>
</div>
<p>Unfortunately some of these commit messages are very ambiguous, e.g.,
<code>update files</code>. How can you search through these files?</p>
<p>Both <code>git diff</code> and <code>git log</code> are very useful
and they summarize a different part of the history for you. Is it
possible to combine both? Let’s try the following:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--patch</span> mars.txt</span></code></pre>
</div>
<p>You should get a long list of output, and you should be able to see
both commit messages and the difference between each commit.</p>
<p>Question: What does the following command do?</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--patch</span> HEAD~9 <span class="pp">*</span>.txt</span></code></pre>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>
<code>git diff</code> displays differences between commits.</li>
<li>
<code>git restore</code> recovers old versions of files.</li>
</ul>
</div>
</div>
</div></section><section id="aio-12-ignore"><p>Content from <a href="12-ignore.html">Ignoring Things</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/12-ignore.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I tell Git to ignore files I don’t want to track?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Configure Git to ignore specific files.</li>
<li>Explain why ignoring files can be useful.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>What if we have files that we do not want Git to track for us, like
backup files created by our editor or intermediate files created during
data analysis? Let’s create a few dummy files:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> mkdir results</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> touch a.csv b.csv c.csv results/a.out results/b.out</span></code></pre>
</div>
<p>and see what Git says:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)

	a.csv
	b.csv
	c.csv
	results/

nothing added to commit but untracked files present (use "git add" to track)</code></pre>
</div>
<p>Putting these files under version control would be a waste of disk
space. What’s worse, having them all listed could distract us from
changes that actually matter, so let’s tell Git to ignore them.</p>
<p>We do this by creating a file in the root directory of our project
called <code>.gitignore</code>:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> nano .gitignore</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="ex">$</span> cat .gitignore</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>*.csv
results/</code></pre>
</div>
<p>These patterns tell Git to ignore any file whose name ends in
<code>.csv</code> and everything in the <code>results</code> directory.
(If any of these files were already being tracked, Git would continue to
track them.)</p>
<p>Once we have created this file, the output of <code>git status</code>
is much cleaner:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)

	.gitignore

nothing added to commit but untracked files present (use "git add" to track)</code></pre>
</div>
<p>The only thing Git notices now is the newly-created
<code>.gitignore</code> file. You might think we wouldn’t want to track
it, but everyone we’re sharing our repository with will probably want to
ignore the same things that we’re ignoring. Let’s add and commit
<code>.gitignore</code>:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> git add .gitignore</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Ignore data files and the results folder"</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
nothing to commit, working tree clean</code></pre>
</div>
<p>As a bonus, using <code>.gitignore</code> helps us avoid accidentally
adding files to the repository that we don’t want to track:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> git add a.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The following paths are ignored by one of your .gitignore files:
a.csv
Use -f if you really want to add them.</code></pre>
</div>
<p>If we really want to override our ignore settings, we can use
<code>git add -f</code> to force Git to add something. For example,
<code>git add -f a.csv</code>. We can also always see the status of
ignored files if we want:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> git status <span class="at">--ignored</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Ignored files:
 (use "git add -f &lt;file&gt;..." to include in what will be committed)

        a.csv
        b.csv
        c.csv
        results/

nothing to commit, working tree clean</code></pre>
</div>
<div id="ignoring-nested-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="ignoring-nested-files" class="callout-inner">
<h3 class="callout-title">Ignoring Nested Files<a class="anchor" aria-label="anchor" href="#ignoring-nested-files"></a>
</h3>
<div class="callout-content">
<p>Given a directory structure that looks like:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">results/data</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="ex">results/plots</span></span></code></pre>
</div>
<p>How would you ignore only <code>results/plots</code> and not
<code>results/data</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>If you only want to ignore the contents of
<code>results/plots</code>, you can change your <code>.gitignore</code>
to ignore only the <code>/plots/</code> subfolder by adding the
following line to your .gitignore:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>results/plots/</code></pre>
</div>
<p>This line will ensure only the contents of <code>results/plots</code>
is ignored, and not the contents of <code>results/data</code>.</p>
<p>As with most programming issues, there are a few alternative ways
that one may ensure this ignore rule is followed. The “Ignoring Nested
Files: Variation” exercise has a slightly different directory structure
that presents an alternative solution. Further, the discussion page has
more detail on ignore rules.</p>
</div>
</div>
</div>
</div>
<div id="including-specific-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="including-specific-files" class="callout-inner">
<h3 class="callout-title">Including Specific Files<a class="anchor" aria-label="anchor" href="#including-specific-files"></a>
</h3>
<div class="callout-content">
<p>How would you ignore all <code>.csv</code> files in your root
directory except for <code>final.csv</code>? Hint: Find out what
<code>!</code> (the exclamation point operator) does</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>You would add the following two lines to your .gitignore:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>*.csv           # ignore all data files
!final.csv      # except final.csv</code></pre>
</div>
<p>The exclamation point operator will include a previously excluded
entry.</p>
<p>Note also that because you’ve previously committed <code>.csv</code>
files in this lesson they will not be ignored with this new rule. Only
future additions of <code>.csv</code> files added to the root directory
will be ignored.</p>
</div>
</div>
</div>
</div>
<div id="ignoring-nested-files-variation" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="ignoring-nested-files-variation" class="callout-inner">
<h3 class="callout-title">Ignoring Nested Files: Variation<a class="anchor" aria-label="anchor" href="#ignoring-nested-files-variation"></a>
</h3>
<div class="callout-content">
<p>Given a directory structure that looks similar to the earlier Nested
Files exercise, but with a slightly different directory structure:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">results/data</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="ex">results/images</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="ex">results/plots</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="ex">results/analysis</span></span></code></pre>
</div>
<p>How would you ignore all of the contents in the results folder, but
not <code>results/data</code>?</p>
<p>Hint: think a bit about how you created an exception with the
<code>!</code> operator before.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>If you want to ignore the contents of <code>results/</code> but not
those of <code>results/data/</code>, you can change your
<code>.gitignore</code> to ignore the contents of results folder, but
create an exception for the contents of the <code>results/data</code>
subfolder. Your .gitignore would look like this:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>results/*               # ignore everything in results folder
!results/data/          # do not ignore results/data/ contents</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="ignoring-all-data-files-in-a-directory" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="ignoring-all-data-files-in-a-directory" class="callout-inner">
<h3 class="callout-title">Ignoring all data Files in a Directory<a class="anchor" aria-label="anchor" href="#ignoring-all-data-files-in-a-directory"></a>
</h3>
<div class="callout-content">
<p>Assuming you have an empty .gitignore file, and given a directory
structure that looks like:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">results/data/position/gps/a.csv</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="ex">results/data/position/gps/b.csv</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="ex">results/data/position/gps/c.csv</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="ex">results/data/position/gps/info.txt</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="ex">results/plots</span></span></code></pre>
</div>
<p>What’s the shortest <code>.gitignore</code> rule you could write to
ignore all <code>.csv</code> files in
<code>result/data/position/gps</code>? Do not ignore the
<code>info.txt</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>Appending <code>results/data/position/gps/*.csv</code> will match
every file in <code>results/data/position/gps</code> that ends with
<code>.csv</code>. The file
<code>results/data/position/gps/info.txt</code> will not be ignored.</p>
</div>
</div>
</div>
</div>
<div id="ignoring-all-data-files-in-the-repository" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="ignoring-all-data-files-in-the-repository" class="callout-inner">
<h3 class="callout-title">Ignoring all data Files in the repository<a class="anchor" aria-label="anchor" href="#ignoring-all-data-files-in-the-repository"></a>
</h3>
<div class="callout-content">
<p>Let us assume you have many <code>.csv</code> files in different
subdirectories of your repository. For example, you might have:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">results/a.csv</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="ex">data/experiment_1/b.csv</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="ex">data/experiment_2/c.csv</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="ex">data/experiment_2/variation_1/d.csv</span></span></code></pre>
</div>
<p>How do you ignore all the <code>.csv</code> files, without explicitly
listing the names of the corresponding folders?</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<p>In the <code>.gitignore</code> file, write:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>**/*.csv</code></pre>
</div>
<p>This will ignore all the <code>.csv</code> files, regardless of their
position in the directory tree. You can still include some specific
exception with the exclamation point operator.</p>
</div>
</div>
</div>
</div>
<div id="the-order-of-rules" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="the-order-of-rules" class="callout-inner">
<h3 class="callout-title">The Order of Rules<a class="anchor" aria-label="anchor" href="#the-order-of-rules"></a>
</h3>
<div class="callout-content">
<p>Given a <code>.gitignore</code> file with the following contents:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">*.csv</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="ex">!*.csv</span></span></code></pre>
</div>
<p>What will be the result?</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<p>The <code>!</code> modifier will negate an entry from a previously
defined ignore pattern. Because the <code>!*.csv</code> entry negates
all of the previous <code>.csv</code> files in the
<code>.gitignore</code>, none of them will be ignored, and all
<code>.csv</code> files will be tracked.</p>
</div>
</div>
</div>
</div>
<div id="log-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="log-files" class="callout-inner">
<h3 class="callout-title">Log Files<a class="anchor" aria-label="anchor" href="#log-files"></a>
</h3>
<div class="callout-content">
<p>You wrote a script that creates many intermediate log-files of the
form <code>log_01</code>, <code>log_02</code>, <code>log_03</code>, etc.
You want to keep them but you do not want to track them through
<code>git</code>.</p>
<ol style="list-style-type: decimal">
<li><p>Write <strong>one</strong> <code>.gitignore</code> entry that
excludes files of the form <code>log_01</code>, <code>log_02</code>,
etc.</p></li>
<li><p>Test your “ignore pattern” by creating some dummy files of the
form <code>log_01</code>, etc.</p></li>
<li><p>You find that the file <code>log_01</code> is very important
after all, add it to the tracked files without changing the
<code>.gitignore</code> again.</p></li>
<li><p>Discuss with your neighbor what other types of files could reside
in your directory that you do not want to track and thus would exclude
via <code>.gitignore</code>.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Show me the solution </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>append either <code>log_*</code> or <code>log*</code> as a new entry
in your .gitignore</li>
<li>track <code>log_01</code> using <code>git add -f log_01</code>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>The <code>.gitignore</code> file tells Git what files to
ignore.</li>
</ul>
</div>
</div>
</div></section><section id="aio-13-supplemental-rstudio"><p>Content from <a href="13-supplemental-rstudio.html">Supplemental: Using Git from RStudio</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/13-supplemental-rstudio.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I use Git with RStudio?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand how to use Git from RStudio.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Version control can be very useful when developing data analysis
scripts. For that reason, the popular development environment <a href="https://www.rstudio.com/" class="external-link">RStudio</a> for the R programming
language has built-in integration with Git. While some advanced Git
features still require the command-line, RStudio has a nice interface
for many common Git operations.</p>
<p>RStudio allows us to create a <a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects" class="external-link">project</a>
associated with a given directory to keep track of various related
files. To be able to track the development of the project over time, to
be able to revert to previous versions, and to collaborate with others,
we version control the Rstudio project with Git. To get started using
Git in RStudio, we create a new project:</p>
<figure><img src="fig/RStudio_screenshot_newproject.png" alt='RStudio screenshot showing the file menu dropdown with "New Project..." selected' class="figure mx-auto d-block"></figure><p>This opens a dialog asking us how we want to create the project. We
have some options here. Let’s say that we want to use RStudio with the
planets repository that we already made. Since that repository lives in
a directory on our computer, we choose the option “Existing
Directory”:</p>
<figure><img src="fig/RStudio_screenshot_existingdirectory.png" alt='RStudio screenshot showing New Project dialog window with "Create project from existing directory" selected' class="figure mx-auto d-block"></figure><div id="do-you-see-a-version-control-option" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="do-you-see-a-version-control-option" class="callout-inner">
<h3 class="callout-title">Do You See a “Version Control” Option?<a class="anchor" aria-label="anchor" href="#do-you-see-a-version-control-option"></a>
</h3>
<div class="callout-content">
<p>Although we’re not going to use it here, there should be a “version
control” option on this menu. That is what you would click on if you
wanted to create a project on your computer by cloning a repository from
GitHub. If that option is not present, it probably means that RStudio
doesn’t know where your Git executable is, and you won’t be able to
progress further in this lesson until you tell RStudio where it is.</p>
<div class="section level3">
<h3 id="find-your-git-executable">Find your Git Executable<a class="anchor" aria-label="anchor" href="#find-your-git-executable"></a>
</h3>
<p>First let’s make sure that Git is installed on your computer. Open
your shell on Mac or Linux, or on Windows open the command prompt and
then type:</p>
<ul>
<li>
<code>which git</code> (macOS, Linux)</li>
<li>
<code>where git</code> (Windows)</li>
</ul>
<p>If there is no version of Git on your computer, please follow the <a href="https://swcarpentry.github.io/git-novice/#installing-git" class="external-link">Git
installation instructions</a> in the setup of this lesson to install Git
now. Next open your shell or command prompt and type
<code>which git</code> (macOS, Linux), or <code>where git</code>
(Windows). Copy the path to the git executable.</p>
<p>On one Windows computer which had GitHub Desktop installed on it, the
path was:
<code>C:/Users/UserName/AppData/Local/GitHubDesktop/app-1.1.1/resources/app/git/cmd/git.exe</code></p>
<p>NOTE: The path on your computer will be somewhat different.</p>
</div>
<div class="section level3">
<h3 id="tell-rstudio-where-to-find-github">Tell RStudio where to find GitHub<a class="anchor" aria-label="anchor" href="#tell-rstudio-where-to-find-github"></a>
</h3>
<p>In RStudio, go to the <code>Tools</code> menu &gt;
<code>Global Options</code> &gt; <code>Git/SVN</code> and then browse to
the Git executable you found in the command prompt or shell. Now restart
RStudio. Note: Even if you have Git installed, you may need to accept
the Xcode license if you are using macOS.</p>
</div>
</div>
</div>
</div>
<p>Next, RStudio will ask which existing directory we want to use. Click
“Browse…” and navigate to the correct directory, then click “Create
Project”:</p>
<figure><img src="fig/RStudio_screenshot_navigateexisting.png" alt='RStudio window showing the "Create Project From Existing Directory" dialog. In the dialog, the project working directory has been set to "~/Desktop/planets"' class="figure mx-auto d-block"></figure><p>Ta-da! We have created a new project in RStudio within the existing
planets repository. Notice the vertical “Git” menu in the menu bar.
RStudio has recognized that the current directory is a Git repository,
and gives us a number of tools to use Git:</p>
<figure><img src="fig/RStudio_screenshot_afterclone.png" alt="RStudio window after new project is created with large arrow pointing to vertical Git menu bar." class="figure mx-auto d-block"></figure><p>To edit the existing files in the repository, we can click on them in
the “Files” panel on the lower right. Now let’s add some additional
information about Pluto:</p>
<figure><img src="fig/RStudio_screenshot_editfiles.png" alt='RStudio window demonstrating the use of the editor panel to modify the "pluto.txt" file' class="figure mx-auto d-block"></figure><p>Once we have saved our edited files, we can use RStudio to commit the
changes by clicking on “Commit…” in the Git menu:</p>
<figure><img src="fig/RStudio_screenshot_commit.png" alt='RStudio screenshot showing the Git menu dropdown with the "Commit..." option selected' class="figure mx-auto d-block"></figure><p>This will open a dialogue where we can select which files to commit
(by checking the appropriate boxes in the “Staged” column), and enter a
commit message (in the upper right panel). The icons in the “Status”
column indicate the current status of each file. Clicking on a file
shows information about changes in the lower panel (using output of
<code>git diff</code>). Once everything is the way we want it, we click
“Commit”:</p>
<figure><img src="fig/RStudio_screenshot_review.png" alt='RStudio screenshow showing the "Review Changes" dialog. The top left panel shows the list of files that can be included or excluded from the commit. The top right panel is for writing a commit message. The bottom panel shows information about the currently selected file in the top left panel.' class="figure mx-auto d-block"></figure><p>The changes can be pushed by selecting “Push Branch” from the Git
menu. There are also options to pull from the remote repository, and to
view the commit history:</p>
<figure><img src="fig/RStudio_screenshot_history.png" alt='RStudio screenshot showing the git menu dropdown with the "History" option selected' class="figure mx-auto d-block"></figure><div id="are-the-pushpull-commands-grayed-out" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="are-the-pushpull-commands-grayed-out" class="callout-inner">
<h3 class="callout-title">Are the Push/Pull Commands Grayed Out?<a class="anchor" aria-label="anchor" href="#are-the-pushpull-commands-grayed-out"></a>
</h3>
<div class="callout-content">
<p>Grayed out Push/Pull commands generally mean that RStudio doesn’t
know the location of your remote repository (e.g. on GitHub). To fix
this, open a terminal to the repository and enter the command:
<code>git push -u origin main</code>. Then restart RStudio.</p>
</div>
</div>
</div>
<p>If we click on “History”, we can see a graphical version of what
<code>git log</code> would tell us:</p>
<figure><img src="fig/RStudio_screenshot_viewhistory.png" alt='RStudio screenshot showing the "Review Changes" dialog after pressing the "History" button. The top panel lists the commits in the repository, similar to git log. The bottom panel shows the changes included in the commit that has been selected in the top panel.' class="figure mx-auto d-block"></figure><p>RStudio creates a number of files that it uses to keep track of a
project. We often don’t want to track these, in which case we add them
to our <code>.gitignore</code> file:</p>
<figure><img src="fig/RStudio_screenshot_gitignore.png" alt="RStudio screenshot showing .gitignore open in the editor pane with the files .Rproj.user, .Rhistory, .RData, and *.Rproj added to the end" class="figure mx-auto d-block"></figure><div id="tip-versioning-disposable-output" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-versioning-disposable-output" class="callout-inner">
<h3 class="callout-title">Tip: versioning disposable output<a class="anchor" aria-label="anchor" href="#tip-versioning-disposable-output"></a>
</h3>
<div class="callout-content">
<p>Generally you do not want to version control disposable output (or
read-only data). You should modify the <code>.gitignore</code> file to
tell Git to ignore these files and directories.</p>
</div>
</div>
</div>
<div id="challenge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge" class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Create a new directory within your project called
<code>graphs</code>.</li>
<li>Modify the <code>.gitignore</code> so that the <code>graphs</code>
directory is not version controlled.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to Challenge
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>This can be done in Rstudio:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dir.create</span><span class="op">(</span><span class="st">"./graphs"</span><span class="op">)</span></span></code></pre>
</div>
<p>Then open up the <code>.gitignore</code> file from the right-hand
panel of Rstudio and add <code>graphs/</code> to the list of files to
ignore.</p>
</div>
</div>
</div>
</div>
<p>There are many more features in the RStudio Git menu, but these
should be enough to get you started!</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Using RStudio’s Git integration allows you to version control a
project over time.</li>
</ul>
</div>
</div>
</div></section><section id="aio-14-data-subsetting"><p>Content from <a href="14-data-subsetting.html">Subsetting Data</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/14-data-subsetting.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I work with subsets of data in R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>To be able to subset vectors, factors, matrices, lists, and data
frames</li>
<li>To be able to extract individual and multiple elements: by index, by
name, using comparison operations</li>
<li>To be able to skip and remove elements from various data
structures.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>R has many powerful subset operators. Mastering them will allow you
to easily perform complex operations on any kind of dataset.</p>
<p>There are six different ways we can subset any kind of object, and
three different subsetting operators for the different data
structures.</p>
<p>Let’s start with the workhorse of R: a simple numeric vector.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">5.4</span>, <span class="fl">6.2</span>, <span class="fl">7.1</span>, <span class="fl">4.8</span>, <span class="fl">7.5</span><span class="op">)</span></span>
<span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>, <span class="st">'e'</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   b   c   d   e
5.4 6.2 7.1 4.8 7.5 </code></pre>
</div>
<div id="atomic-vectors" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="atomic-vectors" class="callout-inner">
<h3 class="callout-title">Atomic vectors<a class="anchor" aria-label="anchor" href="#atomic-vectors"></a>
</h3>
<div class="callout-content">
<p>In R, simple vectors containing character strings, numbers, or
logical values are called <em>atomic</em> vectors because they can’t be
further simplified.</p>
</div>
</div>
</div>
<p>So now that we’ve created a dummy vector to play with, how do we get
at its contents?</p>
<section><h2 class="section-heading" id="accessing-elements-using-their-indices">Accessing elements using their indices<a class="anchor" aria-label="anchor" href="#accessing-elements-using-their-indices"></a>
<a class="anchor" aria-label="anchor" href="#accessing-elements-using-their-indices"></a>
</h2>
<hr class="half-width">
<p>To extract elements of a vector we can give their corresponding
index, starting from one:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span>  <span class="va">a</span></span>
<span><span class="fl">5.4</span> </span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span>  <span class="va">d</span></span>
<span><span class="fl">4.8</span> </span></code></pre>
</div>
<p>It may look different, but the square brackets operator is a
function. For vectors (and matrices), it means “get me the nth
element”.</p>
<p>We can ask for multiple elements at once:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   c
5.4 7.1 </code></pre>
</div>
<p>Or slices of the vector:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   b   c   d
5.4 6.2 7.1 4.8 </code></pre>
</div>
<p>the <code>:</code> operator creates a sequence of numbers from the
left element to the right.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3 4</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3 4</code></pre>
</div>
<p>We can ask for the same element multiple times:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   a   c
5.4 5.4 7.1 </code></pre>
</div>
<p>If we ask for an index beyond the length of the vector, R will return
a missing value:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">6</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;NA&gt;
  NA </code></pre>
</div>
<p>This is a vector of length one containing an <code>NA</code>, whose
name is also <code>NA</code>.</p>
<p>If we ask for the 0th element, we get an empty vector:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">0</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>named numeric(0)</code></pre>
</div>
<div id="vector-numbering-in-r-starts-at-1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="vector-numbering-in-r-starts-at-1" class="callout-inner">
<h3 class="callout-title">Vector numbering in R starts at 1<a class="anchor" aria-label="anchor" href="#vector-numbering-in-r-starts-at-1"></a>
</h3>
<div class="callout-content">
<p>In many programming languages (C and Python, for example), the first
element of a vector has an index of 0. In R, the first element is 1.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="skipping-and-removing-elements">Skipping and removing elements<a class="anchor" aria-label="anchor" href="#skipping-and-removing-elements"></a>
<a class="anchor" aria-label="anchor" href="#skipping-and-removing-elements"></a>
</h2>
<hr class="half-width">
<p>If we use a negative number as the index of a vector, R will return
every element <em>except</em> for the one specified:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   c   d   e
5.4 7.1 4.8 7.5 </code></pre>
</div>
<p>We can skip multiple elements:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">5</span><span class="op">)</span><span class="op">]</span>  <span class="co"># or x[-c(1,5)]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d
6.2 7.1 4.8 </code></pre>
</div>
<div id="tip-order-of-operations" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-order-of-operations" class="callout-inner">
<h3 class="callout-title">Tip: Order of operations<a class="anchor" aria-label="anchor" href="#tip-order-of-operations"></a>
</h3>
<div class="callout-content">
<p>A common trip up for novices occurs when trying to skip slices of a
vector. It’s natural to try to negate a sequence like so:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></code></pre>
</div>
<p>This gives a somewhat cryptic error:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in x[-1:3]: only 0's may be mixed with negative subscripts</code></pre>
</div>
<p>But remember the order of operations. <code>:</code> is really a
function. It takes its first argument as -1, and its second as 3, so
generates the sequence of numbers: <code>c(-1, 0, 1, 2, 3)</code>.</p>
<p>The correct solution is to wrap that function call in brackets, so
that the <code>-</code> operator applies to the result:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  d   e
4.8 7.5 </code></pre>
</div>
</div>
</div>
</div>
<p>To remove elements from a vector, we need to assign the result back
into the variable:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   b   c   e
5.4 6.2 7.1 7.5 </code></pre>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1<a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<p>Given the following code:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">5.4</span>, <span class="fl">6.2</span>, <span class="fl">7.1</span>, <span class="fl">4.8</span>, <span class="fl">7.5</span><span class="op">)</span></span>
<span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>, <span class="st">'e'</span><span class="op">)</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   b   c   d   e
5.4 6.2 7.1 4.8 7.5 </code></pre>
</div>
<p>Come up with at least 2 different commands that will produce the
following output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d
6.2 7.1 4.8 </code></pre>
</div>
<p>After you find 2 different commands, compare notes with your
neighbour. Did you have different strategies?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to challenge 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d
6.2 7.1 4.8 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d
6.2 7.1 4.8 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d
6.2 7.1 4.8 </code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="subsetting-by-name">Subsetting by name<a class="anchor" aria-label="anchor" href="#subsetting-by-name"></a>
<a class="anchor" aria-label="anchor" href="#subsetting-by-name"></a>
</h2>
<hr class="half-width">
<p>We can extract elements by using their name, instead of extracting by
index:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span>a<span class="op">=</span><span class="fl">5.4</span>, b<span class="op">=</span><span class="fl">6.2</span>, c<span class="op">=</span><span class="fl">7.1</span>, d<span class="op">=</span><span class="fl">4.8</span>, e<span class="op">=</span><span class="fl">7.5</span><span class="op">)</span> <span class="co"># we can name a vector 'on the fly'</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"c"</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   c
5.4 7.1 </code></pre>
</div>
<p>This is usually a much more reliable way to subset objects: the
position of various elements can often change when chaining together
subsetting operations, but the names will always remain the same!</p>
</section><section><h2 class="section-heading" id="logical-operations">Subsetting through other logical operations<a class="anchor" aria-label="anchor" href="#logical-operations"></a>
<a class="anchor" aria-label="anchor" href="#logical-operations"></a>
</h2>
<hr class="half-width">
<p>We can also use any logical vector to subset:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  c   e
7.1 7.5 </code></pre>
</div>
<p>Since comparison operators (e.g. <code>&gt;</code>,
<code>&lt;</code>, <code>==</code>) evaluate to logical vectors, we can
also use them to succinctly subset vectors: the following statement
gives the same result as the previous one.</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">7</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  c   e
7.1 7.5 </code></pre>
</div>
<p>Breaking it down, this statement first evaluates <code>x&gt;7</code>,
generating a logical vector
<code>c(FALSE, FALSE, TRUE, FALSE, TRUE)</code>, and then selects the
elements of <code>x</code> corresponding to the <code>TRUE</code>
values.</p>
<p>We can use <code>==</code> to mimic the previous method of indexing
by name (remember you have to use <code>==</code> rather than
<code>=</code> for comparisons):</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">==</span> <span class="st">"a"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span>  <span class="va">a</span></span>
<span><span class="fl">5.4</span> </span></code></pre>
</div>
<div id="tip-combining-logical-conditions" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-combining-logical-conditions" class="callout-inner">
<h3 class="callout-title">Tip: Combining logical conditions<a class="anchor" aria-label="anchor" href="#tip-combining-logical-conditions"></a>
</h3>
<div class="callout-content">
<p>We often want to combine multiple logical criteria. For example, we
might want to find all the countries that are located in Asia
<strong>or</strong> Europe <strong>and</strong> have life expectancies
within a certain range. Several operations for combining logical vectors
exist in R:</p>
<ul>
<li>
<code>&amp;</code>, the “logical AND” operator: returns
<code>TRUE</code> if both the left and right are <code>TRUE</code>.</li>
<li>
<code>|</code>, the “logical OR” operator: returns
<code>TRUE</code>, if either the left or right (or both) are
<code>TRUE</code>.</li>
</ul>
<p>You may sometimes see <code>&amp;&amp;</code> and <code>||</code>
instead of <code>&amp;</code> and <code>|</code>. These two-character
operators only look at the first element of each vector and ignore the
remaining elements. In general you should not use the two-character
operators in data analysis; save them for programming, i.e. deciding
whether to execute a statement.</p>
<ul>
<li>
<code>!</code>, the “logical NOT” operator: converts
<code>TRUE</code> to <code>FALSE</code> and <code>FALSE</code> to
<code>TRUE</code>. It can negate a single logical condition (eg
<code>!TRUE</code> becomes <code>FALSE</code>), or a whole vector of
conditions(eg <code>!c(TRUE, FALSE)</code> becomes
<code>c(FALSE, TRUE)</code>).</li>
</ul>
<p>Additionally, you can compare the elements within a single vector
using the <code>all</code> function (which returns <code>TRUE</code> if
every element of the vector is <code>TRUE</code>) and the
<code>any</code> function (which returns <code>TRUE</code> if one or
more elements of the vector are <code>TRUE</code>).</p>
</div>
</div>
</div>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2<a class="anchor" aria-label="anchor" href="#challenge-2"></a>
</h3>
<div class="callout-content">
<p>Given the following code:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">5.4</span>, <span class="fl">6.2</span>, <span class="fl">7.1</span>, <span class="fl">4.8</span>, <span class="fl">7.5</span><span class="op">)</span></span>
<span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>, <span class="st">'e'</span><span class="op">)</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   b   c   d   e
5.4 6.2 7.1 4.8 7.5 </code></pre>
</div>
<p>Write a subsetting command to return the values in x that are greater
than 4 and less than 7.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution to challenge 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x_subset</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">x</span><span class="op">&lt;</span><span class="fl">7</span> <span class="op">&amp;</span> <span class="va">x</span><span class="op">&gt;</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">x_subset</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  a   b   d
5.4 6.2 4.8 </code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="tip-non-unique-names" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-non-unique-names" class="callout-inner">
<h3 class="callout-title">Tip: Non-unique names<a class="anchor" aria-label="anchor" href="#tip-non-unique-names"></a>
</h3>
<div class="callout-content">
<p>You should be aware that it is possible for multiple elements in a
vector to have the same name. (For a data frame, columns can have the
same name — although R tries to avoid this — but row names must be
unique.) Consider these examples:</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'a'</span>, <span class="st">'a'</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>a a a
1 2 3 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="st">'a'</span><span class="op">]</span>  <span class="co"># only returns first value</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">a</span></span>
<span><span class="fl">1</span> </span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">==</span> <span class="st">'a'</span><span class="op">]</span>  <span class="co"># returns all three values</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>a a a
1 2 3 </code></pre>
</div>
</div>
</div>
</div>
<div id="tip-getting-help-for-operators" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-getting-help-for-operators" class="callout-inner">
<h3 class="callout-title">Tip: Getting help for operators<a class="anchor" aria-label="anchor" href="#tip-getting-help-for-operators"></a>
</h3>
<div class="callout-content">
<p>Remember you can search for help on operators by wrapping them in
quotes: <code>help("%in%")</code> or <code>?"%in%"</code>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="skipping-named-elements">Skipping named elements<a class="anchor" aria-label="anchor" href="#skipping-named-elements"></a>
<a class="anchor" aria-label="anchor" href="#skipping-named-elements"></a>
</h2>
<hr class="half-width">
<p>Skipping or removing named elements is a little harder. If we try to
skip one named element by negating the string, R complains (slightly
obscurely) that it doesn’t know how to take the negative of a
string:</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span>a<span class="op">=</span><span class="fl">5.4</span>, b<span class="op">=</span><span class="fl">6.2</span>, c<span class="op">=</span><span class="fl">7.1</span>, d<span class="op">=</span><span class="fl">4.8</span>, e<span class="op">=</span><span class="fl">7.5</span><span class="op">)</span> <span class="co"># we start again by naming a vector 'on the fly'</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="st">"a"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in -"a": invalid argument to unary operator</code></pre>
</div>
<p>However, we can use the <code>!=</code> (not-equals) operator to
construct a logical vector that will do what we want:</p>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">!=</span> <span class="st">"a"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d   e
6.2 7.1 4.8 7.5 </code></pre>
</div>
<p>Skipping multiple named indices is a little bit harder still. Suppose
we want to drop the <code>"a"</code> and <code>"c"</code> elements, so
we try this:</p>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">!=</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"c"</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in names(x) != c("a", "c"): longer object length is not a multiple of
shorter object length</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   c   d   e
6.2 7.1 4.8 7.5 </code></pre>
</div>
<p>R did <em>something</em>, but it gave us a warning that we ought to
pay attention to - and it apparently <em>gave us the wrong answer</em>
(the <code>"c"</code> element is still included in the vector)!</p>
<p>So what does <code>!=</code> actually do in this case? That’s an
excellent question.</p>
<div class="section level3">
<h3 id="recycling">Recycling<a class="anchor" aria-label="anchor" href="#recycling"></a>
</h3>
<p>Let’s take a look at the comparison component of this code:</p>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">!=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"c"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in names(x) != c("a", "c"): longer object length is not a multiple of
shorter object length</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE  TRUE  TRUE  TRUE  TRUE</code></pre>
</div>
<p>Why does R give <code>TRUE</code> as the third element of this
vector, when <code>names(x)[3] != "c"</code> is obviously false? When
you use <code>!=</code>, R tries to compare each element of the left
argument with the corresponding element of its right argument. What
happens when you compare vectors of different lengths?</p>
<figure><img src="fig/06-rmd-inequality.1.png" alt="Inequality testing" class="figure mx-auto d-block"></figure><p>When one vector is shorter than the other, it gets
<em>recycled</em>:</p>
<figure><img src="fig/06-rmd-inequality.2.png" alt="Inequality testing: results of recycling" class="figure mx-auto d-block"></figure><p>In this case R <strong>repeats</strong> <code>c("a", "c")</code> as
many times as necessary to match <code>names(x)</code>, i.e. we get
<code>c("a","c","a","c","a")</code>. Since the recycled <code>"a"</code>
doesn’t match the third element of <code>names(x)</code>, the value of
<code>!=</code> is <code>TRUE</code>. Because in this case the longer
vector length (5) isn’t a multiple of the shorter vector length (2), R
printed a warning message. If we had been unlucky and
<code>names(x)</code> had contained six elements, R would
<em>silently</em> have done the wrong thing (i.e., not what we intended
it to do). This recycling rule can can introduce hard-to-find and subtle
bugs!</p>
<p>The way to get R to do what we really want (match <em>each</em>
element of the left argument with <em>all</em> of the elements of the
right argument) it to use the <code>%in%</code> operator. The
<code>%in%</code> operator goes through each element of its left
argument, in this case the names of <code>x</code>, and asks, “Does this
element occur in the second argument?”. Here, since we want to
<em>exclude</em> values, we also need a <code>!</code> operator to
change “in” to “not in”:</p>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="op">!</span> <span class="fu">names</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"c"</span><span class="op">)</span> <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  b   d   e
6.2 4.8 7.5 </code></pre>
</div>
<div id="challenge-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-3" class="callout-inner">
<h3 class="callout-title">Challenge 3<a class="anchor" aria-label="anchor" href="#challenge-3"></a>
</h3>
<div class="callout-content">
<p>Selecting elements of a vector that match any of a list of components
is a very common data analysis task. For example, the gapminder data set
contains <code>country</code> and <code>continent</code> variables, but
no information between these two scales. Suppose we want to pull out
information from southeast Asia: how do we set up an operation to
produce a logical vector that is <code>TRUE</code> for all of the
countries in southeast Asia and <code>FALSE</code> otherwise?</p>
<p>Suppose you have these data:</p>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">seAsia</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Myanmar"</span>,<span class="st">"Thailand"</span>,<span class="st">"Cambodia"</span>,<span class="st">"Vietnam"</span>,<span class="st">"Laos"</span><span class="op">)</span></span>
<span><span class="co">## read in the gapminder data that we downloaded in episode 2</span></span>
<span><span class="va">gapminder</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"data/gapminder_data.csv"</span>, header<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## extract the `country` column from a data frame (we'll see this later);</span></span>
<span><span class="co">## convert from a factor to a character;</span></span>
<span><span class="co">## and get just the non-repeated elements</span></span>
<span><span class="va">countries</span> <span class="op">&lt;-</span> <span class="fu">unique</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>There’s a wrong way (using only <code>==</code>), which will give you
a warning; a clunky way (using the logical operators <code>==</code> and
<code>|</code>); and an elegant way (using <code>%in%</code>). See
whether you can come up with all three and explain how they (don’t)
work.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solution to challenge 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<ul>
<li>The <strong>wrong</strong> way to do this problem is
<code>countries==seAsia</code>. This gives a warning
(<code>"In countries == seAsia : longer object length is not a multiple of shorter object length"</code>)
and the wrong answer (a vector of all <code>FALSE</code> values),
because none of the recycled values of <code>seAsia</code> happen to
line up correctly with matching values in <code>country</code>.</li>
<li>The <strong>clunky</strong> (but technically correct) way to do this
problem is</li>
</ul>
<div class="codewrapper sourceCode" id="cb73">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="op">(</span><span class="va">countries</span><span class="op">==</span><span class="st">"Myanmar"</span> <span class="op">|</span> <span class="va">countries</span><span class="op">==</span><span class="st">"Thailand"</span> <span class="op">|</span></span>
<span> <span class="va">countries</span><span class="op">==</span><span class="st">"Cambodia"</span> <span class="op">|</span> <span class="va">countries</span> <span class="op">==</span> <span class="st">"Vietnam"</span> <span class="op">|</span> <span class="va">countries</span><span class="op">==</span><span class="st">"Laos"</span><span class="op">)</span></span></code></pre>
</div>
<p>(or <code>countries==seAsia[1] | countries==seAsia[2] | ...</code>).
This gives the correct values, but hopefully you can see how awkward it
is (what if we wanted to select countries from a much longer list?).</p>
<ul>
<li>The best way to do this problem is
<code>countries %in% seAsia</code>, which is both correct and easy to
type (and read).</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="handling-special-values">Handling special values<a class="anchor" aria-label="anchor" href="#handling-special-values"></a>
<a class="anchor" aria-label="anchor" href="#handling-special-values"></a>
</h2>
<hr class="half-width">
<p>At some point you will encounter functions in R that cannot handle
missing, infinite, or undefined data.</p>
<p>There are a number of special functions you can use to filter out
this data:</p>
<ul>
<li>
<code>is.na</code> will return all positions in a vector, matrix, or
data.frame containing <code>NA</code> (or <code>NaN</code>)</li>
<li>likewise, <code>is.nan</code>, and <code>is.infinite</code> will do
the same for <code>NaN</code> and <code>Inf</code>.</li>
<li>
<code>is.finite</code> will return all positions in a vector,
matrix, or data.frame that do not contain <code>NA</code>,
<code>NaN</code> or <code>Inf</code>.</li>
<li>
<code>na.omit</code> will filter out all missing values from a
vector</li>
</ul></section><section><h2 class="section-heading" id="factor-subsetting">Factor subsetting<a class="anchor" aria-label="anchor" href="#factor-subsetting"></a>
<a class="anchor" aria-label="anchor" href="#factor-subsetting"></a>
</h2>
<hr class="half-width">
<p>Now that we’ve explored the different ways to subset vectors, how do
we subset the other data structures?</p>
<p>Factor subsetting works the same way as vector subsetting.</p>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">f</span><span class="op">[</span><span class="va">f</span> <span class="op">==</span> <span class="st">"a"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] a a
Levels: a b c d</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb76">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span><span class="op">[</span><span class="va">f</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] b c c
Levels: a b c d</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb78">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] a a b
Levels: a b c d</code></pre>
</div>
<p>Skipping elements will not remove the level even if no more of that
category exists in the factor:</p>
<div class="codewrapper sourceCode" id="cb80">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span><span class="op">[</span><span class="op">-</span><span class="fl">3</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] a a c c d
Levels: a b c d</code></pre>
</div>
</section><section><h2 class="section-heading" id="matrix-subsetting">Matrix subsetting<a class="anchor" aria-label="anchor" href="#matrix-subsetting"></a>
<a class="anchor" aria-label="anchor" href="#matrix-subsetting"></a>
</h2>
<hr class="half-width">
<p>Matrices are also subsetted using the <code>[</code> function. In
this case it takes two arguments: the first applying to the rows, the
second to its columns:</p>
<div class="codewrapper sourceCode" id="cb82">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fu">rnorm</span><span class="op">(</span><span class="fl">6</span><span class="op">*</span><span class="fl">4</span><span class="op">)</span>, ncol<span class="op">=</span><span class="fl">4</span>, nrow<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">m</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span>, <span class="fu">c</span><span class="op">(</span><span class="fl">3</span>,<span class="fl">1</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>            [,1]       [,2]
[1,]  1.12493092 -0.8356286
[2,] -0.04493361  1.5952808</code></pre>
</div>
<p>You can leave the first or second arguments blank to retrieve all the
rows or columns respectively:</p>
<div class="codewrapper sourceCode" id="cb84">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span><span class="op">[</span>, <span class="fu">c</span><span class="op">(</span><span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>            [,1]        [,2]
[1,] -0.62124058  0.82122120
[2,] -2.21469989  0.59390132
[3,]  1.12493092  0.91897737
[4,] -0.04493361  0.78213630
[5,] -0.01619026  0.07456498
[6,]  0.94383621 -1.98935170</code></pre>
</div>
<p>If we only access one row or column, R will automatically convert the
result to a vector:</p>
<div class="codewrapper sourceCode" id="cb86">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span><span class="op">[</span><span class="fl">3</span>,<span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] -0.8356286  0.5757814  1.1249309  0.9189774</code></pre>
</div>
<p>If you want to keep the output as a matrix, you need to specify a
<em>third</em> argument; <code>drop = FALSE</code>:</p>
<div class="codewrapper sourceCode" id="cb88">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span><span class="op">[</span><span class="fl">3</span>, , drop<span class="op">=</span><span class="cn">FALSE</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>           [,1]      [,2]     [,3]      [,4]
[1,] -0.8356286 0.5757814 1.124931 0.9189774</code></pre>
</div>
<p>Unlike vectors, if we try to access a row or column outside of the
matrix, R will throw an error:</p>
<div class="codewrapper sourceCode" id="cb90">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span><span class="op">[</span>, <span class="fu">c</span><span class="op">(</span><span class="fl">3</span>,<span class="fl">6</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in m[, c(3, 6)]: subscript out of bounds</code></pre>
</div>
<div id="tip-higher-dimensional-arrays" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-higher-dimensional-arrays" class="callout-inner">
<h3 class="callout-title">Tip: Higher dimensional arrays<a class="anchor" aria-label="anchor" href="#tip-higher-dimensional-arrays"></a>
</h3>
<div class="callout-content">
<p>when dealing with multi-dimensional arrays, each argument to
<code>[</code> corresponds to a dimension. For example, a 3D array, the
first three arguments correspond to the rows, columns, and depth
dimension.</p>
</div>
</div>
</div>
<p>Because matrices are vectors, we can also subset using only one
argument:</p>
<div class="codewrapper sourceCode" id="cb92">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.3295078</code></pre>
</div>
<p>This usually isn’t useful, and often confusing to read. However it is
useful to note that matrices are laid out in <em>column-major
format</em> by default. That is the elements of the vector are arranged
column-wise:</p>
<div class="codewrapper sourceCode" id="cb94">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, nrow<span class="op">=</span><span class="fl">2</span>, ncol<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6</code></pre>
</div>
<p>If you wish to populate the matrix by row, use
<code>byrow=TRUE</code>:</p>
<div class="codewrapper sourceCode" id="cb96">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, nrow<span class="op">=</span><span class="fl">2</span>, ncol<span class="op">=</span><span class="fl">3</span>, byrow<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    5    6</code></pre>
</div>
<p>Matrices can also be subsetted using their rownames and column names
instead of their row and column indices.</p>
<div id="challenge-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-4" class="callout-inner">
<h3 class="callout-title">Challenge 4<a class="anchor" aria-label="anchor" href="#challenge-4"></a>
</h3>
<div class="callout-content">
<p>Given the following code:</p>
<div class="codewrapper sourceCode" id="cb98">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">matrix</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">18</span>, nrow<span class="op">=</span><span class="fl">3</span>, ncol<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    1    4    7   10   13   16
[2,]    2    5    8   11   14   17
[3,]    3    6    9   12   15   18</code></pre>
</div>
<ol style="list-style-type: decimal">
<li>Which of the following commands will extract the values 11 and
14?</li>
</ol>
<p>A. <code>m[2,4,2,5]</code></p>
<p>B. <code>m[2:5]</code></p>
<p>C. <code>m[4:5,2]</code></p>
<p>D. <code>m[2,c(4,5)]</code></p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solution to challenge 4
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>D</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="list-subsetting">List subsetting<a class="anchor" aria-label="anchor" href="#list-subsetting"></a>
<a class="anchor" aria-label="anchor" href="#list-subsetting"></a>
</h2>
<hr class="half-width">
<p>Now we’ll introduce some new subsetting operators. There are three
functions used to subset lists. We’ve already seen these when learning
about atomic vectors and matrices: <code>[</code>, <code>[[</code>, and
<code>$</code>.</p>
<p>Using <code>[</code> will always return a list. If you want to
<em>subset</em> a list, but not <em>extract</em> an element, then you
will likely use <code>[</code>.</p>
<div class="codewrapper sourceCode" id="cb100">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span>a <span class="op">=</span> <span class="st">"Software Carpentry"</span>, b <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, data <span class="op">=</span> <span class="fu">head</span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">xlist</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$a
[1] "Software Carpentry"</code></pre>
</div>
<p>This returns a <em>list with one element</em>.</p>
<p>We can subset elements of a list exactly the same way as atomic
vectors using <code>[</code>. Comparison operations however won’t work
as they’re not recursive, they will try to condition on the data
structures in each element of the list, not the individual elements
within those data structures.</p>
<div class="codewrapper sourceCode" id="cb102">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$a
[1] "Software Carpentry"

$b
 [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<p>To extract individual elements of a list, you need to use the
double-square bracket function: <code>[[</code>.</p>
<div class="codewrapper sourceCode" id="cb104">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Software Carpentry"</code></pre>
</div>
<p>Notice that now the result is a vector, not a list.</p>
<p>You can’t extract more than one element at once:</p>
<div class="codewrapper sourceCode" id="cb106">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">[[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in xlist[[1:2]]: subscript out of bounds</code></pre>
</div>
<p>Nor use it to skip elements:</p>
<div class="codewrapper sourceCode" id="cb108">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">[[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in xlist[[-1]]: invalid negative subscript in get1index &lt;real&gt;</code></pre>
</div>
<p>But you can use names to both subset and extract elements:</p>
<div class="codewrapper sourceCode" id="cb110">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">[[</span><span class="st">"a"</span><span class="op">]</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Software Carpentry"</code></pre>
</div>
<p>The <code>$</code> function is a shorthand way for extracting
elements by name:</p>
<div class="codewrapper sourceCode" id="cb112">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">$</span><span class="va">data</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                   mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
</div>
<div id="challenge-5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-5" class="callout-inner">
<h3 class="callout-title">Challenge 5<a class="anchor" aria-label="anchor" href="#challenge-5"></a>
</h3>
<div class="callout-content">
<p>Given the following list:</p>
<div class="codewrapper sourceCode" id="cb114">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span>a <span class="op">=</span> <span class="st">"Software Carpentry"</span>, b <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, data <span class="op">=</span> <span class="fu">head</span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Using your knowledge of both list and vector subsetting, extract the
number 2 from xlist. Hint: the number 2 is contained within the “b” item
in the list.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Solution to challenge 5
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb115">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">$</span><span class="va">b</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb117">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb119">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xlist</span><span class="op">[[</span><span class="st">"b"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-6" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-6" class="callout-inner">
<h3 class="callout-title">Challenge 6<a class="anchor" aria-label="anchor" href="#challenge-6"></a>
</h3>
<div class="callout-content">
<p>Given a linear model:</p>
<div class="codewrapper sourceCode" id="cb121">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu">aov</span><span class="op">(</span><span class="va">pop</span> <span class="op">~</span> <span class="va">lifeExp</span>, data<span class="op">=</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<p>Extract the residual degrees of freedom (hint:
<code>attributes()</code> will help you)</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Solution to challenge 6
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb122">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">attributes</span><span class="op">(</span><span class="va">mod</span><span class="op">)</span> <span class="co">## `df.residual` is one of the names of `mod`</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb123">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span><span class="op">$</span><span class="va">df.residual</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="data-frames">Data frames<a class="anchor" aria-label="anchor" href="#data-frames"></a>
<a class="anchor" aria-label="anchor" href="#data-frames"></a>
</h2>
<hr class="half-width">
<p>Remember the data frames are lists underneath the hood, so similar
rules apply. However they are also two dimensional objects:</p>
<p><code>[</code> with one argument will act the same way as for lists,
where each list element corresponds to a column. The resulting object
will be a data frame:</p>
<div class="codewrapper sourceCode" id="cb124">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">gapminder</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       pop
1  8425333
2  9240934
3 10267083
4 11537966
5 13079460
6 14880372</code></pre>
</div>
<p>Similarly, <code>[[</code> will act to extract <em>a single
column</em>:</p>
<div class="codewrapper sourceCode" id="cb126">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">gapminder</span><span class="op">[[</span><span class="st">"lifeExp"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 28.801 30.332 31.997 34.020 36.088 38.438</code></pre>
</div>
<p>And <code>$</code> provides a convenient shorthand to extract columns
by name:</p>
<div class="codewrapper sourceCode" id="cb128">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1952 1957 1962 1967 1972 1977</code></pre>
</div>
<p>With two arguments, <code>[</code> behaves the same way as for
matrices:</p>
<div class="codewrapper sourceCode" id="cb130">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,<span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      country year      pop continent lifeExp gdpPercap
1 Afghanistan 1952  8425333      Asia  28.801  779.4453
2 Afghanistan 1957  9240934      Asia  30.332  820.8530
3 Afghanistan 1962 10267083      Asia  31.997  853.1007</code></pre>
</div>
<p>If we subset a single row, the result will be a data frame (because
the elements are mixed types):</p>
<div class="codewrapper sourceCode" id="cb132">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">[</span><span class="fl">3</span>,<span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      country year      pop continent lifeExp gdpPercap
3 Afghanistan 1962 10267083      Asia  31.997  853.1007</code></pre>
</div>
<p>But for a single column the result will be a vector (this can be
changed with the third argument, <code>drop = FALSE</code>).</p>
<div id="challenge-7" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-7" class="callout-inner">
<h3 class="callout-title">Challenge 7<a class="anchor" aria-label="anchor" href="#challenge-7"></a>
</h3>
<div class="callout-content">
<p>Fix each of the following common data frame subsetting errors:</p>
<ol style="list-style-type: decimal">
<li>Extract observations collected for the year 1957</li>
</ol>
<div class="codewrapper sourceCode" id="cb134">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" tabindex="-1"></a>gapminder[gapminder<span class="sc">$</span>year <span class="ot">=</span> <span class="dv">1957</span>,]</span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Extract all columns except 1 through to 4</li>
</ol>
<div class="codewrapper sourceCode" id="cb135">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span></code></pre>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Extract the rows where the life expectancy is longer the 80
years</li>
</ol>
<div class="codewrapper sourceCode" id="cb136">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">lifeExp</span> <span class="op">&gt;</span> <span class="fl">80</span><span class="op">]</span></span></code></pre>
</div>
<ol start="4" style="list-style-type: decimal">
<li>Extract the first row, and the fourth and fifth columns
(<code>continent</code> and <code>lifeExp</code>).</li>
</ol>
<div class="codewrapper sourceCode" id="cb137">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">]</span></span></code></pre>
</div>
<ol start="5" style="list-style-type: decimal">
<li>Advanced: extract rows that contain information for the years 2002
and 2007</li>
</ol>
<div class="codewrapper sourceCode" id="cb138">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2002</span> <span class="op">|</span> <span class="fl">2007</span>,<span class="op">]</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">
  Solution to challenge 7
  </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<p>Fix each of the following common data frame subsetting errors:</p>
<ol style="list-style-type: decimal">
<li>Extract observations collected for the year 1957</li>
</ol>
<div class="codewrapper sourceCode" id="cb139">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gapminder[gapminder$year = 1957,]</span></span>
<span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">1957</span>,<span class="op">]</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Extract all columns except 1 through to 4</li>
</ol>
<div class="codewrapper sourceCode" id="cb140">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gapminder[,-1:4]</span></span>
<span><span class="va">gapminder</span><span class="op">[</span>,<span class="op">-</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Extract the rows where the life expectancy is longer than 80
years</li>
</ol>
<div class="codewrapper sourceCode" id="cb141">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gapminder[gapminder$lifeExp &gt; 80]</span></span>
<span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">lifeExp</span> <span class="op">&gt;</span> <span class="fl">80</span>,<span class="op">]</span></span></code></pre>
</div>
<ol start="4" style="list-style-type: decimal">
<li>Extract the first row, and the fourth and fifth columns
(<code>continent</code> and <code>lifeExp</code>).</li>
</ol>
<div class="codewrapper sourceCode" id="cb142">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gapminder[1, 4, 5]</span></span>
<span><span class="va">gapminder</span><span class="op">[</span><span class="fl">1</span>, <span class="fu">c</span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<ol start="5" style="list-style-type: decimal">
<li>Advanced: extract rows that contain information for the years 2002
and 2007</li>
</ol>
<div class="codewrapper sourceCode" id="cb143">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gapminder[gapminder$year == 2002 | 2007,]</span></span>
<span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2002</span> <span class="op">|</span> <span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span>,<span class="op">]</span></span>
<span><span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2002</span>, <span class="fl">2007</span><span class="op">)</span>,<span class="op">]</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-8" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-8" class="callout-inner">
<h3 class="callout-title">Challenge 8<a class="anchor" aria-label="anchor" href="#challenge-8"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>Why does <code>gapminder[1:20]</code> return an error? How does
it differ from <code>gapminder[1:20, ]</code>?</p></li>
<li><p>Create a new <code>data.frame</code> called
<code>gapminder_small</code> that only contains rows 1 through 9 and 19
through 23. You can do this in one or two steps.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8">
  Solution to challenge 8
  </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" data-bs-parent="#accordionSolution8" aria-labelledby="headingSolution8">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><p><code>gapminder</code> is a data.frame so needs to be subsetted
on two dimensions. <code>gapminder[1:20, ]</code> subsets the data to
give the first 20 rows and all columns.</p></li>
<li>
</li>
</ol>
<div class="codewrapper sourceCode" id="cb144">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder_small</span> <span class="op">&lt;-</span> <span class="va">gapminder</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span>, <span class="fl">19</span><span class="op">:</span><span class="fl">23</span><span class="op">)</span>,<span class="op">]</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Indexing in R starts at 1, not 0.</li>
<li>Access individual values by location using <code>[]</code>.</li>
<li>Access slices of data using <code>[low:high]</code>.</li>
<li>Access arbitrary sets of data using <code>[c(...)]</code>.</li>
<li>Use logical operations and logical vectors to access subsets of
data.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-15-plot-ggplot2"><p>Content from <a href="15-plot-ggplot2.html">Creating Publication-Quality Graphics with ggplot2</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/15-plot-ggplot2.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I create publication-quality graphics in R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>To be able to use ggplot2 to generate publication-quality
graphics.</li>
<li>To apply geometry, aesthetic, and statistics layers to a ggplot
plot.</li>
<li>To manipulate the aesthetics of a plot using different colors,
shapes, and lines.</li>
<li>To improve data visualization through transforming scales and
paneling by group.</li>
<li>To save a plot created with ggplot to disk.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Plotting our data is one of the best ways to quickly explore it and
the various relationships between variables.</p>
<p>There are three main plotting systems in R, the <a href="https://www.statmethods.net/graphs/index.html" class="external-link">base plotting
system</a>, the <a href="https://www.statmethods.net/advgraphs/trellis.html" class="external-link">lattice</a>
package, and the <a href="https://www.statmethods.net/advgraphs/ggplot2.html" class="external-link">ggplot2</a>
package.</p>
<p>Today we’ll be learning about the ggplot2 package, because it is the
most effective for creating publication-quality graphics.</p>
<p>ggplot2 is built on the grammar of graphics, the idea that any plot
can be built from the same set of components: a <strong>data
set</strong>, <strong>mapping aesthetics</strong>, and graphical
<strong>layers</strong>:</p>
<ul>
<li><p><strong>Data sets</strong> are the data that you, the user,
provide.</p></li>
<li><p><strong>Mapping aesthetics</strong> are what connect the data to
the graphics. They tell ggplot2 how to use your data to affect how the
graph looks, such as changing what is plotted on the X or Y axis, or the
size or color of different data points.</p></li>
<li><p><strong>Layers</strong> are the actual graphical output from
ggplot2. Layers determine what kinds of plot are shown (scatterplot,
histogram, etc.), the coordinate system used (rectangular, polar,
others), and other important aspects of the plot. The idea of layers of
graphics may be familiar to you if you have used image editing programs
like Photoshop, Illustrator, or Inkscape.</p></li>
</ul>
<p>Let’s start off building an example using the gapminder data from
earlier. The most basic function is <code>ggplot</code>, which lets R
know that we’re creating a new plot. Any of the arguments we give the
<code>ggplot</code> function are the <em>global</em> options for the
plot: they apply to all layers on the plot.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-blank-ggplot-1.png" alt="Blank plot, before adding any mapping aesthetics to ggplot()." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Here we called <code>ggplot</code> and told it what data we want to
show on our figure. This is not enough information for
<code>ggplot</code> to actually draw anything. It only creates a blank
slate for other elements to be added to.</p>
<p>Now we’re going to add in the <strong>mapping aesthetics</strong>
using the <code>aes</code> function. <code>aes</code> tells
<code>ggplot</code> how variables in the <strong>data</strong> map to
<em>aesthetic</em> properties of the figure, such as which columns of
the data should be used for the <strong>x</strong> and
<strong>y</strong> locations.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-ggplot-with-aes-1.png" alt="Plotting area with axes for a scatter plot of life expectancy vs GDP, with no data points visible." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Here we told <code>ggplot</code> we want to plot the “gdpPercap”
column of the gapminder data frame on the x-axis, and the “lifeExp”
column on the y-axis. Notice that we didn’t need to explicitly pass
<code>aes</code> these columns
(e.g. <code>x = gapminder[, "gdpPercap"]</code>), this is because
<code>ggplot</code> is smart enough to know to look in the
<strong>data</strong> for that column!</p>
<p>The final part of making our plot is to tell <code>ggplot</code> how
we want to visually represent the data. We do this by adding a new
<strong>layer</strong> to the plot using one of the
<strong>geom</strong> functions.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-lifeExp-vs-gdpPercap-scatter-1.png" alt="Scatter plot of life expectancy vs GDP per capita, now showing the data points." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Here we used <code>geom_point</code>, which tells <code>ggplot</code>
we want to visually represent the relationship between
<strong>x</strong> and <strong>y</strong> as a scatterplot of
points.</p>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1<a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<p>Modify the example so that the figure shows how life expectancy has
changed over time:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Hint: the gapminder dataset has a column called “year”, which should
appear on the x-axis.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to challenge 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Here is one possible solution:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure style="text-align: center"><img src="fig/15-plot-ggplot2-rendered-ch1-sol-1.png" alt="Binned scatterplot of life expectancy versus year showing how life expectancy has increased over time" class="figure mx-auto d-block"><figcaption>
Binned scatterplot of life expectancy versus year showing how life
expectancy has increased over time
</figcaption></figure>
</div>
</div>
</div>
</div>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2<a class="anchor" aria-label="anchor" href="#challenge-2"></a>
</h3>
<div class="callout-content">
<p>In the previous examples and challenge we’ve used the
<code>aes</code> function to tell the scatterplot <strong>geom</strong>
about the <strong>x</strong> and <strong>y</strong> locations of each
point. Another <em>aesthetic</em> property we can modify is the point
<em>color</em>. Modify the code from the previous challenge to
<strong>color</strong> the points by the “continent” column. What trends
do you see in the data? Are they what you expected?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution to challenge 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>The solution presented below adds <code>color=continent</code> to the
call of the <code>aes</code> function. The general trend seems to
indicate an increased life expectancy over the years. On continents with
stronger economies we find a longer life expectancy.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure style="text-align: center"><img src="fig/15-plot-ggplot2-rendered-ch2-sol-1.png" alt="Binned scatterplot of life expectancy vs year with color-coded continents showing value of 'aes' function" class="figure mx-auto d-block"><figcaption>
Binned scatterplot of life expectancy vs year with color-coded
continents showing value of ‘aes’ function
</figcaption></figure>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="layers">Layers<a class="anchor" aria-label="anchor" href="#layers"></a>
<a class="anchor" aria-label="anchor" href="#layers"></a>
</h2>
<hr class="half-width">
<p>Using a scatterplot probably isn’t the best for visualizing change
over time. Instead, let’s tell <code>ggplot</code> to visualize the data
as a line plot:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">lifeExp</span>, color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-lifeExp-line-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Instead of adding a <code>geom_point</code> layer, we’ve added a
<code>geom_line</code> layer.</p>
<p>However, the result doesn’t look quite as we might have expected: it
seems to be jumping around a lot in each continent. Let’s try to
separate the data by country, plotting one line for each country:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">lifeExp</span>, group<span class="op">=</span><span class="va">country</span>, color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-lifeExp-line-by-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>We’ve added the <strong>group</strong> <em>aesthetic</em>, which
tells <code>ggplot</code> to draw a line for each country.</p>
<p>But what if we want to visualize both lines and points on the plot?
We can add another layer to the plot:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">lifeExp</span>, group<span class="op">=</span><span class="va">country</span>, color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-lifeExp-line-point-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>It’s important to note that each layer is drawn on top of the
previous layer. In this example, the points have been drawn <em>on top
of</em> the lines. Here’s a demonstration:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">lifeExp</span>, group<span class="op">=</span><span class="va">country</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-lifeExp-layer-example-1-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>In this example, the <em>aesthetic</em> mapping of
<strong>color</strong> has been moved from the global plot options in
<code>ggplot</code> to the <code>geom_line</code> layer so it no longer
applies to the points. Now we can clearly see that the points are drawn
on top of the lines.</p>
<div id="tip-setting-an-aesthetic-to-a-value-instead-of-a-mapping" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-setting-an-aesthetic-to-a-value-instead-of-a-mapping" class="callout-inner">
<h3 class="callout-title">Tip: Setting an aesthetic to a value instead of a mapping<a class="anchor" aria-label="anchor" href="#tip-setting-an-aesthetic-to-a-value-instead-of-a-mapping"></a>
</h3>
<div class="callout-content">
<p>So far, we’ve seen how to use an aesthetic (such as
<strong>color</strong>) as a <em>mapping</em> to a variable in the data.
For example, when we use
<code>geom_line(mapping = aes(color=continent))</code>, ggplot will give
a different color to each continent. But what if we want to change the
color of all lines to blue? You may think that
<code>geom_line(mapping = aes(color="blue"))</code> should work, but it
doesn’t. Since we don’t want to create a mapping to a specific variable,
we can move the color specification outside of the <code>aes()</code>
function, like this: <code>geom_line(color="blue")</code>.</p>
</div>
</div>
</div>
<div id="challenge-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-3" class="callout-inner">
<h3 class="callout-title">Challenge 3<a class="anchor" aria-label="anchor" href="#challenge-3"></a>
</h3>
<div class="callout-content">
<p>Switch the order of the point and line layers from the previous
example. What happened?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solution to challenge 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>The lines now get drawn over the points!</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">lifeExp</span>, group<span class="op">=</span><span class="va">country</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_line</span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-ch3-sol-1.png" alt="Scatter plot of life expectancy vs GDP per capita with a trend line summarising the relationship between variables. The plot illustrates the possibilities for styling visualisations in ggplot2 with data points enlarged, coloured orange, and displayed without transparency." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="transformations-and-statistics">Transformations and statistics<a class="anchor" aria-label="anchor" href="#transformations-and-statistics"></a>
<a class="anchor" aria-label="anchor" href="#transformations-and-statistics"></a>
</h2>
<hr class="half-width">
<p>ggplot2 also makes it easy to overlay statistical models over the
data. To demonstrate we’ll go back to our first example:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-lifeExp-vs-gdpPercap-scatter3-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Currently it’s hard to see the relationship between the points due to
some strong outliers in GDP per capita. We can change the scale of units
on the x axis using the <em>scale</em> functions. These control the
mapping between the data values and visual values of an aesthetic. We
can also modify the transparency of the points, using the <em>alpha</em>
function, which is especially helpful when you have a large amount of
data which is very clustered.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure style="text-align: center"><img src="fig/15-plot-ggplot2-rendered-axis-scale-1.png" alt="Scatterplot of GDP vs life expectancy showing logarithmic x-axis data spread" class="figure mx-auto d-block"><figcaption>
Scatterplot of GDP vs life expectancy showing logarithmic x-axis data
spread
</figcaption></figure><p>The <code>scale_x_log10</code> function applied a transformation to
the coordinate system of the plot, so that each multiple of 10 is evenly
spaced from left to right. For example, a GDP per capita of 1,000 is the
same horizontal distance away from a value of 10,000 as the 10,000 value
is from 100,000. This helps to visualize the spread of the data along
the x-axis.</p>
<div id="tip-reminder-setting-an-aesthetic-to-a-value-instead-of-a-mapping" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-reminder-setting-an-aesthetic-to-a-value-instead-of-a-mapping" class="callout-inner">
<h3 class="callout-title">Tip Reminder: Setting an aesthetic to a value instead of a mapping<a class="anchor" aria-label="anchor" href="#tip-reminder-setting-an-aesthetic-to-a-value-instead-of-a-mapping"></a>
</h3>
<div class="callout-content">
<p>Notice that we used <code>geom_point(alpha = 0.5)</code>. As the
previous tip mentioned, using a setting outside of the
<code>aes()</code> function will cause this value to be used for all
points, which is what we want in this case. But just like any other
aesthetic setting, <em>alpha</em> can also be mapped to a variable in
the data. For example, we can give a different transparency to each
continent with
<code>geom_point(mapping = aes(alpha = continent))</code>.</p>
</div>
</div>
</div>
<p>We can fit a simple relationship to the data by adding another layer,
<code>geom_smooth</code>:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_smooth</span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-lm-fit-1.png" alt="Scatter plot of life expectancy vs GDP per capita with a blue trend line summarising the relationship between variables, and gray shaded area indicating 95% confidence intervals for that trend line." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>We can make the line thicker by <em>setting</em> the
<strong>linewidth</strong> aesthetic in the <code>geom_smooth</code>
layer:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_smooth</span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span>, linewidth<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-lm-fit2-1.png" alt="Scatter plot of life expectancy vs GDP per capita with a trend line summarising the relationship between variables. The blue trend line is slightly thicker than in the previous figure." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>There are two ways an <em>aesthetic</em> can be specified. Here we
<em>set</em> the <strong>linewidth</strong> aesthetic by passing it as
an argument to <code>geom_smooth</code> and it is applied the same to
the whole <code>geom</code>. Previously in the lesson we’ve used the
<code>aes</code> function to define a <em>mapping</em> between data
variables and their visual representation.</p>
<div id="challenge-4a" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-4a" class="callout-inner">
<h3 class="callout-title">Challenge 4a<a class="anchor" aria-label="anchor" href="#challenge-4a"></a>
</h3>
<div class="callout-content">
<p>Modify the color and size of the points on the point layer in the
previous example.</p>
<p>Hint: do not use the <code>aes</code> function.</p>
<p>Hint: the equivalent of <code>linewidth</code> for points is
<code>size</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solution to challenge 4a
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>Here a possible solution: Notice that the <code>color</code> argument
is supplied outside of the <code>aes()</code> function. This means that
it applies to all data points on the graph and is not related to a
specific variable.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">geom_point</span><span class="op">(</span>size<span class="op">=</span><span class="fl">3</span>, color<span class="op">=</span><span class="st">"orange"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">geom_smooth</span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span>, linewidth<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-ch4a-sol-1.png" alt="Scatter plot of life expectancy vs GDP per capita with a trend line summarising the relationship between variables. The plot illustrates the possibilities for styling visualisations in ggplot2 with data points enlarged, coloured orange, and displayed without transparency." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="challenge-4b" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-4b" class="callout-inner">
<h3 class="callout-title">Challenge 4b<a class="anchor" aria-label="anchor" href="#challenge-4b"></a>
</h3>
<div class="callout-content">
<p>Modify your solution to Challenge 4a so that the points are now a
different shape and are colored by continent with new trendlines. Hint:
The color argument can be used inside the aesthetic.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Solution to challenge 4b
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<p>Here is a possible solution: Notice that supplying the
<code>color</code> argument inside the <code>aes()</code> functions
enables you to connect it to a certain variable. The <code>shape</code>
argument, as you can see, modifies all data points the same way (it is
outside the <code>aes()</code> call) while the <code>color</code>
argument which is placed inside the <code>aes()</code> call modifies a
point’s color based on its continent value.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">geom_point</span><span class="op">(</span>size<span class="op">=</span><span class="fl">3</span>, shape<span class="op">=</span><span class="fl">17</span><span class="op">)</span> <span class="op">+</span> <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">geom_smooth</span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span>, linewidth<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-ch4b-sol-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="multi-panel-figures">Multi-panel figures<a class="anchor" aria-label="anchor" href="#multi-panel-figures"></a>
<a class="anchor" aria-label="anchor" href="#multi-panel-figures"></a>
</h2>
<hr class="half-width">
<p>Earlier we visualized the change in life expectancy over time across
all countries in one plot. Alternatively, we can split this out over
multiple panels by adding a layer of <strong>facet</strong> panels.</p>
<div id="tip" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip" class="callout-inner">
<h3 class="callout-title">Tip<a class="anchor" aria-label="anchor" href="#tip"></a>
</h3>
<div class="callout-content">
<p>We start by making a subset of data including only countries located
in the Americas. This includes 25 countries, which will begin to clutter
the figure. Note that we apply a “theme” definition to rotate the x-axis
labels to maintain readability. Nearly everything in ggplot2 is
customizable.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">americas</span> <span class="op">&lt;-</span> <span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Americas"</span>,<span class="op">]</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">americas</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">country</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-facet-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>The <code>facet_wrap</code> layer took a “formula” as its argument,
denoted by the tilde (~). This tells R to draw a panel for each unique
value in the country column of the gapminder dataset.</p>
</section><section><h2 class="section-heading" id="modifying-text">Modifying text<a class="anchor" aria-label="anchor" href="#modifying-text"></a>
<a class="anchor" aria-label="anchor" href="#modifying-text"></a>
</h2>
<hr class="half-width">
<p>To clean this figure up for a publication we need to change some of
the text elements. The x-axis is too cluttered, and the y axis should
read “Life expectancy”, rather than the column name in the data
frame.</p>
<p>We can do this by adding a couple of different layers. The
<strong>theme</strong> layer controls the axis text, and overall text
size. Labels for the axes, plot title and any legend can be set using
the <code>labs</code> function. Legend titles are set using the same
names we used in the <code>aes</code> specification. Thus below the
color legend title is set using <code>color = "Continent"</code>, while
the title of a fill legend would be set using
<code>fill = "MyTitle"</code>.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">americas</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">country</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Year"</span>,              <span class="co"># x axis title</span></span>
<span>    y <span class="op">=</span> <span class="st">"Life expectancy"</span>,   <span class="co"># y axis title</span></span>
<span>    title <span class="op">=</span> <span class="st">"Figure 1"</span>,      <span class="co"># main title of figure</span></span>
<span>    color <span class="op">=</span> <span class="st">"Continent"</span>      <span class="co"># title of legend</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-theme-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="exporting-the-plot">Exporting the plot<a class="anchor" aria-label="anchor" href="#exporting-the-plot"></a>
<a class="anchor" aria-label="anchor" href="#exporting-the-plot"></a>
</h2>
<hr class="half-width">
<p>The <code>ggsave()</code> function allows you to export a plot
created with ggplot. You can specify the dimension and resolution of
your plot by adjusting the appropriate arguments (<code>width</code>,
<code>height</code> and <code>dpi</code>) to create high quality
graphics for publication. In order to save the plot from above, we first
assign it to a variable <code>lifeExp_plot</code>, then tell
<code>ggsave</code> to save that plot in <code>png</code> format to a
directory called <code>results</code>. (Make sure you have a
<code>results/</code> folder in your working directory.)</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lifeExp_plot</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">americas</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, color<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">country</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Year"</span>,              <span class="co"># x axis title</span></span>
<span>    y <span class="op">=</span> <span class="st">"Life expectancy"</span>,   <span class="co"># y axis title</span></span>
<span>    title <span class="op">=</span> <span class="st">"Figure 1"</span>,      <span class="co"># main title of figure</span></span>
<span>    color <span class="op">=</span> <span class="st">"Continent"</span>      <span class="co"># title of legend</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ggsave</span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"results/lifeExp.png"</span>, plot <span class="op">=</span> <span class="va">lifeExp_plot</span>, width <span class="op">=</span> <span class="fl">12</span>, height <span class="op">=</span> <span class="fl">10</span>, dpi <span class="op">=</span> <span class="fl">300</span>, units <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span></span></code></pre>
</div>
<p>There are two nice things about <code>ggsave</code>. First, it
defaults to the last plot, so if you omit the <code>plot</code> argument
it will automatically save the last plot you created with
<code>ggplot</code>. Secondly, it tries to determine the format you want
to save your plot in from the file extension you provide for the
filename (for example <code>.png</code> or <code>.pdf</code>). If you
need to, you can specify the format explicitly in the
<code>device</code> argument.</p>
<p>This is a taste of what you can do with ggplot2. RStudio provides a
really useful <a href="https://www.rstudio.org/links/data_visualization_cheat_sheet" class="external-link">cheat
sheet</a> of the different layers available, and more extensive
documentation is available on the <a href="https://ggplot2.tidyverse.org/reference/" class="external-link">ggplot2 website</a>. All
RStudio cheat sheets are available from the <a href="https://www.rstudio.com/resources/cheatsheets/" class="external-link">RStudio
website</a>. Finally, if you have no idea how to change something, a
quick Google search will usually send you to a relevant question and
answer on Stack Overflow with reusable code to modify!</p>
<div id="challenge-5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-5" class="callout-inner">
<h3 class="callout-title">Challenge 5<a class="anchor" aria-label="anchor" href="#challenge-5"></a>
</h3>
<div class="callout-content">
<p>Generate boxplots to compare life expectancy between the different
continents during the available years.</p>
<p>Advanced:</p>
<ul>
<li>Rename y axis as Life Expectancy.</li>
<li>Remove x axis labels.</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Solution to Challenge 5
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<p>Here a possible solution: <code>xlab()</code> and <code>ylab()</code>
set labels for the x and y axes, respectively The axis title, text and
ticks are attributes of the theme and must be modified within a
<code>theme()</code> call.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">continent</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, fill <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">year</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">ylab</span><span class="op">(</span><span class="st">"Life Expectancy"</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">theme</span><span class="op">(</span>axis.title.x<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>       axis.text.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>       axis.ticks.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/15-plot-ggplot2-rendered-ch5-sol-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>ggplot2</code> to create plots.</li>
<li>Think about graphics in layers: aesthetics, geometry, statistics,
scale transformation, and grouping.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-16-writing-data"><p>Content from <a href="16-writing-data.html">Writing Data</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/16-writing-data.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I save plots and data created in R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>To be able to write out plots and data from R.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="saving-plots">Saving plots<a class="anchor" aria-label="anchor" href="#saving-plots"></a>
<a class="anchor" aria-label="anchor" href="#saving-plots"></a>
</h2>
<hr class="half-width">
<p>You have already seen how to save the most recent plot you create in
<code>ggplot2</code>, using the command <code>ggsave</code>. As a
refresher:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggsave</span><span class="op">(</span><span class="st">"My_most_recent_plot.pdf"</span><span class="op">)</span></span></code></pre>
</div>
<p>You can save a plot from within RStudio using the ‘Export’ button in
the ‘Plot’ window. This will give you the option of saving as a .pdf or
as .png, .jpg or other image formats.</p>
<p>Sometimes you will want to save plots without creating them in the
‘Plot’ window first. Perhaps you want to make a pdf document with
multiple pages: each one a different plot, for example. Or perhaps
you’re looping through multiple subsets of a file, plotting data from
each subset, and you want to save each plot, but obviously can’t stop
the loop to click ‘Export’ for each one.</p>
<p>In this case you can use a more flexible approach. The function
<code>pdf</code> creates a new pdf device. You can control the size and
resolution using the arguments to this function.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pdf</span><span class="op">(</span><span class="st">"Life_Exp_vs_time.pdf"</span>, width<span class="op">=</span><span class="fl">12</span>, height<span class="op">=</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data<span class="op">=</span><span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">lifeExp</span>, colour<span class="op">=</span><span class="va">country</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># You then have to make sure to turn off the pdf device!</span></span>
<span></span>
<span><span class="fu">dev.off</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Open up this document and have a look.</p>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1<a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<p>Rewrite your ‘pdf’ command to print a second page in the pdf, showing
a facet plot (hint: use <code>facet_grid</code>) of the same data with
one panel per continent.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to challenge 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pdf</span><span class="op">(</span><span class="st">"Life_Exp_vs_time.pdf"</span>, width <span class="op">=</span> <span class="fl">12</span>, height <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, colour <span class="op">=</span> <span class="va">country</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span>
<span><span class="va">p</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu">facet_grid</span><span class="op">(</span><span class="op">~</span><span class="va">continent</span><span class="op">)</span></span>
<span><span class="fu">dev.off</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>The commands <code>jpeg</code>, <code>png</code> etc. are used
similarly to produce documents in different formats.</p>
</section><section><h2 class="section-heading" id="writing-data">Writing data<a class="anchor" aria-label="anchor" href="#writing-data"></a>
<a class="anchor" aria-label="anchor" href="#writing-data"></a>
</h2>
<hr class="half-width">
<p>At some point, you’ll also want to write out data from R.</p>
<p>We can use the <code>write.table</code> function for this, which is
very similar to <code>read.table</code> from before.</p>
<p>Let’s create a data-cleaning script, for this analysis, we only want
to focus on the gapminder data for Australia:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aust_subset</span> <span class="op">&lt;-</span> <span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span> <span class="op">==</span> <span class="st">"Australia"</span>,<span class="op">]</span></span>
<span></span>
<span><span class="fu">write.table</span><span class="op">(</span><span class="va">aust_subset</span>,</span>
<span>  file<span class="op">=</span><span class="st">"cleaned-data/gapminder-aus.csv"</span>,</span>
<span>  sep<span class="op">=</span><span class="st">","</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>Let’s switch back to the shell to take a look at the data to make
sure it looks OK:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">head</span> cleaned-data/gapminder-aus.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>"country","year","pop","continent","lifeExp","gdpPercap"
"61","Australia",1952,8691212,"Oceania",69.12,10039.59564
"62","Australia",1957,9712569,"Oceania",70.33,10949.64959
"63","Australia",1962,10794968,"Oceania",70.93,12217.22686
"64","Australia",1967,11872264,"Oceania",71.1,14526.12465
"65","Australia",1972,13177000,"Oceania",71.93,16788.62948
"66","Australia",1977,14074100,"Oceania",73.49,18334.19751
"67","Australia",1982,15184200,"Oceania",74.74,19477.00928
"68","Australia",1987,16257249,"Oceania",76.32,21888.88903
"69","Australia",1992,17481977,"Oceania",77.56,23424.76683</code></pre>
</div>
<p>Hmm, that’s not quite what we wanted. Where did all these quotation
marks come from? Also the row numbers are meaningless.</p>
<p>Let’s look at the help file to work out how to change this
behaviour.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">write.table</span></span></code></pre>
</div>
<p>By default R will wrap character vectors with quotation marks when
writing out to file. It will also write out the row and column
names.</p>
<p>Let’s fix this:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write.table</span><span class="op">(</span></span>
<span>  <span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">country</span> <span class="op">==</span> <span class="st">"Australia"</span>,<span class="op">]</span>,</span>
<span>  file<span class="op">=</span><span class="st">"cleaned-data/gapminder-aus.csv"</span>,</span>
<span>  sep<span class="op">=</span><span class="st">","</span>, quote<span class="op">=</span><span class="cn">FALSE</span>, row.names<span class="op">=</span><span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>Now lets look at the data again using our shell skills:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">head</span> cleaned-data/gapminder-aus.csv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>country,year,pop,continent,lifeExp,gdpPercap
Australia,1952,8691212,Oceania,69.12,10039.59564
Australia,1957,9712569,Oceania,70.33,10949.64959
Australia,1962,10794968,Oceania,70.93,12217.22686
Australia,1967,11872264,Oceania,71.1,14526.12465
Australia,1972,13177000,Oceania,71.93,16788.62948
Australia,1977,14074100,Oceania,73.49,18334.19751
Australia,1982,15184200,Oceania,74.74,19477.00928
Australia,1987,16257249,Oceania,76.32,21888.88903
Australia,1992,17481977,Oceania,77.56,23424.76683</code></pre>
</div>
<p>That looks better!</p>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2<a class="anchor" aria-label="anchor" href="#challenge-2"></a>
</h3>
<div class="callout-content">
<p>Write a data-cleaning script file that subsets the gapminder data to
include only data points collected since 1990.</p>
<p>Use this script to write out the new subset to a file in the
<code>cleaned-data/</code> directory.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution to challenge 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write.table</span><span class="op">(</span></span>
<span>  <span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">1990</span>, <span class="op">]</span>,</span>
<span>  file <span class="op">=</span> <span class="st">"cleaned-data/gapminder-after1990.csv"</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">","</span>, quote <span class="op">=</span> <span class="cn">FALSE</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Save plots from RStudio using the ‘Export’ button.</li>
<li>Use <code>write.table</code> to save tabular data.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-17-github"><p>Content from <a href="17-github.html">Remotes in GitHub</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/17-github.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I share my changes with others on the web?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what remote repositories are and why they are useful.</li>
<li>Push to or pull from a remote repository.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Version control really comes into its own when we begin to
collaborate with other people. We already have most of the machinery we
need to do this; the only thing missing is to copy changes from one
repository to another.</p>
<p>Systems like Git allow us to move work between any two repositories.
In practice, though, it’s easiest to use one copy as a central hub, and
to keep it on the web rather than on someone’s laptop. Most programmers
use hosting services like <a href="https://github.com" class="external-link">GitHub</a>, <a href="https://bitbucket.org" class="external-link">Bitbucket</a> or <a href="https://gitlab.com/" class="external-link">GitLab</a> to hold those main copies; we’ll
explore the pros and cons of this in a <a href="13-hosting.html">later
episode</a>.</p>
<p>Let’s start by sharing the changes we’ve made to our current project
with the world. To this end we are going to create a <em>remote</em>
repository that will be linked to our <em>local</em> repository.</p>
<section><h2 class="section-heading" id="create-a-remote-repository">1. Create a remote repository<a class="anchor" aria-label="anchor" href="#create-a-remote-repository"></a>
<a class="anchor" aria-label="anchor" href="#create-a-remote-repository"></a>
</h2>
<hr class="half-width">
<p>Log in to <a href="https://github.com" class="external-link">GitHub</a>, then click on the
icon in the top right corner to create a new repository called
<code>planets</code>:</p>
<figure><img src="fig/github-create-repo-01.png" alt='The first step in creating a repository on GitHub: clicking the "create new" button' class="figure mx-auto d-block"></figure><p>Name your repository “planets” and then click “Create
Repository”.</p>
<p>Note: Since this repository will be connected to a local repository,
it needs to be empty. Leave “Initialize this repository with a README”
unchecked, and keep “None” as options for both “Add .gitignore” and “Add
a license.” See the “GitHub License and README files” exercise below for
a full explanation of why the repository needs to be empty.</p>
<figure><img src="fig/github-create-repo-02.png" alt="The second step in creating a repository on GitHub: filling out the new repository form to provide the repository name, and specify that neither a readme nor a license should be created" class="figure mx-auto d-block"></figure><p>As soon as the repository is created, GitHub displays a page with a
URL and some information on how to configure your local repository:</p>
<figure><img src="fig/github-create-repo-03.png" alt="The summary page displayed by GitHub after a new repository has been created. It contains instructions for configuring the new GitHub repository as a git remote" class="figure mx-auto d-block"></figure><p>This effectively does the following on GitHub’s servers:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> mkdir planets</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> cd planets</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="ex">$</span> git init</span></code></pre>
</div>
<p>If you remember back to the earlier <a href="04-changes.html">episode</a> where we added and committed our
earlier work on <code>mars.txt</code>, we had a diagram of the local
repository which looked like this:</p>
<figure><img src="fig/git-staging-area.svg" alt='A diagram showing how "git add" registers changes in the staging area, while "git commit" moves changes from the staging area to the repository' class="figure mx-auto d-block"></figure><p>Now that we have two repositories, we need a diagram like this:</p>
<figure><img src="fig/git-freshly-made-github-repo.svg" alt='A diagram illustrating how the GitHub "planets" repository is also a git repository like our local repository, but that it is currently empty' class="figure mx-auto d-block"></figure><p>Note that our local repository still contains our earlier work on
<code>mars.txt</code>, but the remote repository on GitHub appears empty
as it doesn’t contain any files yet.</p>
</section><section><h2 class="section-heading" id="connect-local-to-remote-repository">2. Connect local to remote repository<a class="anchor" aria-label="anchor" href="#connect-local-to-remote-repository"></a>
<a class="anchor" aria-label="anchor" href="#connect-local-to-remote-repository"></a>
</h2>
<hr class="half-width">
<p>Now we connect the two repositories. We do this by making the GitHub
repository a <a href="reference.html#remote">remote</a> for the local
repository. The home page of the repository on GitHub includes the URL
string we need to identify it:</p>
<figure><img src="fig/github-find-repo-string.png" alt="Clicking the &quot;Copy to Clipboard&quot; button on GitHub to obtain the repository's URL" class="figure mx-auto d-block"></figure><p>Click on the ‘SSH’ link to change the <a href="reference.html#protocol">protocol</a> from HTTPS to SSH.</p>
<div id="https-vs.-ssh" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="https-vs.-ssh" class="callout-inner">
<h3 class="callout-title">HTTPS vs. SSH<a class="anchor" aria-label="anchor" href="#https-vs.-ssh"></a>
</h3>
<div class="callout-content">
<p>We use SSH here because, while it requires some additional
configuration, it is a security protocol widely used by many
applications. The steps below describe SSH at a minimum level for
GitHub.</p>
</div>
</div>
</div>
<figure><img src="fig/github-change-repo-string.png" alt='A screenshot showing that clicking on "SSH" will make GitHub provide the SSH URL for a repository instead of the HTTPS URL' class="figure mx-auto d-block"></figure><p>Copy that URL from the browser, go into the local
<code>planets</code> repository, and run this command:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> git remote add origin git@github.com:vlad/planets.git</span></code></pre>
</div>
<p>Make sure to use the URL for your repository rather than Vlad’s: the
only difference should be your username instead of
<code>vlad</code>.</p>
<p><code>origin</code> is a local name used to refer to the remote
repository. It could be called anything, but <code>origin</code> is a
convention that is often used by default in git and GitHub, so it’s
helpful to stick with this unless there’s a reason not to.</p>
<p>We can check that the command has worked by running
<code>git remote -v</code>:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> git remote <span class="at">-v</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>origin   git@github.com:vlad/planets.git (fetch)
origin   git@github.com:vlad/planets.git (push)</code></pre>
</div>
<p>We’ll discuss remotes in more detail in the next episode, while
talking about how they might be used for collaboration.</p>
</section><section><h2 class="section-heading" id="ssh-background-and-setup">3. SSH Background and Setup<a class="anchor" aria-label="anchor" href="#ssh-background-and-setup"></a>
<a class="anchor" aria-label="anchor" href="#ssh-background-and-setup"></a>
</h2>
<hr class="half-width">
<p>Before Dracula can connect to a remote repository, he needs to set up
a way for his computer to authenticate with GitHub so it knows it’s him
trying to connect to his remote repository.</p>
<p>We are going to set up the method that is commonly used by many
different services to authenticate access on the command line. This
method is called Secure Shell Protocol (SSH). SSH is a cryptographic
network protocol that allows secure communication between computers
using an otherwise insecure network.</p>
<p>SSH uses what is called a key pair. This is two keys that work
together to validate access. One key is publicly known and called the
public key, and the other key called the private key is kept private.
Very descriptive names.</p>
<p>You can think of the public key as a padlock, and only you have the
key (the private key) to open it. You use the public key where you want
a secure method of communication, such as your GitHub account. You give
this padlock, or public key, to GitHub and say “lock the communications
to my account with this so that only computers that have my private key
can unlock communications and send git commands as my GitHub
account.”</p>
<p>What we will do now is the minimum required to set up the SSH keys
and add the public key to a GitHub account.</p>
<div id="advanced-ssh" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="advanced-ssh" class="callout-inner">
<h3 class="callout-title">Advanced SSH<a class="anchor" aria-label="anchor" href="#advanced-ssh"></a>
</h3>
<div class="callout-content">
<p>A supplemental episode in this lesson discusses SSH and key pairs in
more depth and detail.</p>
</div>
</div>
</div>
<p>The first thing we are going to do is check if this has already been
done on the computer you’re on. Because generally speaking, this setup
only needs to happen once and then you can forget about it.</p>
<div id="keeping-your-keys-secure" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="keeping-your-keys-secure" class="callout-inner">
<h3 class="callout-title">Keeping your keys secure<a class="anchor" aria-label="anchor" href="#keeping-your-keys-secure"></a>
</h3>
<div class="callout-content">
<p>You shouldn’t really forget about your SSH keys, since they keep your
account secure. It’s good practice to audit your secure shell keys every
so often. Especially if you are using multiple computers to access your
account.</p>
</div>
</div>
</div>
<p>We will run the list command to check what key pairs already exist on
your computer.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-al</span> ~/.ssh</span></code></pre>
</div>
<p>Your output is going to look a little different depending on whether
or not SSH has ever been set up on the computer you are using.</p>
<p>Dracula has not set up SSH on his computer, so his output is</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ls: cannot access '/c/Users/Vlad Dracula/.ssh': No such file or directory</code></pre>
</div>
<p>If SSH has been set up on the computer you’re using, the public and
private key pairs will be listed. The file names are either
<code>id_ed25519</code>/<code>id_ed25519.pub</code> or
<code>id_rsa</code>/<code>id_rsa.pub</code> depending on how the key
pairs were set up.<br>
Since they don’t exist on Dracula’s computer, he uses this command to
create them.</p>
<div class="section level3">
<h3 id="create-an-ssh-key-pair">3.1 Create an SSH key pair<a class="anchor" aria-label="anchor" href="#create-an-ssh-key-pair"></a>
</h3>
<p>To create an SSH key pair Vlad uses this command, where the
<code>-t</code> option specifies which type of algorithm to use and
<code>-C</code> attaches a comment to the key (here, Vlad’s email):</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> ssh-keygen <span class="at">-t</span> ed25519 <span class="at">-C</span> <span class="st">"vlad@tran.sylvan.ia"</span></span></code></pre>
</div>
<p>If you are using a legacy system that doesn’t support the Ed25519
algorithm, use:
<code>$ ssh-keygen -t rsa -b 4096 -C "your_email@example.com"</code></p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Generating public/private ed25519 key pair.
Enter file in which to save the key (/c/Users/Vlad Dracula/.ssh/id_ed25519):</code></pre>
</div>
<p>We want to use the default file, so just press <kbd>Enter</kbd>.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Created directory '/c/Users/Vlad Dracula/.ssh'.
Enter passphrase (empty for no passphrase):</code></pre>
</div>
<p>Now, it is prompting Dracula for a passphrase. Since he is using his
lab’s laptop that other people sometimes have access to, he wants to
create a passphrase. Be sure to use something memorable or save your
passphrase somewhere, as there is no “reset my password” option. Note
that, when typing a passphrase on a terminal, there won’t be any visual
feedback of your typing. This is normal: your passphrase will be
recorded even if you see nothing changing on your screen.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Enter same passphrase again:</code></pre>
</div>
<p>After entering the same passphrase a second time, we receive the
confirmation</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Your identification has been saved in /c/Users/Vlad Dracula/.ssh/id_ed25519
Your public key has been saved in /c/Users/Vlad Dracula/.ssh/id_ed25519.pub
The key fingerprint is:
SHA256:SMSPIStNyA00KPxuYu94KpZgRAYjgt9g4BA4kFy3g1o vlad@tran.sylvan.ia
The key's randomart image is:
+--[ED25519 256]--+
|^B== o.          |
|%*=.*.+          |
|+=.E =.+         |
| .=.+.o..        |
|....  . S        |
|.+ o             |
|+ =              |
|.o.o             |
|oo+.             |
+----[SHA256]-----+</code></pre>
</div>
<p>The “identification” is actually the private key. You should never
share it. The public key is appropriately named. The “key fingerprint”
is a shorter version of a public key.</p>
<p>Now that we have generated the SSH keys, we will find the SSH files
when we check.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-al</span> ~/.ssh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>drwxr-xr-x 1 Vlad Dracula 197121   0 Jul 16 14:48 ./
drwxr-xr-x 1 Vlad Dracula 197121   0 Jul 16 14:48 ../
-rw-r--r-- 1 Vlad Dracula 197121 419 Jul 16 14:48 id_ed25519
-rw-r--r-- 1 Vlad Dracula 197121 106 Jul 16 14:48 id_ed25519.pub</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="copy-the-public-key-to-github">3.2 Copy the public key to GitHub<a class="anchor" aria-label="anchor" href="#copy-the-public-key-to-github"></a>
</h3>
<p>Now we have a SSH key pair and we can run this command to check if
GitHub can read our authentication.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">ssh</span> <span class="at">-T</span> git@github.com</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The authenticity of host 'github.com (192.30.255.112)' can't be established.
RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.
This key is not known by any other names
Are you sure you want to continue connecting (yes/no/[fingerprint])? y
Please type 'yes', 'no' or the fingerprint: yes
Warning: Permanently added 'github.com' (RSA) to the list of known hosts.
git@github.com: Permission denied (publickey).</code></pre>
</div>
<p>Right, we forgot that we need to give GitHub our public key!</p>
<p>First, we need to copy the public key. Be sure to include the
<code>.pub</code> at the end, otherwise you’re looking at the private
key.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">cat</span> ~/.ssh/id_ed25519.pub</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIDmRA3d51X0uu9wXek559gfn6UFNF69yZjChyBIU2qKI vlad@tran.sylvan.ia</code></pre>
</div>
<p>Now, going to GitHub.com, click on your profile icon in the top right
corner to get the drop-down menu. Click “Settings,” then on the settings
page, click “SSH and GPG keys,” on the left side “Account settings”
menu. Click the “New SSH key” button on the right side. Now, you can add
the title (Dracula uses the title “Vlad’s Lab Laptop” so he can remember
where the original key pair files are located), paste your SSH key into
the field, and click the “Add SSH key” to complete the setup.</p>
<p>Now that we’ve set that up, let’s check our authentication again from
the command line.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> ssh <span class="at">-T</span> git@github.com</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Hi Vlad! You've successfully authenticated, but GitHub does not provide shell access.</code></pre>
</div>
<p>Good! This output confirms that the SSH key works as intended. We are
now ready to push our work to the remote repository.</p>
</div>
</section><section><h2 class="section-heading" id="push-local-changes-to-a-remote">4. Push local changes to a remote<a class="anchor" aria-label="anchor" href="#push-local-changes-to-a-remote"></a>
<a class="anchor" aria-label="anchor" href="#push-local-changes-to-a-remote"></a>
</h2>
<hr class="half-width">
<p>Now that authentication is setup, we can return to the remote. This
command will push the changes from our local repository to the
repository on GitHub:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> git push origin main</span></code></pre>
</div>
<p>Since Dracula set up a passphrase, it will prompt him for it. If you
completed advanced settings for your authentication, it will not prompt
for a passphrase.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Enumerating objects: 16, done.
Counting objects: 100% (16/16), done.
Delta compression using up to 8 threads.
Compressing objects: 100% (11/11), done.
Writing objects: 100% (16/16), 1.45 KiB | 372.00 KiB/s, done.
Total 16 (delta 2), reused 0 (delta 0)
remote: Resolving deltas: 100% (2/2), done.
To https://github.com/vlad/planets.git
 * [new branch]      main -&gt; main</code></pre>
</div>
<div id="proxy" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="proxy" class="callout-inner">
<h3 class="callout-title">Proxy<a class="anchor" aria-label="anchor" href="#proxy"></a>
</h3>
<div class="callout-content">
<p>If the network you are connected to uses a proxy, there is a chance
that your last command failed with “Could not resolve hostname” as the
error message. To solve this issue, you need to tell Git about the
proxy:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> http.proxy http://user:password@proxy.url</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> https.proxy https://user:password@proxy.url</span></code></pre>
</div>
<p>When you connect to another network that doesn’t use a proxy, you
will need to tell Git to disable the proxy using:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> <span class="at">--unset</span> http.proxy</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> <span class="at">--unset</span> https.proxy</span></code></pre>
</div>
</div>
</div>
</div>
<div id="password-managers" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="password-managers" class="callout-inner">
<h3 class="callout-title">Password Managers<a class="anchor" aria-label="anchor" href="#password-managers"></a>
</h3>
<div class="callout-content">
<p>If your operating system has a password manager configured,
<code>git push</code> will try to use it when it needs your username and
password. For example, this is the default behavior for Git Bash on
Windows. If you want to type your username and password at the terminal
instead of using a password manager, type:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> unset SSH_ASKPASS</span></code></pre>
</div>
<p>in the terminal, before you run <code>git push</code>. Despite the
name, <a href="https://git-scm.com/docs/gitcredentials#_requesting_credentials" class="external-link">Git
uses <code>SSH_ASKPASS</code> for all credential entry</a>, so you may
want to unset <code>SSH_ASKPASS</code> whether you are using Git via SSH
or https.</p>
<p>You may also want to add <code>unset SSH_ASKPASS</code> at the end of
your <code>~/.bashrc</code> to make Git default to using the terminal
for usernames and passwords.</p>
</div>
</div>
</div>
<p>Our local and remote repositories are now in this state:</p>
<figure><img src="fig/github-repo-after-first-push.svg" alt='A diagram showing how "git push origin" will push changes from the local repository to the remote, making the remote repository an exact copy of the local repository.' class="figure mx-auto d-block"></figure><div id="the--u-flag" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the--u-flag" class="callout-inner">
<h3 class="callout-title">The ‘-u’ Flag<a class="anchor" aria-label="anchor" href="#the--u-flag"></a>
</h3>
<div class="callout-content">
<p>You may see a <code>-u</code> option used with <code>git push</code>
in some documentation. This option is synonymous with the
<code>--set-upstream-to</code> option for the <code>git branch</code>
command, and is used to associate the current branch with a remote
branch so that the <code>git pull</code> command can be used without any
arguments. To do this, simply use <code>git push -u origin main</code>
once the remote has been set up.</p>
</div>
</div>
</div>
<p>We can pull changes from the remote repository to the local one as
well:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> git pull origin main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>From https://github.com/vlad/planets
 * branch            main     -&gt; FETCH_HEAD
Already up-to-date.</code></pre>
</div>
<p>Pulling has no effect in this case because the two repositories are
already synchronized. If someone else had pushed some changes to the
repository on GitHub, though, this command would download them to our
local repository.</p>
<div id="github-gui" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="github-gui" class="callout-inner">
<h3 class="callout-title">GitHub GUI<a class="anchor" aria-label="anchor" href="#github-gui"></a>
</h3>
<div class="callout-content">
<p>Browse to your <code>planets</code> repository on GitHub. Underneath
the Code button, find and click on the text that says “XX commits”
(where “XX” is some number). Hover over, and click on, the three buttons
to the right of each commit. What information can you gather/explore
from these buttons? How would you get that same information in the
shell?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>The left-most button (with the picture of a clipboard) copies the
full identifier of the commit to the clipboard. In the shell,
<code>git log</code> will show you the full commit identifier for each
commit.</p>
<p>When you click on the middle button, you’ll see all of the changes
that were made in that particular commit. Green shaded lines indicate
additions and red ones removals. In the shell we can do the same thing
with <code>git diff</code>. In particular,
<code>git diff ID1..ID2</code> where ID1 and ID2 are commit identifiers
(e.g. <code>git diff a3bf1e5..041e637</code>) will show the differences
between those two commits.</p>
<p>The right-most button lets you view all of the files in the
repository at the time of that commit. To do this in the shell, we’d
need to checkout the repository at that particular time. We can do this
with <code>git checkout ID</code> where ID is the identifier of the
commit we want to look at. If we do this, we need to remember to put the
repository back to the right state afterwards!</p>
</div>
</div>
</div>
</div>
<div id="uploading-files-directly-in-github-browser" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="uploading-files-directly-in-github-browser" class="callout-inner">
<h3 class="callout-title">Uploading files directly in GitHub browser<a class="anchor" aria-label="anchor" href="#uploading-files-directly-in-github-browser"></a>
</h3>
<div class="callout-content">
<p>Github also allows you to skip the command line and upload files
directly to your repository without having to leave the browser. There
are two options. First you can click the “Upload files” button in the
toolbar at the top of the file tree. Or, you can drag and drop files
from your desktop onto the file tree. You can read more about this <a href="https://help.github.com/articles/adding-a-file-to-a-repository/" class="external-link">on
this GitHub page</a>.</p>
</div>
</div>
</div>
<div id="github-timestamp" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="github-timestamp" class="callout-inner">
<h3 class="callout-title">GitHub Timestamp<a class="anchor" aria-label="anchor" href="#github-timestamp"></a>
</h3>
<div class="callout-content">
<p>Create a remote repository on GitHub. Push the contents of your local
repository to the remote. Make changes to your local repository and push
these changes. Go to the repo you just created on GitHub and check the
<a href="reference.html#timestamp">timestamps</a> of the files. How does
GitHub record times, and why?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>GitHub displays timestamps in a human readable relative format
(i.e. “22 hours ago” or “three weeks ago”). However, if you hover over
the timestamp, you can see the exact time at which the last change to
the file occurred.</p>
</div>
</div>
</div>
</div>
<div id="push-vs.-commit" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="push-vs.-commit" class="callout-inner">
<h3 class="callout-title">Push vs. Commit<a class="anchor" aria-label="anchor" href="#push-vs.-commit"></a>
</h3>
<div class="callout-content">
<p>In this episode, we introduced the “git push” command. How is “git
push” different from “git commit”?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>When we push changes, we’re interacting with a remote repository to
update it with the changes we’ve made locally (often this corresponds to
sharing the changes we’ve made with others). Commit only updates your
local repository.</p>
</div>
</div>
</div>
</div>
<div id="github-license-and-readme-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="github-license-and-readme-files" class="callout-inner">
<h3 class="callout-title">GitHub License and README files<a class="anchor" aria-label="anchor" href="#github-license-and-readme-files"></a>
</h3>
<div class="callout-content">
<p>In this episode we learned about creating a remote repository on
GitHub, but when you initialized your GitHub repo, you didn’t add a
README.md or a license file. If you had, what do you think would have
happened when you tried to link your local and remote repositories?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>In this case, we’d see a merge conflict due to unrelated histories.
When GitHub creates a README.md file, it performs a commit in the remote
repository. When you try to pull the remote repository to your local
repository, Git detects that they have histories that do not share a
common origin and refuses to merge.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">$</span> git pull origin main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>warning: no common commits
remote: Enumerating objects: 3, done.
remote: Counting objects: 100% (3/3), done.
remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (3/3), done.
From https://github.com/vlad/planets
 * branch            main     -&gt; FETCH_HEAD
 * [new branch]      main     -&gt; origin/main
fatal: refusing to merge unrelated histories</code></pre>
</div>
<p>You can force git to merge the two repositories with the option
<code>--allow-unrelated-histories</code>. Be careful when you use this
option and carefully examine the contents of local and remote
repositories before merging.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">$</span> git pull <span class="at">--allow-unrelated-histories</span> origin main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>From https://github.com/vlad/planets
 * branch            main     -&gt; FETCH_HEAD
Merge made by the 'recursive' strategy.
README.md | 1 +
1 file changed, 1 insertion(+)
create mode 100644 README.md</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>A local Git repository can be connected to one or more remote
repositories.</li>
<li>Use the SSH protocol to connect to remote repositories.</li>
<li>
<code>git push</code> copies changes from a local repository to a
remote repository.</li>
<li>
<code>git pull</code> copies changes from a remote repository to a
local repository.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-18-collab"><p>Content from <a href="18-collab.html">Collaborating</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/18-collab.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I use version control to collaborate with other people?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Clone a remote repository.</li>
<li>Collaborate by pushing to a common repository.</li>
<li>Describe the basic collaborative workflow.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>For the next step, get into pairs. One person will be the “Owner” and
the other will be the “Collaborator”. The goal is that the Collaborator
add changes into the Owner’s repository. We will switch roles at the
end, so both persons will play Owner and Collaborator.</p>
<div id="practicing-by-yourself" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="practicing-by-yourself" class="callout-inner">
<h3 class="callout-title">Practicing By Yourself<a class="anchor" aria-label="anchor" href="#practicing-by-yourself"></a>
</h3>
<div class="callout-content">
<p>If you’re working through this lesson on your own, you can carry on
by opening a second terminal window. This window will represent your
partner, working on another computer. You won’t need to give anyone
access on GitHub, because both ‘partners’ are you.</p>
</div>
</div>
</div>
<p>The Owner needs to give the Collaborator access. In your repository
page on GitHub, click the “Settings” button on the right, select
“Collaborators”, click “Add people”, and then enter your partner’s
username.</p>
<figure><img src="fig/github-add-collaborators.png" alt='A screenshot of the GitHub Collaborators settings page, which is accessed by clicking "Settings" then "Collaborators"' class="figure mx-auto d-block"></figure><p>To accept access to the Owner’s repo, the Collaborator needs to go to
<a href="https://github.com/notifications" class="external-link">https://github.com/notifications</a>
or check for email notification. Once there she can accept access to the
Owner’s repo.</p>
<p>Next, the Collaborator needs to download a copy of the Owner’s
repository to her machine. This is called “cloning a repo”.</p>
<p>The Collaborator doesn’t want to overwrite her own version of
<code>planets.git</code>, so needs to clone the Owner’s repository to a
different location than her own repository with the same name.</p>
<p>To clone the Owner’s repo into her <code>Desktop</code> folder, the
Collaborator enters:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git clone git@github.com:vlad/planets.git ~/Desktop/vlad-planets</span></code></pre>
</div>
<p>Replace ‘vlad’ with the Owner’s username.</p>
<p>If you choose to clone without the clone path
(<code>~/Desktop/vlad-planets</code>) specified at the end, you will
clone inside your own planets folder! Make sure to navigate to the
<code>Desktop</code> folder first.</p>
<figure><img src="fig/github-collaboration.svg" alt='A diagram showing that "git clone" can create a copy of a remote GitHub repository, allowing a second person to create their own local repository that they can make changes to.' class="figure mx-auto d-block"></figure><p>The Collaborator can now make a change in her clone of the Owner’s
repository, exactly the same way as we’ve been doing before:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/vlad-planets</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="ex">$</span> nano pluto.txt</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="ex">$</span> cat pluto.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>It is so a planet!</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> git add pluto.txt</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add notes about Pluto"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> 1 file changed, 1 insertion(+)
 create mode 100644 pluto.txt</code></pre>
</div>
<p>Then push the change to the <em>Owner’s repository</em> on
GitHub:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> git push origin main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Enumerating objects: 4, done.
Counting objects: 4, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 306 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
To https://github.com/vlad/planets.git
   9272da5..29aba7c  main -&gt; main</code></pre>
</div>
<p>Note that we didn’t have to create a remote called
<code>origin</code>: Git uses this name by default when we clone a
repository. (This is why <code>origin</code> was a sensible choice
earlier when we were setting up remotes by hand.)</p>
<p>Take a look at the Owner’s repository on GitHub again, and you should
be able to see the new commit made by the Collaborator. You may need to
refresh your browser to see the new commit.</p>
<div id="some-more-about-remotes" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="some-more-about-remotes" class="callout-inner">
<h3 class="callout-title">Some more about remotes<a class="anchor" aria-label="anchor" href="#some-more-about-remotes"></a>
</h3>
<div class="callout-content">
<p>In this episode and the previous one, our local repository has had a
single “remote”, called <code>origin</code>. A remote is a copy of the
repository that is hosted somewhere else, that we can push to and pull
from, and there’s no reason that you have to work with only one. For
example, on some large projects you might have your own copy in your own
GitHub account (you’d probably call this <code>origin</code>) and also
the main “upstream” project repository (let’s call this
<code>upstream</code> for the sake of examples). You would pull from
<code>upstream</code> from time to time to get the latest updates that
other people have committed.</p>
<p>Remember that the name you give to a remote only exists locally. It’s
an alias that you choose - whether <code>origin</code>, or
<code>upstream</code>, or <code>fred</code> - and not something
intrinstic to the remote repository.</p>
<p>The <code>git remote</code> family of commands is used to set up and
alter the remotes associated with a repository. Here are some of the
most useful ones:</p>
<ul>
<li>
<code>git remote -v</code> lists all the remotes that are configured
(we already used this in the last episode)</li>
<li>
<code>git remote add [name] [url]</code> is used to add a new
remote</li>
<li>
<code>git remote remove [name]</code> removes a remote. Note that it
doesn’t affect the remote repository at all - it just removes the link
to it from the local repo.</li>
<li>
<code>git remote set-url [name] [newurl]</code> changes the URL that
is associated with the remote. This is useful if it has moved, e.g. to a
different GitHub account, or from GitHub to a different hosting service.
Or, if we made a typo when adding it!</li>
<li>
<code>git remote rename [oldname] [newname]</code> changes the local
alias by which a remote is known - its name. For example, one could use
this to change <code>upstream</code> to <code>fred</code>.</li>
</ul>
</div>
</div>
</div>
<p>To download the Collaborator’s changes from GitHub, the Owner now
enters:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> git pull origin main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>remote: Enumerating objects: 4, done.
remote: Counting objects: 100% (4/4), done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 3 (delta 0), reused 3 (delta 0), pack-reused 0
Unpacking objects: 100% (3/3), done.
From https://github.com/vlad/planets
 * branch            main     -&gt; FETCH_HEAD
   9272da5..29aba7c  main     -&gt; origin/main
Updating 9272da5..29aba7c
Fast-forward
 pluto.txt | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 pluto.txt</code></pre>
</div>
<p>Now the three repositories (Owner’s local, Collaborator’s local, and
Owner’s on GitHub) are back in sync.</p>
<div id="a-basic-collaborative-workflow" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="a-basic-collaborative-workflow" class="callout-inner">
<h3 class="callout-title">A Basic Collaborative Workflow<a class="anchor" aria-label="anchor" href="#a-basic-collaborative-workflow"></a>
</h3>
<div class="callout-content">
<p>In practice, it is good to be sure that you have an updated version
of the repository you are collaborating on, so you should
<code>git pull</code> before making our changes. The basic collaborative
workflow would be:</p>
<ul>
<li>update your local repo with <code>git pull origin main</code>,</li>
<li>make your changes and stage them with <code>git add</code>,</li>
<li>commit your changes with <code>git commit -m</code>, and</li>
<li>upload the changes to GitHub with
<code>git push origin main</code>
</li>
</ul>
<p>It is better to make many commits with smaller changes rather than of
one commit with massive changes: small commits are easier to read and
review.</p>
</div>
</div>
</div>
<div id="switch-roles-and-repeat" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="switch-roles-and-repeat" class="callout-inner">
<h3 class="callout-title">Switch Roles and Repeat<a class="anchor" aria-label="anchor" href="#switch-roles-and-repeat"></a>
</h3>
<div class="callout-content">
<p>Switch roles and repeat the whole process.</p>
</div>
</div>
</div>
<div id="review-changes" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="review-changes" class="callout-inner">
<h3 class="callout-title">Review Changes<a class="anchor" aria-label="anchor" href="#review-changes"></a>
</h3>
<div class="callout-content">
<p>The Owner pushed commits to the repository without giving any
information to the Collaborator. How can the Collaborator find out what
has changed with command line? And on GitHub?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>On the command line, the Collaborator can use
<code>git fetch origin main</code> to get the remote changes into the
local repository, but without merging them. Then by running
<code>git diff main origin/main</code> the Collaborator will see the
changes output in the terminal.</p>
<p>On GitHub, the Collaborator can go to the repository and click on
“commits” to view the most recent commits pushed to the repository.</p>
</div>
</div>
</div>
</div>
<div id="comment-changes-in-github" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="comment-changes-in-github" class="callout-inner">
<h3 class="callout-title">Comment Changes in GitHub<a class="anchor" aria-label="anchor" href="#comment-changes-in-github"></a>
</h3>
<div class="callout-content">
<p>The Collaborator has some questions about one line change made by the
Owner and has some suggestions to propose.</p>
<p>With GitHub, it is possible to comment on the diff of a commit. Over
the line of code to comment, a blue comment icon appears to open a
comment window.</p>
<p>The Collaborator posts her comments and suggestions using the GitHub
interface.</p>
</div>
</div>
</div>
<div id="version-history-backup-and-version-control" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="version-history-backup-and-version-control" class="callout-inner">
<h3 class="callout-title">Version History, Backup, and Version Control<a class="anchor" aria-label="anchor" href="#version-history-backup-and-version-control"></a>
</h3>
<div class="callout-content">
<p>Some backup software can keep a history of the versions of your
files. They also allows you to recover specific versions. How is this
functionality different from version control? What are some of the
benefits of using version control, Git and GitHub?</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>
<code>git clone</code> copies a remote repository to create a local
repository with a remote called <code>origin</code> automatically set
up.</li>
</ul>
</div>
</div>
</div></section><section id="aio-19-conflict"><p>Content from <a href="19-conflict.html">Conflicts</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/19-conflict.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What do I do when my changes conflict with someone else’s?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what conflicts are and when they can occur.</li>
<li>Resolve conflicts resulting from a merge.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>As soon as people can work in parallel, they’ll likely step on each
other’s toes. This will even happen with a single person: if we are
working on a piece of software on both our laptop and a server in the
lab, we could make different changes to each copy. Version control helps
us manage these <a href="reference.html#conflict">conflicts</a> by
giving us tools to <a href="reference.html#resolve">resolve</a>
overlapping changes.</p>
<p>To see how we can resolve conflicts, we must first create one. The
file <code>mars.txt</code> currently looks like this in both partners’
copies of our <code>planets</code> repository:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> cat mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity</code></pre>
</div>
<p>Let’s add a line to the collaborator’s copy only:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> nano mars.txt</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">$</span> cat mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity
This line added to Wolfman's copy</code></pre>
</div>
<p>and then push the change to GitHub:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> git add mars.txt</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add a line in our home copy"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main 5ae9631] Add a line in our home copy
 1 file changed, 1 insertion(+)</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> git push origin main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 8 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 331 bytes | 331.00 KiB/s, done.
Total 3 (delta 2), reused 0 (delta 0)
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To https://github.com/vlad/planets.git
   29aba7c..dabb4c8  main -&gt; main</code></pre>
</div>
<p>Now let’s have the owner make a different change to their copy
<em>without</em> updating from GitHub:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> nano mars.txt</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="ex">$</span> cat mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity
We added a different line in the other copy</code></pre>
</div>
<p>We can commit the change locally:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> git add mars.txt</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add a line in my copy"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main 07ebc69] Add a line in my copy
 1 file changed, 1 insertion(+)</code></pre>
</div>
<p>but Git won’t let us push it to GitHub:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> git push origin main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>To https://github.com/vlad/planets.git
 ! [rejected]        main -&gt; main (fetch first)
error: failed to push some refs to 'https://github.com/vlad/planets.git'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: (e.g., 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.</code></pre>
</div>
<figure><img src="fig/conflict.svg" alt="A diagram showing a conflict that might occur when two sets of independent changes are merged" class="figure mx-auto d-block"></figure><p>Git rejects the push because it detects that the remote repository
has new updates that have not been incorporated into the local branch.
What we have to do is pull the changes from GitHub, <a href="reference.html#merge">merge</a> them into the copy we’re currently
working in, and then push that. Let’s start by pulling:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> git pull origin main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>remote: Enumerating objects: 5, done.
remote: Counting objects: 100% (5/5), done.
remote: Compressing objects: 100% (1/1), done.
remote: Total 3 (delta 2), reused 3 (delta 2), pack-reused 0
Unpacking objects: 100% (3/3), done.
From https://github.com/vlad/planets
 * branch            main     -&gt; FETCH_HEAD
    29aba7c..dabb4c8  main     -&gt; origin/main
Auto-merging mars.txt
CONFLICT (content): Merge conflict in mars.txt
Automatic merge failed; fix conflicts and then commit the result.</code></pre>
</div>
<p>The <code>git pull</code> command updates the local repository to
include those changes already included in the remote repository. After
the changes from remote branch have been fetched, Git detects that
changes made to the local copy overlap with those made to the remote
repository, and therefore refuses to merge the two versions to stop us
from trampling on our previous work. The conflict is marked in in the
affected file:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> cat mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
We added a different line in the other copy
=======
This line added to Wolfman's copy
&gt;&gt;&gt;&gt;&gt;&gt;&gt; dabb4c8c450e8475aee9b14b4383acc99f42af1d</code></pre>
</div>
<p>Our change is preceded by
<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code>. Git has then inserted
<code>=======</code> as a separator between the conflicting changes and
marked the end of the content downloaded from GitHub with
<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>. (The string of letters and
digits after that marker identifies the commit we’ve just
downloaded.)</p>
<p>It is now up to us to edit this file to remove these markers and
reconcile the changes. We can do anything we want: keep the change made
in the local repository, keep the change made in the remote repository,
write something new to replace both, or get rid of the change entirely.
Let’s replace both so that the file looks like this:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> cat mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity
We removed the conflict on this line</code></pre>
</div>
<p>To finish merging, we add <code>mars.txt</code> to the changes being
made by the merge and then commit:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> git add mars.txt</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
All conflicts fixed but you are still merging.
  (use "git commit" to conclude merge)

Changes to be committed:

	modified:   mars.txt
</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Merge changes from GitHub"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main 2abf2b1] Merge changes from GitHub</code></pre>
</div>
<p>Now we can push our changes to GitHub:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> git push origin main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Enumerating objects: 10, done.
Counting objects: 100% (10/10), done.
Delta compression using up to 8 threads
Compressing objects: 100% (6/6), done.
Writing objects: 100% (6/6), 645 bytes | 645.00 KiB/s, done.
Total 6 (delta 4), reused 0 (delta 0)
remote: Resolving deltas: 100% (4/4), completed with 2 local objects.
To https://github.com/vlad/planets.git
   dabb4c8..2abf2b1  main -&gt; main</code></pre>
</div>
<p>Git keeps track of what we’ve merged with what, so we don’t have to
fix things by hand again when the collaborator who made the first change
pulls again:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">$</span> git pull origin main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>remote: Enumerating objects: 10, done.
remote: Counting objects: 100% (10/10), done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 6 (delta 4), reused 6 (delta 4), pack-reused 0
Unpacking objects: 100% (6/6), done.
From https://github.com/vlad/planets
 * branch            main     -&gt; FETCH_HEAD
    dabb4c8..2abf2b1  main     -&gt; origin/main
Updating dabb4c8..2abf2b1
Fast-forward
 mars.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)</code></pre>
</div>
<p>We get the merged file:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">$</span> cat mars.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cold and dry, but everything is my favorite color
The two moons may be a problem for Wolfman
But the Mummy will appreciate the lack of humidity
We removed the conflict on this line</code></pre>
</div>
<p>We don’t need to merge again because Git knows someone has already
done that.</p>
<p>Git’s ability to resolve conflicts is very useful, but conflict
resolution costs time and effort, and can introduce errors if conflicts
are not resolved correctly. If you find yourself resolving a lot of
conflicts in a project, consider these technical approaches to reducing
them:</p>
<ul>
<li>Pull from upstream more frequently, especially before starting new
work</li>
<li>Use topic branches to segregate work, merging to main when
complete</li>
<li>Make smaller more atomic commits</li>
<li>Push your work when it is done and encourage your team to do the
same to reduce work in progress and, by extension, the chance of having
conflicts</li>
<li>Where logically appropriate, break large files into smaller ones so
that it is less likely that two authors will alter the same file
simultaneously</li>
</ul>
<p>Conflicts can also be minimized with project management
strategies:</p>
<ul>
<li>Clarify who is responsible for what areas with your
collaborators</li>
<li>Discuss what order tasks should be carried out in with your
collaborators so that tasks expected to change the same lines won’t be
worked on simultaneously</li>
<li>If the conflicts are stylistic churn (e.g. tabs vs. spaces),
establish a project convention that is governing and use code style
tools (e.g. <code>htmltidy</code>, <code>perltidy</code>,
<code>rubocop</code>, etc.) to enforce, if necessary</li>
</ul>
<div id="solving-conflicts-that-you-create" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="solving-conflicts-that-you-create" class="callout-inner">
<h3 class="callout-title">Solving Conflicts that You Create<a class="anchor" aria-label="anchor" href="#solving-conflicts-that-you-create"></a>
</h3>
<div class="callout-content">
<p>Clone the repository created by your instructor. Add a new file to
it, and modify an existing file (your instructor will tell you which
one). When asked by your instructor, pull her changes from the
repository to create a conflict, then resolve it.</p>
</div>
</div>
</div>
<div id="conflicts-on-non-textual-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="conflicts-on-non-textual-files" class="callout-inner">
<h3 class="callout-title">Conflicts on Non-textual files<a class="anchor" aria-label="anchor" href="#conflicts-on-non-textual-files"></a>
</h3>
<div class="callout-content">
<p>What does Git do when there is a conflict in an image or some other
non-textual file that is stored in version control?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Let’s try it. Suppose Dracula takes a picture of Martian surface and
calls it <code>mars.jpg</code>.</p>
<p>If you do not have an image file of Mars available, you can create a
dummy binary file like this:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-c</span> 1024 /dev/urandom <span class="op">&gt;</span> mars.jpg</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-lh</span> mars.jpg</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>-rw-r--r-- 1 vlad 57095 1.0K Mar  8 20:24 mars.jpg</code></pre>
</div>
<p><code>ls</code> shows us that this created a 1-kilobyte file. It is
full of random bytes read from the special file,
<code>/dev/urandom</code>.</p>
<p>Now, suppose Dracula adds <code>mars.jpg</code> to his
repository:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">$</span> git add mars.jpg</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add picture of Martian surface"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main 8e4115c] Add picture of Martian surface
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 mars.jpg</code></pre>
</div>
<p>Suppose that Wolfman has added a similar picture in the meantime. His
is a picture of the Martian sky, but it is <em>also</em> called
<code>mars.jpg</code>. When Dracula tries to push, he gets a familiar
message:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="ex">$</span> git push origin main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>To https://github.com/vlad/planets.git
 ! [rejected]        main -&gt; main (fetch first)
error: failed to push some refs to 'https://github.com/vlad/planets.git'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: (e.g., 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.</code></pre>
</div>
<p>We’ve learned that we must pull first and resolve any conflicts:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="ex">$</span> git pull origin main</span></code></pre>
</div>
<p>When there is a conflict on an image or other binary file, git prints
a message like this:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$ git pull origin main
remote: Counting objects: 3, done.
remote: Compressing objects: 100% (3/3), done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From https://github.com/vlad/planets.git
 * branch            main     -&gt; FETCH_HEAD
   6a67967..439dc8c  main     -&gt; origin/main
warning: Cannot merge binary files: mars.jpg (HEAD vs. 439dc8c08869c342438f6dc4a2b615b05b93c76e)
Auto-merging mars.jpg
CONFLICT (add/add): Merge conflict in mars.jpg
Automatic merge failed; fix conflicts and then commit the result.</code></pre>
</div>
<p>The conflict message here is mostly the same as it was for
<code>mars.txt</code>, but there is one key additional line:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>warning: Cannot merge binary files: mars.jpg (HEAD vs. 439dc8c08869c342438f6dc4a2b615b05b93c76e)</code></pre>
</div>
<p>Git cannot automatically insert conflict markers into an image as it
does for text files. So, instead of editing the image file, we must
check out the version we want to keep. Then we can add and commit this
version.</p>
<p>On the key line above, Git has conveniently given us commit
identifiers for the two versions of <code>mars.jpg</code>. Our version
is <code>HEAD</code>, and Wolfman’s version is <code>439dc8c0...</code>.
If we want to use our version, we can use <code>git checkout</code>:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="ex">$</span> git checkout HEAD mars.jpg</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="ex">$</span> git add mars.jpg</span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Use image of surface instead of sky"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main 21032c3] Use image of surface instead of sky</code></pre>
</div>
<p>If instead we want to use Wolfman’s version, we can use
<code>git checkout</code> with Wolfman’s commit identifier,
<code>439dc8c0</code>:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> git checkout 439dc8c0 mars.jpg</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a><span class="ex">$</span> git add mars.jpg</span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Use image of sky instead of surface"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main da21b34] Use image of sky instead of surface</code></pre>
</div>
<p>We can also keep <em>both</em> images. The catch is that we cannot
keep them under the same name. But, we can check out each version in
succession and <em>rename</em> it, then add the renamed versions. First,
check out each image and rename it:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="ex">$</span> git checkout HEAD mars.jpg</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="ex">$</span> git mv mars.jpg mars-surface.jpg</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="ex">$</span> git checkout 439dc8c0 mars.jpg</span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a><span class="ex">$</span> mv mars.jpg mars-sky.jpg</span></code></pre>
</div>
<p>Then, remove the old <code>mars.jpg</code> and add the two new
files:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="ex">$</span> git rm mars.jpg</span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a><span class="ex">$</span> git add mars-surface.jpg</span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a><span class="ex">$</span> git add mars-sky.jpg</span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Use two images: surface and sky"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main 94ae08c] Use two images: surface and sky
 2 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 mars-sky.jpg
 rename mars.jpg =&gt; mars-surface.jpg (100%)</code></pre>
</div>
<p>Now both images of Mars are checked into the repository, and
<code>mars.jpg</code> no longer exists.</p>
</div>
</div>
</div>
</div>
<div id="a-typical-work-session" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="a-typical-work-session" class="callout-inner">
<h3 class="callout-title">A Typical Work Session<a class="anchor" aria-label="anchor" href="#a-typical-work-session"></a>
</h3>
<div class="callout-content">
<p>You sit down at your computer to work on a shared project that is
tracked in a remote Git repository. During your work session, you take
the following actions, but not in this order:</p>
<ul>
<li>
<em>Make changes</em> by appending the number <code>100</code> to a
text file <code>numbers.txt</code>
</li>
<li>
<em>Update remote</em> repository to match the local repository</li>
<li>
<em>Celebrate</em> your success with some fancy beverage(s)</li>
<li>
<em>Update local</em> repository to match the remote repository</li>
<li>
<em>Stage changes</em> to be committed</li>
<li>
<em>Commit changes</em> to the local repository</li>
</ul>
<p>In what order should you perform these actions to minimize the
chances of conflicts? Put the commands above in order in the
<em>action</em> column of the table below. When you have the order
right, see if you can write the corresponding commands in the
<em>command</em> column. A few steps are populated to get you
started.</p>
<table class="table">
<colgroup>
<col width="6%">
<col width="34%">
<col width="59%">
</colgroup>
<thead><tr class="header">
<th>order</th>
<th>action . . . . . . . . . .</th>
<th>command . . . . . . . . . .</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td></td>
<td><code>echo 100 &gt;&gt; numbers.txt</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>4</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>5</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>6</td>
<td>Celebrate!</td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<table class="table">
<colgroup>
<col width="6%">
<col width="34%">
<col width="59%">
</colgroup>
<thead><tr class="header">
<th>order</th>
<th>action . . . . . .</th>
<th>command . . . . . . . . . . . . . . . . . . .</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Update local</td>
<td><code>git pull origin main</code></td>
</tr>
<tr class="even">
<td>2</td>
<td>Make changes</td>
<td><code>echo 100 &gt;&gt; numbers.txt</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Stage changes</td>
<td><code>git add numbers.txt</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>Commit changes</td>
<td><code>git commit -m "Add 100 to numbers.txt"</code></td>
</tr>
<tr class="odd">
<td>5</td>
<td>Update remote</td>
<td><code>git push origin main</code></td>
</tr>
<tr class="even">
<td>6</td>
<td>Celebrate!</td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Conflicts occur when two or more people change the same lines of the
same file.</li>
<li>The version control system does not allow people to overwrite each
other’s changes blindly, but highlights conflicts so that they can be
resolved.</li>
</ul>
</div>
</div>
</div></section><section id="aio-20-dplyr"><p>Content from <a href="20-dplyr.html">Data Frame Manipulation with dplyr</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/20-dplyr.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I manipulate data frames without repeating myself?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>To be able to use the six main data frame manipulation ‘verbs’ with
pipes in <code>dplyr</code>.</li>
<li>To understand how <code>group_by()</code> and
<code>summarize()</code> can be combined to summarize datasets.</li>
<li>Be able to analyze a subset of data using logical filtering.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Manipulation of data frames means many things to many researchers: we
often select certain observations (rows) or variables (columns), we
often group the data by a certain variable(s), or we even calculate
summary statistics. We can do these operations using the normal base R
operations:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">gdpPercap</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Africa"</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2193.755</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">gdpPercap</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Americas"</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 7136.11</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">gapminder</span><span class="op">$</span><span class="va">gdpPercap</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Asia"</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 7902.15</code></pre>
</div>
<p>But this isn’t very <em>nice</em> because there is a fair bit of
repetition. Repeating yourself will cost you time, both now and later,
and potentially introduce some nasty bugs.</p>
<section><h2 class="section-heading" id="the-dplyr-package">The <code>dplyr</code> package<a class="anchor" aria-label="anchor" href="#the-dplyr-package"></a>
<a class="anchor" aria-label="anchor" href="#the-dplyr-package"></a>
</h2>
<hr class="half-width">
<p>Luckily, the <a href="https://cran.r-project.org/package=dplyr" class="external-link"><code>dplyr</code></a>
package provides a number of very useful functions for manipulating data
frames in a way that will reduce the above repetition, reduce the
probability of making errors, and probably even save you some typing. As
an added bonus, you might even find the <code>dplyr</code> grammar
easier to read.</p>
<div id="tip-tidyverse" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-tidyverse" class="callout-inner">
<h3 class="callout-title">Tip: Tidyverse<a class="anchor" aria-label="anchor" href="#tip-tidyverse"></a>
</h3>
<div class="callout-content">
<p><code>dplyr</code> package belongs to a broader family of opinionated
R packages designed for data science called the “Tidyverse”. These
packages are specifically designed to work harmoniously together. Some
of these packages will be covered along this course, but you can find
more complete information here: <a href="https://www.tidyverse.org/" class="external-link">https://www.tidyverse.org/</a>.</p>
</div>
</div>
</div>
<p>Here we’re going to cover 5 of the most commonly used functions as
well as using pipes (<code>%&gt;%</code>) to combine them.</p>
<ol style="list-style-type: decimal">
<li><code>select()</code></li>
<li><code>filter()</code></li>
<li><code>group_by()</code></li>
<li><code>summarize()</code></li>
<li><code>mutate()</code></li>
</ol>
<p>If you have have not installed this package earlier, please do
so:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">'dplyr'</span><span class="op">)</span></span></code></pre>
</div>
<p>Now let’s load the package:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="using-select">Using select()<a class="anchor" aria-label="anchor" href="#using-select"></a>
<a class="anchor" aria-label="anchor" href="#using-select"></a>
</h2>
<hr class="half-width">
<p>If, for example, we wanted to move forward with only a few of the
variables in our data frame we could use the <code>select()</code>
function. This will keep only the variables you select.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year_country_gdp</span> <span class="op">&lt;-</span> <span class="fu">select</span><span class="op">(</span><span class="va">gapminder</span>, <span class="va">year</span>, <span class="va">country</span>, <span class="va">gdpPercap</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="fig/13-dplyr-fig1.png" alt="Diagram illustrating use of select function to select two columns of a data frame" class="figure">
If we want to remove one column only from the <code>gapminder</code>
data, for example, removing the <code>continent</code> column.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smaller_gapminder_data</span> <span class="op">&lt;-</span> <span class="fu">select</span><span class="op">(</span><span class="va">gapminder</span>, <span class="op">-</span><span class="va">continent</span><span class="op">)</span></span></code></pre>
</div>
<p>If we open up <code>year_country_gdp</code> we’ll see that it only
contains the year, country and gdpPercap. Above we used ‘normal’
grammar, but the strengths of <code>dplyr</code> lie in combining
several functions using pipes. Since the pipes grammar is unlike
anything we’ve seen in R before, let’s repeat what we’ve done above
using pipes.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year_country_gdp</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="va">year</span>, <span class="va">country</span>, <span class="va">gdpPercap</span><span class="op">)</span></span></code></pre>
</div>
<p>To help you understand why we wrote that in that way, let’s walk
through it step by step. First we summon the gapminder data frame and
pass it on, using the pipe symbol <code>%&gt;%</code>, to the next step,
which is the <code>select()</code> function. In this case we don’t
specify which data object we use in the <code>select()</code> function
since in gets that from the previous pipe. <strong>Fun Fact</strong>:
There is a good chance you have encountered pipes before in the shell.
In R, a pipe symbol is <code>%&gt;%</code> while in the shell it is
<code>|</code> but the concept is the same!</p>
<div id="tip-renaming-data-frame-columns-in-dplyr" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-renaming-data-frame-columns-in-dplyr" class="callout-inner">
<h3 class="callout-title">Tip: Renaming data frame columns in dplyr<a class="anchor" aria-label="anchor" href="#tip-renaming-data-frame-columns-in-dplyr"></a>
</h3>
<div class="callout-content">
<p>In Chapter 4 we covered how you can rename columns with base R by
assigning a value to the output of the <code>names()</code> function.
Just like select, this is a bit cumbersome, but thankfully dplyr has a
<code>rename()</code> function.</p>
<p>Within a pipeline, the syntax is
<code>rename(new_name = old_name)</code>. For example, we may want to
rename the gdpPercap column name from our <code>select()</code>
statement above.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tidy_gdp</span> <span class="op">&lt;-</span> <span class="va">year_country_gdp</span> <span class="op">%&gt;%</span> <span class="fu">rename</span><span class="op">(</span>gdp_per_capita <span class="op">=</span> <span class="va">gdpPercap</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">tidy_gdp</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  year     country gdp_per_capita
1 1952 Afghanistan       779.4453
2 1957 Afghanistan       820.8530
3 1962 Afghanistan       853.1007
4 1967 Afghanistan       836.1971
5 1972 Afghanistan       739.9811
6 1977 Afghanistan       786.1134</code></pre>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="using-filter">Using filter()<a class="anchor" aria-label="anchor" href="#using-filter"></a>
<a class="anchor" aria-label="anchor" href="#using-filter"></a>
</h2>
<hr class="half-width">
<p>If we now want to move forward with the above, but only with European
countries, we can combine <code>select</code> and
<code>filter</code></p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year_country_gdp_euro</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">filter</span><span class="op">(</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Europe"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">year</span>, <span class="va">country</span>, <span class="va">gdpPercap</span><span class="op">)</span></span></code></pre>
</div>
<p>If we now want to show life expectancy of European countries but only
for a specific year (e.g., 2007), we can do as below.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">europe_lifeExp_2007</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Europe"</span>, <span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">country</span>, <span class="va">lifeExp</span><span class="op">)</span></span></code></pre>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1<a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<p>Write a single command (which can span multiple lines and includes
pipes) that will produce a data frame that has the African values for
<code>lifeExp</code>, <code>country</code> and <code>year</code>, but
not for other Continents. How many rows does your data frame have and
why?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to Challenge 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year_country_lifeExp_Africa</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>                           <span class="fu">filter</span><span class="op">(</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Africa"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                           <span class="fu">select</span><span class="op">(</span><span class="va">year</span>, <span class="va">country</span>, <span class="va">lifeExp</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>As with last time, first we pass the gapminder data frame to the
<code>filter()</code> function, then we pass the filtered version of the
gapminder data frame to the <code>select()</code> function.
<strong>Note:</strong> The order of operations is very important in this
case. If we used ‘select’ first, filter would not be able to find the
variable continent since we would have removed it in the previous
step.</p>
</section><section><h2 class="section-heading" id="using-group_by">Using group_by()<a class="anchor" aria-label="anchor" href="#using-group_by"></a>
<a class="anchor" aria-label="anchor" href="#using-group_by"></a>
</h2>
<hr class="half-width">
<p>Now, we were supposed to be reducing the error prone repetitiveness
of what can be done with base R, but up to now we haven’t done that
since we would have to repeat the above for each continent. Instead of
<code>filter()</code>, which will only pass observations that meet your
criteria (in the above: <code>continent=="Europe"</code>), we can use
<code>group_by()</code>, which will essentially use every unique
criteria that you could have used in filter.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	1704 obs. of  6 variables:
 $ country  : chr  "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...
 $ year     : int  1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
 $ pop      : num  8425333 9240934 10267083 11537966 13079460 ...
 $ continent: chr  "Asia" "Asia" "Asia" "Asia" ...
 $ lifeExp  : num  28.8 30.3 32 34 36.1 ...
 $ gdpPercap: num  779 821 853 836 740 ...</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gapminder</span> <span class="op">%&gt;%</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>gropd_df [1,704 × 6] (S3: grouped_df/tbl_df/tbl/data.frame)
 $ country  : chr [1:1704] "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...
 $ year     : int [1:1704] 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
 $ pop      : num [1:1704] 8425333 9240934 10267083 11537966 13079460 ...
 $ continent: chr [1:1704] "Asia" "Asia" "Asia" "Asia" ...
 $ lifeExp  : num [1:1704] 28.8 30.3 32 34 36.1 ...
 $ gdpPercap: num [1:1704] 779 821 853 836 740 ...
 - attr(*, "groups")= tibble [5 × 2] (S3: tbl_df/tbl/data.frame)
  ..$ continent: chr [1:5] "Africa" "Americas" "Asia" "Europe" ...
  ..$ .rows    : list&lt;int&gt; [1:5]
  .. ..$ : int [1:624] 25 26 27 28 29 30 31 32 33 34 ...
  .. ..$ : int [1:300] 49 50 51 52 53 54 55 56 57 58 ...
  .. ..$ : int [1:396] 1 2 3 4 5 6 7 8 9 10 ...
  .. ..$ : int [1:360] 13 14 15 16 17 18 19 20 21 22 ...
  .. ..$ : int [1:24] 61 62 63 64 65 66 67 68 69 70 ...
  .. ..@ ptype: int(0)
  ..- attr(*, ".drop")= logi TRUE</code></pre>
</div>
<p>You will notice that the structure of the data frame where we used
<code>group_by()</code> (<code>grouped_df</code>) is not the same as the
original <code>gapminder</code> (<code>data.frame</code>). A
<code>grouped_df</code> can be thought of as a <code>list</code> where
each item in the <code>list</code>is a <code>data.frame</code> which
contains only the rows that correspond to the a particular value
<code>continent</code> (at least in the example above).</p>
<figure><img src="fig/13-dplyr-fig2.png" alt="Diagram illustrating how the group by function oraganizes a data frame into groups" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="using-summarize">Using summarize()<a class="anchor" aria-label="anchor" href="#using-summarize"></a>
<a class="anchor" aria-label="anchor" href="#using-summarize"></a>
</h2>
<hr class="half-width">
<p>The above was a bit on the uneventful side but
<code>group_by()</code> is much more exciting in conjunction with
<code>summarize()</code>. This will allow us to create new variable(s)
by using functions that repeat for each of the continent-specific data
frames. That is to say, using the <code>group_by()</code> function, we
split our original data frame into multiple pieces, then we can run
functions (e.g. <code>mean()</code> or <code>sd()</code>) within
<code>summarize()</code>.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gdp_bycontinents</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_gdpPercap <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/13-dplyr-fig3.png" alt="Diagram illustrating the use of group by and summarize together to create a new variable" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>continent mean_gdpPercap</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>     <span class="sc">&lt;</span>fctr<span class="sc">&gt;</span>          <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="dv">1</span>    Africa       <span class="fl">2193.755</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="dv">2</span>  Americas       <span class="fl">7136.110</span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="dv">3</span>      Asia       <span class="fl">7902.150</span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="dv">4</span>    Europe      <span class="fl">14469.476</span></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="dv">5</span>   Oceania      <span class="fl">18621.609</span></span></code></pre>
</div>
<p>That allowed us to calculate the mean gdpPercap for each continent,
but it gets even better.</p>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2<a class="anchor" aria-label="anchor" href="#challenge-2"></a>
</h3>
<div class="callout-content">
<p>Calculate the average life expectancy per country. Which has the
longest average life expectancy and which has the shortest average life
expectancy?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution to Challenge 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lifeExp_bycountry</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">group_by</span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">summarize</span><span class="op">(</span>mean_lifeExp <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">lifeExp_bycountry</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">filter</span><span class="op">(</span><span class="va">mean_lifeExp</span> <span class="op">==</span> <span class="fu">min</span><span class="op">(</span><span class="va">mean_lifeExp</span><span class="op">)</span> <span class="op">|</span> <span class="va">mean_lifeExp</span> <span class="op">==</span> <span class="fu">max</span><span class="op">(</span><span class="va">mean_lifeExp</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 2 × 2
  country      mean_lifeExp
  &lt;chr&gt;               &lt;dbl&gt;
1 Iceland              76.5
2 Sierra Leone         36.8</code></pre>
</div>
<p>Another way to do this is to use the <code>dplyr</code> function
<code>arrange()</code>, which arranges the rows in a data frame
according to the order of one or more variables from the data frame. It
has similar syntax to other functions from the <code>dplyr</code>
package. You can use <code>desc()</code> inside <code>arrange()</code>
to sort in descending order.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lifeExp_bycountry</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">arrange</span><span class="op">(</span><span class="va">mean_lifeExp</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">head</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 2
  country      mean_lifeExp
  &lt;chr&gt;               &lt;dbl&gt;
1 Sierra Leone         36.8</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lifeExp_bycountry</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">mean_lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">head</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 2
  country mean_lifeExp
  &lt;chr&gt;          &lt;dbl&gt;
1 Iceland         76.5</code></pre>
</div>
<p>Alphabetical order works too</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lifeExp_bycountry</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">country</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">head</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 2
  country  mean_lifeExp
  &lt;chr&gt;           &lt;dbl&gt;
1 Zimbabwe         52.7</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>The function <code>group_by()</code> allows us to group by multiple
variables. Let’s group by <code>year</code> and
<code>continent</code>.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gdp_bycontinents_byyear</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span>, <span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_gdpPercap <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
<p>That is already quite powerful, but it gets even better! You’re not
limited to defining 1 new variable in <code>summarize()</code>.</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gdp_pop_bycontinents_byyear</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span>, <span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_gdpPercap <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              sd_gdpPercap <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              mean_pop <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">pop</span><span class="op">)</span>,</span>
<span>              sd_pop <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">pop</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
</section><section><h2 class="section-heading" id="count-and-n">count() and n()<a class="anchor" aria-label="anchor" href="#count-and-n"></a>
<a class="anchor" aria-label="anchor" href="#count-and-n"></a>
</h2>
<hr class="half-width">
<p>A very common operation is to count the number of observations for
each group. The <code>dplyr</code> package comes with two related
functions that help with this.</p>
<p>For instance, if we wanted to check the number of countries included
in the dataset for the year 2002, we can use the <code>count()</code>
function. It takes the name of one or more columns that contain the
groups we are interested in, and we can optionally sort the results in
descending order by adding <code>sort=TRUE</code>:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">filter</span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2002</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">count</span><span class="op">(</span><span class="va">continent</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  continent  n
1    Africa 52
2      Asia 33
3    Europe 30
4  Americas 25
5   Oceania  2</code></pre>
</div>
<p>If we need to use the number of observations in calculations, the
<code>n()</code> function is useful. It will return the total number of
observations in the current group rather than counting the number of
observations in each group within a specific column. For instance, if we
wanted to get the standard error of the life expectency per
continent:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>se_le <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span><span class="op">/</span><span class="fu">sqrt</span><span class="op">(</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 5 × 2
  continent se_le
  &lt;chr&gt;     &lt;dbl&gt;
1 Africa    0.366
2 Americas  0.540
3 Asia      0.596
4 Europe    0.286
5 Oceania   0.775</code></pre>
</div>
<p>You can also chain together several summary operations; in this case
calculating the <code>minimum</code>, <code>maximum</code>,
<code>mean</code> and <code>se</code> of each continent’s per-country
life-expectancy:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span></span>
<span>      mean_le <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span>,</span>
<span>      min_le <span class="op">=</span> <span class="fu">min</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span>,</span>
<span>      max_le <span class="op">=</span> <span class="fu">max</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span>,</span>
<span>      se_le <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span><span class="op">/</span><span class="fu">sqrt</span><span class="op">(</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 5 × 5
  continent mean_le min_le max_le se_le
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
1 Africa       48.9   23.6   76.4 0.366
2 Americas     64.7   37.6   80.7 0.540
3 Asia         60.1   28.8   82.6 0.596
4 Europe       71.9   43.6   81.8 0.286
5 Oceania      74.3   69.1   81.2 0.775</code></pre>
</div>
</section><section><h2 class="section-heading" id="using-mutate">Using mutate()<a class="anchor" aria-label="anchor" href="#using-mutate"></a>
<a class="anchor" aria-label="anchor" href="#using-mutate"></a>
</h2>
<hr class="half-width">
<p>We can also create new variables prior to (or even after) summarizing
information using <code>mutate()</code>.</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gdp_pop_bycontinents_byyear</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>gdp_billion <span class="op">=</span> <span class="va">gdpPercap</span><span class="op">*</span><span class="va">pop</span><span class="op">/</span><span class="fl">10</span><span class="op">^</span><span class="fl">9</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span>,<span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_gdpPercap <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              sd_gdpPercap <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              mean_pop <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">pop</span><span class="op">)</span>,</span>
<span>              sd_pop <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">pop</span><span class="op">)</span>,</span>
<span>              mean_gdp_billion <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">gdp_billion</span><span class="op">)</span>,</span>
<span>              sd_gdp_billion <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">gdp_billion</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
</section><section><h2 class="section-heading" id="connect-mutate-with-logical-filtering-ifelse">Connect mutate with logical filtering: ifelse<a class="anchor" aria-label="anchor" href="#connect-mutate-with-logical-filtering-ifelse"></a>
<a class="anchor" aria-label="anchor" href="#connect-mutate-with-logical-filtering-ifelse"></a>
</h2>
<hr class="half-width">
<p>When creating new variables, we can hook this with a logical
condition. A simple combination of <code>mutate()</code> and
<code>ifelse()</code> facilitates filtering right where it is needed: in
the moment of creating something new. This easy-to-read statement is a
fast and powerful way of discarding certain data (even though the
overall dimension of the data frame will not change) or for updating
values depending on this given condition.</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## keeping all data but "filtering" after a certain condition</span></span>
<span><span class="co"># calculate GDP only for people with a life expectation above 25</span></span>
<span><span class="va">gdp_pop_bycontinents_byyear_above25</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>gdp_billion <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">lifeExp</span> <span class="op">&gt;</span> <span class="fl">25</span>, <span class="va">gdpPercap</span> <span class="op">*</span> <span class="va">pop</span> <span class="op">/</span> <span class="fl">10</span><span class="op">^</span><span class="fl">9</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span>, <span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_gdpPercap <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              sd_gdpPercap <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              mean_pop <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">pop</span><span class="op">)</span>,</span>
<span>              sd_pop <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">pop</span><span class="op">)</span>,</span>
<span>              mean_gdp_billion <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">gdp_billion</span><span class="op">)</span>,</span>
<span>              sd_gdp_billion <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">gdp_billion</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## updating only if certain condition is fullfilled</span></span>
<span><span class="co"># for life expectations above 40 years, the gpd to be expected in the future is scaled</span></span>
<span><span class="va">gdp_future_bycontinents_byyear_high_lifeExp</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>gdp_futureExpectation <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">lifeExp</span> <span class="op">&gt;</span> <span class="fl">40</span>, <span class="va">gdpPercap</span> <span class="op">*</span> <span class="fl">1.5</span>, <span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span>, <span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_gdpPercap <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,</span>
<span>              mean_gdpPercap_expected <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">gdp_futureExpectation</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
</section><section><h2 class="section-heading" id="combining-dplyr-and-ggplot2">Combining <code>dplyr</code> and <code>ggplot2</code><a class="anchor" aria-label="anchor" href="#combining-dplyr-and-ggplot2"></a>
<a class="anchor" aria-label="anchor" href="#combining-dplyr-and-ggplot2"></a>
</h2>
<hr class="half-width">
<p>First install and load ggplot2:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">'ggplot2'</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span></span></code></pre>
</div>
<p>In the plotting lesson we looked at how to make a multi-panel figure
by adding a layer of facet panels using <code>ggplot2</code>. Here is
the code we used (with some extra comments):</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter countries located in the Americas</span></span>
<span><span class="va">americas</span> <span class="op">&lt;-</span> <span class="va">gapminder</span><span class="op">[</span><span class="va">gapminder</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Americas"</span>, <span class="op">]</span></span>
<span><span class="co"># Make the plot</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">americas</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">country</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/20-dplyr-rendered-unnamed-chunk-27-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>This code makes the right plot but it also creates an intermediate
variable (<code>americas</code>) that we might not have any other uses
for. Just as we used <code>%&gt;%</code> to pipe data along a chain of
<code>dplyr</code> functions we can use it to pass data to
<code>ggplot()</code>. Because <code>%&gt;%</code> replaces the first
argument in a function we don’t need to specify the <code>data =</code>
argument in the <code>ggplot()</code> function. By combining
<code>dplyr</code> and <code>ggplot2</code> functions we can make the
same figure without creating any new variables or modifying the
data.</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># Filter countries located in the Americas</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Americas"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># Make the plot</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">country</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/20-dplyr-rendered-unnamed-chunk-28-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>More examples of using the function <code>mutate()</code> and the
<code>ggplot2</code> package.</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># extract first letter of country name into new column</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>startsWith <span class="op">=</span> <span class="fu">substr</span><span class="op">(</span><span class="va">country</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># only keep countries starting with A or Z</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">startsWith</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"Z"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># plot lifeExp into facets</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, colour <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="fu">vars</span><span class="op">(</span><span class="va">country</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/20-dplyr-rendered-unnamed-chunk-29-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="advanced-challenge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="advanced-challenge" class="callout-inner">
<h3 class="callout-title">Advanced Challenge<a class="anchor" aria-label="anchor" href="#advanced-challenge"></a>
</h3>
<div class="callout-content">
<p>Calculate the average life expectancy in 2002 of 2 randomly selected
countries for each continent. Then arrange the continent names in
reverse order. <strong>Hint:</strong> Use the <code>dplyr</code>
functions <code>arrange()</code> and <code>sample_n()</code>, they have
similar syntax to other dplyr functions.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solution to Advanced Challenge
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lifeExp_2countries_bycontinents</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">filter</span><span class="op">(</span><span class="va">year</span><span class="op">==</span><span class="fl">2002</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">sample_n</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">summarize</span><span class="op">(</span>mean_lifeExp<span class="op">=</span><span class="fu">mean</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">mean_lifeExp</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="other-great-resources">Other great resources<a class="anchor" aria-label="anchor" href="#other-great-resources"></a>
<a class="anchor" aria-label="anchor" href="#other-great-resources"></a>
</h2>
<hr class="half-width">
<ul>
<li>
<a href="https://r4ds.hadley.nz/" class="external-link">R for Data Science</a> (online
book)</li>
<li>
<a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf" class="external-link">Data
Wrangling Cheat sheet</a> (pdf file)</li>
<li>
<a href="https://dplyr.tidyverse.org/" class="external-link">Introduction to dplyr</a>
(online documentation)</li>
<li>
<a href="https://www.rstudio.com/resources/webinars/data-wrangling-with-r-and-rstudio/" class="external-link">Data
wrangling with R and RStudio</a> (online video)</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use the <code>dplyr</code> package to manipulate data frames.</li>
<li>Use <code>select()</code> to choose variables from a data
frame.</li>
<li>Use <code>filter()</code> to choose data based on values.</li>
<li>Use <code>group_by()</code> and <code>summarize()</code> to work
with subsets of data.</li>
<li>Use <code>mutate()</code> to create new variables.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-21-tidyr"><p>Content from <a href="21-tidyr.html">Data Frame Manipulation with tidyr</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/21-tidyr.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I change the layout of a data frame?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>To understand the concepts of ‘longer’ and ‘wider’ data frame
formats and be able to convert between them with
<code>tidyr</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Researchers often want to reshape their data frames from ‘wide’ to
‘longer’ layouts, or vice-versa. The ‘long’ layout or format is
where:</p>
<ul>
<li>each column is a variable</li>
<li>each row is an observation</li>
</ul>
<p>In the purely ‘long’ (or ‘longest’) format, you usually have 1 column
for the observed variable and the other columns are ID variables.</p>
<p>For the ‘wide’ format each row is often a site/subject/patient and
you have multiple observation variables containing the same type of
data. These can be either repeated observations over time, or
observation of multiple variables (or a mix of both). You may find data
input may be simpler or some other applications may prefer the ‘wide’
format. However, many of <code>R</code>‘s functions have been designed
assuming you have ’longer’ formatted data. This tutorial will help you
efficiently transform your data shape regardless of original format.</p>
<figure><img src="fig/14-tidyr-fig1.png" alt="Diagram illustrating the difference between a wide versus long layout of a data frame" class="figure mx-auto d-block"></figure><p>Long and wide data frame layouts mainly affect readability. For
humans, the wide format is often more intuitive since we can often see
more of the data on the screen due to its shape. However, the long
format is more machine readable and is closer to the formatting of
databases. The ID variables in our data frames are similar to the fields
in a database and observed variables are like the database values.</p>
<section><h2 class="section-heading" id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<hr class="half-width">
<p>First install the packages if you haven’t already done so (you
probably installed dplyr in the previous lesson):</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("tidyr")</span></span>
<span><span class="co">#install.packages("dplyr")</span></span></code></pre>
</div>
<p>Load the packages</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"tidyr"</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span></span></code></pre>
</div>
<p>First, lets look at the structure of our original gapminder data
frame:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	1704 obs. of  6 variables:
 $ country  : chr  "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...
 $ year     : int  1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
 $ pop      : num  8425333 9240934 10267083 11537966 13079460 ...
 $ continent: chr  "Asia" "Asia" "Asia" "Asia" ...
 $ lifeExp  : num  28.8 30.3 32 34 36.1 ...
 $ gdpPercap: num  779 821 853 836 740 ...</code></pre>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1<a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<p>Is gapminder a purely long, purely wide, or some intermediate
format?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to Challenge 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>The original gapminder data.frame is in an intermediate format. It is
not purely long since it had multiple observation variables
(<code>pop</code>,<code>lifeExp</code>,<code>gdpPercap</code>).</p>
</div>
</div>
</div>
</div>
<p>Sometimes, as with the gapminder dataset, we have multiple types of
observed data. It is somewhere in between the purely ‘long’ and ‘wide’
data formats. We have 3 “ID variables” (<code>continent</code>,
<code>country</code>, <code>year</code>) and 3 “Observation variables”
(<code>pop</code>,<code>lifeExp</code>,<code>gdpPercap</code>). This
intermediate format can be preferred despite not having ALL observations
in 1 column given that all 3 observation variables have different units.
There are few operations that would need us to make this data frame any
longer (i.e. 4 ID variables and 1 Observation variable).</p>
<p>While using many of the functions in R, which are often vector based,
you usually do not want to do mathematical operations on values with
different units. For example, using the purely long format, a single
mean for all of the values of population, life expectancy, and GDP would
not be meaningful since it would return the mean of values with 3
incompatible units. The solution is that we first manipulate the data
either by grouping (see the lesson on <code>dplyr</code>), or we change
the structure of the data frame. <strong>Note:</strong> Some plotting
functions in R actually work better in the wide format data.</p>
</section><section><h2 class="section-heading" id="from-wide-to-long-format-with-pivot_longer">From wide to long format with pivot_longer()<a class="anchor" aria-label="anchor" href="#from-wide-to-long-format-with-pivot_longer"></a>
<a class="anchor" aria-label="anchor" href="#from-wide-to-long-format-with-pivot_longer"></a>
</h2>
<hr class="half-width">
<p>Until now, we’ve been using the nicely formatted original gapminder
dataset, but ‘real’ data (i.e. our own research data) will never be so
well organized. Here let’s start with the wide formatted version of the
gapminder dataset.</p>
<blockquote>
<p>Download the wide version of the gapminder data from <a href="data/gapminder_wide.csv">this link to a csv file</a> and save it
in your data folder.</p>
</blockquote>
<p>We’ll load the data file and look at it. Note: we don’t want our
continent and country columns to be factors, so we use the
stringsAsFactors argument for <code>read.csv()</code> to disable
that.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_wide</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"data/gapminder_wide.csv"</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gap_wide</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	142 obs. of  38 variables:
 $ continent     : chr  "Africa" "Africa" "Africa" "Africa" ...
 $ country       : chr  "Algeria" "Angola" "Benin" "Botswana" ...
 $ gdpPercap_1952: num  2449 3521 1063 851 543 ...
 $ gdpPercap_1957: num  3014 3828 960 918 617 ...
 $ gdpPercap_1962: num  2551 4269 949 984 723 ...
 $ gdpPercap_1967: num  3247 5523 1036 1215 795 ...
 $ gdpPercap_1972: num  4183 5473 1086 2264 855 ...
 $ gdpPercap_1977: num  4910 3009 1029 3215 743 ...
 $ gdpPercap_1982: num  5745 2757 1278 4551 807 ...
 $ gdpPercap_1987: num  5681 2430 1226 6206 912 ...
 $ gdpPercap_1992: num  5023 2628 1191 7954 932 ...
 $ gdpPercap_1997: num  4797 2277 1233 8647 946 ...
 $ gdpPercap_2002: num  5288 2773 1373 11004 1038 ...
 $ gdpPercap_2007: num  6223 4797 1441 12570 1217 ...
 $ lifeExp_1952  : num  43.1 30 38.2 47.6 32 ...
 $ lifeExp_1957  : num  45.7 32 40.4 49.6 34.9 ...
 $ lifeExp_1962  : num  48.3 34 42.6 51.5 37.8 ...
 $ lifeExp_1967  : num  51.4 36 44.9 53.3 40.7 ...
 $ lifeExp_1972  : num  54.5 37.9 47 56 43.6 ...
 $ lifeExp_1977  : num  58 39.5 49.2 59.3 46.1 ...
 $ lifeExp_1982  : num  61.4 39.9 50.9 61.5 48.1 ...
 $ lifeExp_1987  : num  65.8 39.9 52.3 63.6 49.6 ...
 $ lifeExp_1992  : num  67.7 40.6 53.9 62.7 50.3 ...
 $ lifeExp_1997  : num  69.2 41 54.8 52.6 50.3 ...
 $ lifeExp_2002  : num  71 41 54.4 46.6 50.6 ...
 $ lifeExp_2007  : num  72.3 42.7 56.7 50.7 52.3 ...
 $ pop_1952      : num  9279525 4232095 1738315 442308 4469979 ...
 $ pop_1957      : num  10270856 4561361 1925173 474639 4713416 ...
 $ pop_1962      : num  11000948 4826015 2151895 512764 4919632 ...
 $ pop_1967      : num  12760499 5247469 2427334 553541 5127935 ...
 $ pop_1972      : num  14760787 5894858 2761407 619351 5433886 ...
 $ pop_1977      : num  17152804 6162675 3168267 781472 5889574 ...
 $ pop_1982      : num  20033753 7016384 3641603 970347 6634596 ...
 $ pop_1987      : num  23254956 7874230 4243788 1151184 7586551 ...
 $ pop_1992      : num  26298373 8735988 4981671 1342614 8878303 ...
 $ pop_1997      : num  29072015 9875024 6066080 1536536 10352843 ...
 $ pop_2002      : int  31287142 10866106 7026113 1630347 12251209 7021078 15929988 4048013 8835739 614382 ...
 $ pop_2007      : int  33333216 12420476 8078314 1639131 14326203 8390505 17696293 4369038 10238807 710960 ...</code></pre>
</div>
<figure><img src="fig/14-tidyr-fig2.png" alt="Diagram illustrating the wide format of the gapminder data frame" class="figure mx-auto d-block"></figure><p>To change this very wide data frame layout back to our nice,
intermediate (or longer) layout, we will use one of the two available
<code>pivot</code> functions from the <code>tidyr</code> package. To
convert from wide to a longer format, we will use the
<code>pivot_longer()</code> function. <code>pivot_longer()</code> makes
datasets longer by increasing the number of rows and decreasing the
number of columns, or ‘lengthening’ your observation variables into a
single variable.</p>
<figure><img src="fig/14-tidyr-fig3.png" alt="Diagram illustrating how pivot longer reorganizes a data frame from a wide to long format" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_long</span> <span class="op">&lt;-</span> <span class="va">gap_wide</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">'pop'</span><span class="op">)</span>, <span class="fu">starts_with</span><span class="op">(</span><span class="st">'lifeExp'</span><span class="op">)</span>, <span class="fu">starts_with</span><span class="op">(</span><span class="st">'gdpPercap'</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">"obstype_year"</span>, values_to <span class="op">=</span> <span class="st">"obs_values"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gap_long</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>tibble [5,112 × 4] (S3: tbl_df/tbl/data.frame)
 $ continent   : chr [1:5112] "Africa" "Africa" "Africa" "Africa" ...
 $ country     : chr [1:5112] "Algeria" "Algeria" "Algeria" "Algeria" ...
 $ obstype_year: chr [1:5112] "pop_1952" "pop_1957" "pop_1962" "pop_1967" ...
 $ obs_values  : num [1:5112] 9279525 10270856 11000948 12760499 14760787 ...</code></pre>
</div>
<p>Here we have used piping syntax which is similar to what we were
doing in the previous lesson with dplyr. In fact, these are compatible
and you can use a mix of tidyr and dplyr functions by piping them
together.</p>
<p>We first provide to <code>pivot_longer()</code> a vector of column
names that will be pivoted into longer format. We could type out all the
observation variables, but as in the <code>select()</code> function (see
<code>dplyr</code> lesson), we can use the <code>starts_with()</code>
argument to select all variables that start with the desired character
string. <code>pivot_longer()</code> also allows the alternative syntax
of using the <code>-</code> symbol to identify which variables are not
to be pivoted (i.e. ID variables).</p>
<p>The next arguments to <code>pivot_longer()</code> are
<code>names_to</code> for naming the column that will contain the new ID
variable (<code>obstype_year</code>) and <code>values_to</code> for
naming the new amalgamated observation variable
(<code>obs_value</code>). We supply these new column names as
strings.</p>
<figure><img src="fig/14-tidyr-fig4.png" alt="Diagram illustrating the long format of the gapminder data" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_long</span> <span class="op">&lt;-</span> <span class="va">gap_wide</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="op">-</span><span class="va">continent</span>, <span class="op">-</span><span class="va">country</span><span class="op">)</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">"obstype_year"</span>, values_to <span class="op">=</span> <span class="st">"obs_values"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gap_long</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>tibble [5,112 × 4] (S3: tbl_df/tbl/data.frame)
 $ continent   : chr [1:5112] "Africa" "Africa" "Africa" "Africa" ...
 $ country     : chr [1:5112] "Algeria" "Algeria" "Algeria" "Algeria" ...
 $ obstype_year: chr [1:5112] "gdpPercap_1952" "gdpPercap_1957" "gdpPercap_1962" "gdpPercap_1967" ...
 $ obs_values  : num [1:5112] 2449 3014 2551 3247 4183 ...</code></pre>
</div>
<p>That may seem trivial with this particular data frame, but sometimes
you have 1 ID variable and 40 observation variables with irregular
variable names. The flexibility is a huge time saver!</p>
<p>Now <code>obstype_year</code> actually contains 2 pieces of
information, the observation type
(<code>pop</code>,<code>lifeExp</code>, or <code>gdpPercap</code>) and
the <code>year</code>. We can use the <code>separate()</code> function
to split the character strings into multiple variables</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_long</span> <span class="op">&lt;-</span> <span class="va">gap_long</span> <span class="op">%&gt;%</span> <span class="fu">separate</span><span class="op">(</span><span class="va">obstype_year</span>, into <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">'obs_type'</span>, <span class="st">'year'</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span><span class="va">gap_long</span><span class="op">$</span><span class="va">year</span> <span class="op">&lt;-</span> <span class="fu">as.integer</span><span class="op">(</span><span class="va">gap_long</span><span class="op">$</span><span class="va">year</span><span class="op">)</span></span></code></pre>
</div>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2<a class="anchor" aria-label="anchor" href="#challenge-2"></a>
</h3>
<div class="callout-content">
<p>Using <code>gap_long</code>, calculate the mean life expectancy,
population, and gdpPercap for each continent. <strong>Hint:</strong> use
the <code>group_by()</code> and <code>summarize()</code> functions we
learned in the <code>dplyr</code> lesson</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution to Challenge 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_long</span> <span class="op">%&gt;%</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span>, <span class="va">obs_type</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">summarize</span><span class="op">(</span>means<span class="op">=</span><span class="fu">mean</span><span class="op">(</span><span class="va">obs_values</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 15 × 3
# Groups:   continent [5]
   continent obs_type       means
   &lt;chr&gt;     &lt;chr&gt;          &lt;dbl&gt;
 1 Africa    gdpPercap     2194.
 2 Africa    lifeExp         48.9
 3 Africa    pop        9916003.
 4 Americas  gdpPercap     7136.
 5 Americas  lifeExp         64.7
 6 Americas  pop       24504795.
 7 Asia      gdpPercap     7902.
 8 Asia      lifeExp         60.1
 9 Asia      pop       77038722.
10 Europe    gdpPercap    14469.
11 Europe    lifeExp         71.9
12 Europe    pop       17169765.
13 Oceania   gdpPercap    18622.
14 Oceania   lifeExp         74.3
15 Oceania   pop        8874672. </code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="from-long-to-intermediate-format-with-pivot_wider">From long to intermediate format with pivot_wider()<a class="anchor" aria-label="anchor" href="#from-long-to-intermediate-format-with-pivot_wider"></a>
<a class="anchor" aria-label="anchor" href="#from-long-to-intermediate-format-with-pivot_wider"></a>
</h2>
<hr class="half-width">
<p>It is always good to check work. So, let’s use the second
<code>pivot</code> function, <code>pivot_wider()</code>, to ‘widen’ our
observation variables back out. <code>pivot_wider()</code> is the
opposite of <code>pivot_longer()</code>, making a dataset wider by
increasing the number of columns and decreasing the number of rows. We
can use <code>pivot_wider()</code> to pivot or reshape our
<code>gap_long</code> to the original intermediate format or the widest
format. Let’s start with the intermediate format.</p>
<p>The <code>pivot_wider()</code> function takes <code>names_from</code>
and <code>values_from</code> arguments.</p>
<p>To <code>names_from</code> we supply the column name whose contents
will be pivoted into new output columns in the widened data frame. The
corresponding values will be added from the column named in the
<code>values_from</code> argument.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_normal</span> <span class="op">&lt;-</span> <span class="va">gap_long</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">obs_type</span>, values_from <span class="op">=</span> <span class="va">obs_values</span><span class="op">)</span></span>
<span><span class="fu">dim</span><span class="op">(</span><span class="va">gap_normal</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1704    6</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dim</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1704    6</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">gap_normal</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "continent" "country"   "year"      "gdpPercap" "lifeExp"   "pop"      </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "country"   "year"      "pop"       "continent" "lifeExp"   "gdpPercap"</code></pre>
</div>
<p>Now we’ve got an intermediate data frame <code>gap_normal</code> with
the same dimensions as the original <code>gapminder</code>, but the
order of the variables is different. Let’s fix that before checking if
they are <code>all.equal()</code>.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_normal</span> <span class="op">&lt;-</span> <span class="va">gap_normal</span><span class="op">[</span>, <span class="fu">names</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu">all.equal</span><span class="op">(</span><span class="va">gap_normal</span>, <span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Attributes: &lt; Component \"class\": Lengths (3, 1) differ (string compare on first 1) &gt;"
[2] "Attributes: &lt; Component \"class\": 1 string mismatch &gt;"
[3] "Component \"country\": 1704 string mismatches"
[4] "Component \"pop\": Mean relative difference: 1.634504"
[5] "Component \"continent\": 1212 string mismatches"
[6] "Component \"lifeExp\": Mean relative difference: 0.203822"
[7] "Component \"gdpPercap\": Mean relative difference: 1.162302"                           </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">gap_normal</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 6
  country  year      pop continent lifeExp gdpPercap
  &lt;chr&gt;   &lt;int&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
1 Algeria  1952  9279525 Africa       43.1     2449.
2 Algeria  1957 10270856 Africa       45.7     3014.
3 Algeria  1962 11000948 Africa       48.3     2551.
4 Algeria  1967 12760499 Africa       51.4     3247.
5 Algeria  1972 14760787 Africa       54.5     4183.
6 Algeria  1977 17152804 Africa       58.0     4910.</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      country year      pop continent lifeExp gdpPercap
1 Afghanistan 1952  8425333      Asia  28.801  779.4453
2 Afghanistan 1957  9240934      Asia  30.332  820.8530
3 Afghanistan 1962 10267083      Asia  31.997  853.1007
4 Afghanistan 1967 11537966      Asia  34.020  836.1971
5 Afghanistan 1972 13079460      Asia  36.088  739.9811
6 Afghanistan 1977 14880372      Asia  38.438  786.1134</code></pre>
</div>
<p>We’re almost there, the original was sorted by <code>country</code>,
then <code>year</code>.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_normal</span> <span class="op">&lt;-</span> <span class="va">gap_normal</span> <span class="op">%&gt;%</span> <span class="fu">arrange</span><span class="op">(</span><span class="va">country</span>, <span class="va">year</span><span class="op">)</span></span>
<span><span class="fu">all.equal</span><span class="op">(</span><span class="va">gap_normal</span>, <span class="va">gapminder</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Attributes: &lt; Component \"class\": Lengths (3, 1) differ (string compare on first 1) &gt;"
[2] "Attributes: &lt; Component \"class\": 1 string mismatch &gt;"                                </code></pre>
</div>
<p>That’s great! We’ve gone from the longest format back to the
intermediate and we didn’t introduce any errors in our code.</p>
<p>Now let’s convert the long all the way back to the wide. In the wide
format, we will keep country and continent as ID variables and pivot the
observations across the 3 metrics
(<code>pop</code>,<code>lifeExp</code>,<code>gdpPercap</code>) and time
(<code>year</code>). First we need to create appropriate labels for all
our new variables (time*metric combinations) and we also need to unify
our ID variables to simplify the process of defining
<code>gap_wide</code>.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_temp</span> <span class="op">&lt;-</span> <span class="va">gap_long</span> <span class="op">%&gt;%</span> <span class="fu">unite</span><span class="op">(</span><span class="va">var_ID</span>, <span class="va">continent</span>, <span class="va">country</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gap_temp</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>tibble [5,112 × 4] (S3: tbl_df/tbl/data.frame)
 $ var_ID    : chr [1:5112] "Africa_Algeria" "Africa_Algeria" "Africa_Algeria" "Africa_Algeria" ...
 $ obs_type  : chr [1:5112] "gdpPercap" "gdpPercap" "gdpPercap" "gdpPercap" ...
 $ year      : int [1:5112] 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
 $ obs_values: num [1:5112] 2449 3014 2551 3247 4183 ...</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_temp</span> <span class="op">&lt;-</span> <span class="va">gap_long</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">unite</span><span class="op">(</span><span class="va">ID_var</span>, <span class="va">continent</span>, <span class="va">country</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">unite</span><span class="op">(</span><span class="va">var_names</span>, <span class="va">obs_type</span>, <span class="va">year</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gap_temp</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>tibble [5,112 × 3] (S3: tbl_df/tbl/data.frame)
 $ ID_var    : chr [1:5112] "Africa_Algeria" "Africa_Algeria" "Africa_Algeria" "Africa_Algeria" ...
 $ var_names : chr [1:5112] "gdpPercap_1952" "gdpPercap_1957" "gdpPercap_1962" "gdpPercap_1967" ...
 $ obs_values: num [1:5112] 2449 3014 2551 3247 4183 ...</code></pre>
</div>
<p>Using <code>unite()</code> we now have a single ID variable which is
a combination of <code>continent</code>,<code>country</code>,and we have
defined variable names. We’re now ready to pipe in
<code>pivot_wider()</code></p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_wide_new</span> <span class="op">&lt;-</span> <span class="va">gap_long</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">unite</span><span class="op">(</span><span class="va">ID_var</span>, <span class="va">continent</span>, <span class="va">country</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">unite</span><span class="op">(</span><span class="va">var_names</span>, <span class="va">obs_type</span>, <span class="va">year</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">var_names</span>, values_from <span class="op">=</span> <span class="va">obs_values</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gap_wide_new</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>tibble [142 × 37] (S3: tbl_df/tbl/data.frame)
 $ ID_var        : chr [1:142] "Africa_Algeria" "Africa_Angola" "Africa_Benin" "Africa_Botswana" ...
 $ gdpPercap_1952: num [1:142] 2449 3521 1063 851 543 ...
 $ gdpPercap_1957: num [1:142] 3014 3828 960 918 617 ...
 $ gdpPercap_1962: num [1:142] 2551 4269 949 984 723 ...
 $ gdpPercap_1967: num [1:142] 3247 5523 1036 1215 795 ...
 $ gdpPercap_1972: num [1:142] 4183 5473 1086 2264 855 ...
 $ gdpPercap_1977: num [1:142] 4910 3009 1029 3215 743 ...
 $ gdpPercap_1982: num [1:142] 5745 2757 1278 4551 807 ...
 $ gdpPercap_1987: num [1:142] 5681 2430 1226 6206 912 ...
 $ gdpPercap_1992: num [1:142] 5023 2628 1191 7954 932 ...
 $ gdpPercap_1997: num [1:142] 4797 2277 1233 8647 946 ...
 $ gdpPercap_2002: num [1:142] 5288 2773 1373 11004 1038 ...
 $ gdpPercap_2007: num [1:142] 6223 4797 1441 12570 1217 ...
 $ lifeExp_1952  : num [1:142] 43.1 30 38.2 47.6 32 ...
 $ lifeExp_1957  : num [1:142] 45.7 32 40.4 49.6 34.9 ...
 $ lifeExp_1962  : num [1:142] 48.3 34 42.6 51.5 37.8 ...
 $ lifeExp_1967  : num [1:142] 51.4 36 44.9 53.3 40.7 ...
 $ lifeExp_1972  : num [1:142] 54.5 37.9 47 56 43.6 ...
 $ lifeExp_1977  : num [1:142] 58 39.5 49.2 59.3 46.1 ...
 $ lifeExp_1982  : num [1:142] 61.4 39.9 50.9 61.5 48.1 ...
 $ lifeExp_1987  : num [1:142] 65.8 39.9 52.3 63.6 49.6 ...
 $ lifeExp_1992  : num [1:142] 67.7 40.6 53.9 62.7 50.3 ...
 $ lifeExp_1997  : num [1:142] 69.2 41 54.8 52.6 50.3 ...
 $ lifeExp_2002  : num [1:142] 71 41 54.4 46.6 50.6 ...
 $ lifeExp_2007  : num [1:142] 72.3 42.7 56.7 50.7 52.3 ...
 $ pop_1952      : num [1:142] 9279525 4232095 1738315 442308 4469979 ...
 $ pop_1957      : num [1:142] 10270856 4561361 1925173 474639 4713416 ...
 $ pop_1962      : num [1:142] 11000948 4826015 2151895 512764 4919632 ...
 $ pop_1967      : num [1:142] 12760499 5247469 2427334 553541 5127935 ...
 $ pop_1972      : num [1:142] 14760787 5894858 2761407 619351 5433886 ...
 $ pop_1977      : num [1:142] 17152804 6162675 3168267 781472 5889574 ...
 $ pop_1982      : num [1:142] 20033753 7016384 3641603 970347 6634596 ...
 $ pop_1987      : num [1:142] 23254956 7874230 4243788 1151184 7586551 ...
 $ pop_1992      : num [1:142] 26298373 8735988 4981671 1342614 8878303 ...
 $ pop_1997      : num [1:142] 29072015 9875024 6066080 1536536 10352843 ...
 $ pop_2002      : num [1:142] 31287142 10866106 7026113 1630347 12251209 ...
 $ pop_2007      : num [1:142] 33333216 12420476 8078314 1639131 14326203 ...</code></pre>
</div>
<div id="challenge-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-3" class="callout-inner">
<h3 class="callout-title">Challenge 3<a class="anchor" aria-label="anchor" href="#challenge-3"></a>
</h3>
<div class="callout-content">
<p>Take this 1 step further and create a
<code>gap_ludicrously_wide</code> format data by pivoting over
countries, year and the 3 metrics? <strong>Hint</strong> this new data
frame should only have 5 rows.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solution to Challenge 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_ludicrously_wide</span> <span class="op">&lt;-</span> <span class="va">gap_long</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">unite</span><span class="op">(</span><span class="va">var_names</span>, <span class="va">obs_type</span>, <span class="va">year</span>, <span class="va">country</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">var_names</span>, values_from <span class="op">=</span> <span class="va">obs_values</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Now we have a great ‘wide’ format data frame, but the
<code>ID_var</code> could be more usable, let’s separate it into 2
variables with <code>separate()</code></p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap_wide_betterID</span> <span class="op">&lt;-</span> <span class="fu">separate</span><span class="op">(</span><span class="va">gap_wide_new</span>, <span class="va">ID_var</span>, <span class="fu">c</span><span class="op">(</span><span class="st">"continent"</span>, <span class="st">"country"</span><span class="op">)</span>, sep<span class="op">=</span><span class="st">"_"</span><span class="op">)</span></span>
<span><span class="va">gap_wide_betterID</span> <span class="op">&lt;-</span> <span class="va">gap_long</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">unite</span><span class="op">(</span><span class="va">ID_var</span>, <span class="va">continent</span>, <span class="va">country</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">unite</span><span class="op">(</span><span class="va">var_names</span>, <span class="va">obs_type</span>, <span class="va">year</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">var_names</span>, values_from <span class="op">=</span> <span class="va">obs_values</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">separate</span><span class="op">(</span><span class="va">ID_var</span>, <span class="fu">c</span><span class="op">(</span><span class="st">"continent"</span>,<span class="st">"country"</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">gap_wide_betterID</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>tibble [142 × 38] (S3: tbl_df/tbl/data.frame)
 $ continent     : chr [1:142] "Africa" "Africa" "Africa" "Africa" ...
 $ country       : chr [1:142] "Algeria" "Angola" "Benin" "Botswana" ...
 $ gdpPercap_1952: num [1:142] 2449 3521 1063 851 543 ...
 $ gdpPercap_1957: num [1:142] 3014 3828 960 918 617 ...
 $ gdpPercap_1962: num [1:142] 2551 4269 949 984 723 ...
 $ gdpPercap_1967: num [1:142] 3247 5523 1036 1215 795 ...
 $ gdpPercap_1972: num [1:142] 4183 5473 1086 2264 855 ...
 $ gdpPercap_1977: num [1:142] 4910 3009 1029 3215 743 ...
 $ gdpPercap_1982: num [1:142] 5745 2757 1278 4551 807 ...
 $ gdpPercap_1987: num [1:142] 5681 2430 1226 6206 912 ...
 $ gdpPercap_1992: num [1:142] 5023 2628 1191 7954 932 ...
 $ gdpPercap_1997: num [1:142] 4797 2277 1233 8647 946 ...
 $ gdpPercap_2002: num [1:142] 5288 2773 1373 11004 1038 ...
 $ gdpPercap_2007: num [1:142] 6223 4797 1441 12570 1217 ...
 $ lifeExp_1952  : num [1:142] 43.1 30 38.2 47.6 32 ...
 $ lifeExp_1957  : num [1:142] 45.7 32 40.4 49.6 34.9 ...
 $ lifeExp_1962  : num [1:142] 48.3 34 42.6 51.5 37.8 ...
 $ lifeExp_1967  : num [1:142] 51.4 36 44.9 53.3 40.7 ...
 $ lifeExp_1972  : num [1:142] 54.5 37.9 47 56 43.6 ...
 $ lifeExp_1977  : num [1:142] 58 39.5 49.2 59.3 46.1 ...
 $ lifeExp_1982  : num [1:142] 61.4 39.9 50.9 61.5 48.1 ...
 $ lifeExp_1987  : num [1:142] 65.8 39.9 52.3 63.6 49.6 ...
 $ lifeExp_1992  : num [1:142] 67.7 40.6 53.9 62.7 50.3 ...
 $ lifeExp_1997  : num [1:142] 69.2 41 54.8 52.6 50.3 ...
 $ lifeExp_2002  : num [1:142] 71 41 54.4 46.6 50.6 ...
 $ lifeExp_2007  : num [1:142] 72.3 42.7 56.7 50.7 52.3 ...
 $ pop_1952      : num [1:142] 9279525 4232095 1738315 442308 4469979 ...
 $ pop_1957      : num [1:142] 10270856 4561361 1925173 474639 4713416 ...
 $ pop_1962      : num [1:142] 11000948 4826015 2151895 512764 4919632 ...
 $ pop_1967      : num [1:142] 12760499 5247469 2427334 553541 5127935 ...
 $ pop_1972      : num [1:142] 14760787 5894858 2761407 619351 5433886 ...
 $ pop_1977      : num [1:142] 17152804 6162675 3168267 781472 5889574 ...
 $ pop_1982      : num [1:142] 20033753 7016384 3641603 970347 6634596 ...
 $ pop_1987      : num [1:142] 23254956 7874230 4243788 1151184 7586551 ...
 $ pop_1992      : num [1:142] 26298373 8735988 4981671 1342614 8878303 ...
 $ pop_1997      : num [1:142] 29072015 9875024 6066080 1536536 10352843 ...
 $ pop_2002      : num [1:142] 31287142 10866106 7026113 1630347 12251209 ...
 $ pop_2007      : num [1:142] 33333216 12420476 8078314 1639131 14326203 ...</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">all.equal</span><span class="op">(</span><span class="va">gap_wide</span>, <span class="va">gap_wide_betterID</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Attributes: &lt; Component \"class\": Lengths (1, 3) differ (string compare on first 1) &gt;"
[2] "Attributes: &lt; Component \"class\": 1 string mismatch &gt;"                                </code></pre>
</div>
<p>There and back again!</p>
</section><section><h2 class="section-heading" id="other-great-resources">Other great resources<a class="anchor" aria-label="anchor" href="#other-great-resources"></a>
<a class="anchor" aria-label="anchor" href="#other-great-resources"></a>
</h2>
<hr class="half-width">
<ul>
<li>
<a href="https://r4ds.hadley.nz/" class="external-link">R for Data Science</a> (online
book)</li>
<li>
<a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf" class="external-link">Data
Wrangling Cheat sheet</a> (pdf file)</li>
<li>
<a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html" class="external-link">Introduction
to tidyr</a> (online documentation)</li>
<li>
<a href="https://www.rstudio.com/resources/webinars/data-wrangling-with-r-and-rstudio/" class="external-link">Data
wrangling with R and RStudio</a> (online video)</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use the <code>tidyr</code> package to change the layout of data
frames.</li>
<li>Use <code>pivot_longer()</code> to go from wide to longer
layout.</li>
<li>Use <code>pivot_wider()</code> to go from long to wider layout.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-22-knitr-markdown"><p>Content from <a href="22-knitr-markdown.html">Producing Reports With knitr</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/22-knitr-markdown.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I integrate software and reports?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand the value of writing reproducible reports</li>
<li>Learn how to recognise and compile the basic components of an R
Markdown file</li>
<li>Become familiar with R code chunks, and understand their purpose,
structure and options</li>
<li>Demonstrate the use of inline chunks for weaving R outputs into text
blocks, for example when discussing the results of some
calculations</li>
<li>Be aware of alternative output formats to which an R Markdown file
can be exported</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="data-analysis-reports">Data analysis reports<a class="anchor" aria-label="anchor" href="#data-analysis-reports"></a>
<a class="anchor" aria-label="anchor" href="#data-analysis-reports"></a>
</h2>
<hr class="half-width">
<p>Data analysts tend to write a lot of reports, describing their
analyses and results, for their collaborators or to document their work
for future reference.</p>
<p>Many new users begin by first writing a single R script containing
all of their work, and then share the analysis by emailing the script
and various graphs as attachments. But this can be cumbersome, requiring
a lengthy discussion to explain which attachment was which result.</p>
<p>Writing formal reports with Word or <a href="https://www.latex-project.org/" class="external-link">LaTeX</a> can simplify this
process by incorporating both the analysis report and output graphs into
a single document. But tweaking formatting to make figures look correct
and fixing obnoxious page breaks can be tedious and lead to a lengthy
“whack-a-mole” game of fixing new mistakes resulting from a single
formatting change.</p>
<p>Creating a report as a web page (which is an html file) using R
Markdown makes things easier. The report can be one long stream, so tall
figures that wouldn’t ordinarily fit on one page can be kept at full
size and easier to read, since the reader can simply keep scrolling.
Additionally, the formatting of and R Markdown document is simple and
easy to modify, allowing you to spend more time on your analyses instead
of writing reports.</p>
</section><section><h2 class="section-heading" id="literate-programming">Literate programming<a class="anchor" aria-label="anchor" href="#literate-programming"></a>
<a class="anchor" aria-label="anchor" href="#literate-programming"></a>
</h2>
<hr class="half-width">
<p>Ideally, such analysis reports are <em>reproducible</em> documents:
If an error is discovered, or if some additional subjects are added to
the data, you can just re-compile the report and get the new or
corrected results rather than having to reconstruct figures, paste them
into a Word document, and hand-edit various detailed results.</p>
<p>The key R package here is <a href="https://yihui.name/knitr/" class="external-link"><code>knitr</code></a>. It allows you
to create a document that is a mixture of text and chunks of code. When
the document is processed by <code>knitr</code>, chunks of code will be
executed, and graphs or other results will be inserted into the final
document.</p>
<p>This sort of idea has been called “literate programming”.</p>
<p><code>knitr</code> allows you to mix basically any type of text with
code from different programming languages, but we recommend that you use
<code>R Markdown</code>, which mixes Markdown with R. <a href="https://www.markdownguide.org/" class="external-link">Markdown</a> is a light-weight
mark-up language for creating web pages.</p>
</section><section><h2 class="section-heading" id="creating-an-r-markdown-file">Creating an R Markdown file<a class="anchor" aria-label="anchor" href="#creating-an-r-markdown-file"></a>
<a class="anchor" aria-label="anchor" href="#creating-an-r-markdown-file"></a>
</h2>
<hr class="half-width">
<p>Within RStudio, click File → New File → R Markdown and you’ll get a
dialog box like this:</p>
<figure><img src="fig/New_R_Markdown.png" alt="Screenshot of the New R Markdown file dialogue box in RStudio" class="figure mx-auto d-block"></figure><p>You can stick with the default (HTML output), but give it a
title.</p>
</section><section><h2 class="section-heading" id="basic-components-of-r-markdown">Basic components of R Markdown<a class="anchor" aria-label="anchor" href="#basic-components-of-r-markdown"></a>
<a class="anchor" aria-label="anchor" href="#basic-components-of-r-markdown"></a>
</h2>
<hr class="half-width">
<p>The initial chunk of text (header) contains instructions for R to
specify what kind of document will be created, and the options chosen.
You can use the header to give your document a title, author, date, and
tell it what type of output you want to produce. In this case, we’re
creating an html document.</p>
<pre><code>---
title: "Initial R Markdown document"
author: "Karl Broman"
date: "April 23, 2015"
output: html_document
---</code></pre>
<p>You can delete any of those fields if you don’t want them included.
The double-quotes aren’t strictly <em>necessary</em> in this case.
They’re mostly needed if you want to include a colon in the title.</p>
<p>RStudio creates the document with some example text to get you
started. Note below that there are chunks like</p>
<pre>
```{r}
summary(cars)
```
</pre>
<p>These are chunks of R code that will be executed by
<code>knitr</code> and replaced by their results. More on this
later.</p>
</section><section><h2 class="section-heading" id="markdown">Markdown<a class="anchor" aria-label="anchor" href="#markdown"></a>
<a class="anchor" aria-label="anchor" href="#markdown"></a>
</h2>
<hr class="half-width">
<p>Markdown is a system for writing web pages by marking up the text
much as you would in an email rather than writing html code. The
marked-up text gets <em>converted</em> to html, replacing the marks with
the proper html code.</p>
<p>For now, let’s delete all of the stuff that’s there and write a bit
of markdown.</p>
<p>You make things <strong>bold</strong> using two asterisks, like this:
<code>**bold**</code>, and you make things <em>italics</em> by using
underscores, like this: <code>_italics_</code>.</p>
<p>You can make a bulleted list by writing a list with hyphens or
asterisks with a space between the list and other text, like this:</p>
<pre><code>A list:

* bold with double-asterisks
* italics with underscores
* code-type font with backticks</code></pre>
<p>or like this:</p>
<pre><code>A second list:

- bold with double-asterisks
- italics with underscores
- code-type font with backticks</code></pre>
<p>Each will appear as:</p>
<ul>
<li>bold with double-asterisks</li>
<li>italics with underscores</li>
<li>code-type font with backticks</li>
</ul>
<p>You can use whatever method you prefer, but <em>be consistent</em>.
This maintains the readability of your code.</p>
<p>You can make a numbered list by just using numbers. You can even use
the same number over and over if you want:</p>
<pre><code>1. bold with double-asterisks
1. italics with underscores
1. code-type font with backticks</code></pre>
<p>This will appear as:</p>
<ol style="list-style-type: decimal">
<li>bold with double-asterisks</li>
<li>italics with underscores</li>
<li>code-type font with backticks</li>
</ol>
<p>You can make section headers of different sizes by initiating a line
with some number of <code>#</code> symbols:</p>
<pre><code><span><span class="co"># Title</span></span>
<span><span class="co">## Main section</span></span>
<span><span class="co">### Sub-section</span></span>
<span><span class="co">#### Sub-sub section</span></span></code></pre>
<p>You <em>compile</em> the R Markdown document to an html webpage by
clicking the “Knit” button in the upper-left.</p>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1<a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<p>Create a new R Markdown document. Delete all of the R code chunks and
write a bit of Markdown (some sections, some italicized text, and an
itemized list).</p>
<p>Convert the document to a webpage.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to Challenge 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>In RStudio, select File &gt; New file &gt; R Markdown…</p>
<p>Delete the placeholder text and add the following:</p>
<pre><code># Introduction

## Background on Data

This report uses the *gapminder* dataset, which has columns that include:

* country
* continent
* year
* lifeExp
* pop
* gdpPercap

## Background on Methods
</code></pre>
<p>Then click the ‘Knit’ button on the toolbar to generate an html
document (webpage).</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="a-bit-more-markdown">A bit more Markdown<a class="anchor" aria-label="anchor" href="#a-bit-more-markdown"></a>
<a class="anchor" aria-label="anchor" href="#a-bit-more-markdown"></a>
</h2>
<hr class="half-width">
<p>You can make a hyperlink like this:
<code>[Carpentries Home Page](https://carpentries.org/)</code>.</p>
<p>You can include an image file like this:
<code>![The Carpentries Logo](https://carpentries.org/assets/img/TheCarpentries.svg)</code></p>
<p>You can do subscripts (e.g., F<sub>2</sub>) with <code>F~2~</code>
and superscripts (e.g., F<sup>2</sup>) with <code>F^2^</code>.</p>
<p>If you know how to write equations in <a href="https://www.latex-project.org/" class="external-link">LaTeX</a>, you can use
<code>$ $</code> and <code>$$ $$</code> to insert math equations, like
<code>$E = mc^2$</code> and</p>
<pre><code>$$y = \mu + \sum_{i=1}^p \beta_i x_i + \epsilon$$</code></pre>
<p>You can review Markdown syntax by navigating to the “Markdown Quick
Reference” under the “Help” field in the toolbar at the top of
RStudio.</p>
</section><section><h2 class="section-heading" id="r-code-chunks">R code chunks<a class="anchor" aria-label="anchor" href="#r-code-chunks"></a>
<a class="anchor" aria-label="anchor" href="#r-code-chunks"></a>
</h2>
<hr class="half-width">
<p>The real power of Markdown comes from mixing markdown with chunks of
code. This is R Markdown. When processed, the R code will be executed;
if they produce figures, the figures will be inserted in the final
document.</p>
<p>The main code chunks look like this:</p>
<pre>
```{r load_data}
gapminder
<p>That is, you place a chunk of R code between <code>```{r
chunk_name}</code> and <code>```</code>. You should give each chunk a
unique name, as they will help you to fix errors and, if any graphs are
produced, the file names are based on the name of the code chunk that
produced them. You can create code chunks quickly in RStudio using the
shortcuts <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>I</kbd> on Windows and
Linux, or <kbd>Cmd</kbd>+<kbd>Option</kbd>+<kbd>I</kbd> on Mac.</p>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2<a class="anchor" aria-label="anchor" href="#challenge-2"></a>
</h3>
<div class="callout-content">
<p>Add code chunks to:</p>
<ul>
<li>Load the ggplot2 package</li>
<li>Read the gapminder data</li>
<li>Create a plot</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution to Challenge 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<pre>
```{r load-ggplot2}
library("ggplot2")
```
</pre>
<pre>
```{r read-gapminder-data}
gapminder
<pre>
```{r make-plot}
plot(lifeExp ~ year, data = gapminder)
```
</pre>
</pre>
</div>
</div>
</div>
</div>
</pre></section><section><h2 class="section-heading" id="how-things-get-compiled">How things get compiled<a class="anchor" aria-label="anchor" href="#how-things-get-compiled"></a>
<a class="anchor" aria-label="anchor" href="#how-things-get-compiled"></a>
</h2>
<hr class="half-width">
<p>When you press the “Knit” button, the R Markdown document is
processed by <a href="https://yihui.name/knitr" class="external-link"><code>knitr</code></a>
and a plain Markdown document is produced (as well as, potentially, a
set of figure files): the R code is executed and replaced by both the
input and the output; if figures are produced, links to those figures
are included.</p>
<p>The Markdown and figure documents are then processed by the tool <a href="https://pandoc.org/" class="external-link"><code>pandoc</code></a>, which converts the
Markdown file into an html file, with the figures embedded.</p>
<figure><img src="fig/22-knitr-markdown-rendered-rmd_to_html_fig-1.png" style="display: block; margin: auto auto auto 0;" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="chunk-options">Chunk options<a class="anchor" aria-label="anchor" href="#chunk-options"></a>
<a class="anchor" aria-label="anchor" href="#chunk-options"></a>
</h2>
<hr class="half-width">
<p>There are a variety of options to affect how the code chunks are
treated. Here are some examples:</p>
<ul>
<li>Use <code>echo=FALSE</code> to avoid having the code itself
shown.</li>
<li>Use <code>results="hide"</code> to avoid having any results
printed.</li>
<li>Use <code>eval=FALSE</code> to have the code shown but not
evaluated.</li>
<li>Use <code>warning=FALSE</code> and <code>message=FALSE</code> to
hide any warnings or messages produced.</li>
<li>Use <code>fig.height</code> and <code>fig.width</code> to control
the size of the figures produced (in inches).</li>
</ul>
<p>So you might write:</p>
<pre>
```{r load_libraries, echo=FALSE, message=FALSE}
library("dplyr")
library("ggplot2")
```
</pre>
<p>Often there will be particular options that you’ll want to use
repeatedly; for this, you can set <em>global</em> chunk options, like
so:</p>
<pre>
```{r global_options, echo=FALSE}
knitr::opts_chunk$set(fig.path="Figs/", message=FALSE, warning=FALSE,
                      echo=FALSE, results="hide", fig.width=11)
```
</pre>
<p>The <code>fig.path</code> option defines where the figures will be
saved. The <code>/</code> here is really important; without it, the
figures would be saved in the standard place but just with names that
begin with <code>Figs</code>.</p>
<p>If you have multiple R Markdown files in a common directory, you
might want to use <code>fig.path</code> to define separate prefixes for
the figure file names, like <code>fig.path="Figs/cleaning-"</code> and
<code>fig.path="Figs/analysis-"</code>.</p>
<div id="challenge-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-3" class="callout-inner">
<h3 class="callout-title">Challenge 3<a class="anchor" aria-label="anchor" href="#challenge-3"></a>
</h3>
<div class="callout-content">
<p>Use chunk options to control the size of a figure and to hide the
code.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solution to Challenge 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<pre>
```{r echo = FALSE, fig.width = 3}
plot(faithful)
```
</pre>
</div>
</div>
</div>
</div>
<p>You can review all of the <code>R</code> chunk options by navigating
to the “R Markdown Cheat Sheet” under the “Cheatsheets” section of the
“Help” field in the toolbar at the top of RStudio.</p>
</section><section><h2 class="section-heading" id="inline-r-code">Inline R code<a class="anchor" aria-label="anchor" href="#inline-r-code"></a>
<a class="anchor" aria-label="anchor" href="#inline-r-code"></a>
</h2>
<hr class="half-width">
<p>You can make <em>every</em> number in your report reproducible. Use
<code>`r</code> and <code>`</code> for an in-line code chunk, like so:
<code>`r round(some_value, 2)`</code>. The code will be executed and
replaced with the <em>value</em> of the result.</p>
<p>Don’t let these in-line chunks get split across lines.</p>
<p>Perhaps precede the paragraph with a larger code chunk that does
calculations and defines variables, with <code>include=FALSE</code> for
that larger chunk (which is the same as <code>echo=FALSE</code> and
<code>results="hide"</code>).</p>
<p>Rounding can produce differences in output in such situations. You
may want <code>2.0</code>, but <code>round(2.03, 1)</code> will give
just <code>2</code>.</p>
<p>The <a href="https://github.com/kbroman/broman/blob/master/R/myround.R" class="external-link"><code>myround</code></a>
function in the <a href="https://github.com/kbroman/broman" class="external-link">R/broman</a>
package handles this.</p>
<div id="challenge-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-4" class="callout-inner">
<h3 class="callout-title">Challenge 4<a class="anchor" aria-label="anchor" href="#challenge-4"></a>
</h3>
<div class="callout-content">
<p>Try out a bit of in-line R code.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solution to Challenge 4
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Here’s some inline code to determine that 2 + 2 = <code>4</code>.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="other-output-options">Other output options<a class="anchor" aria-label="anchor" href="#other-output-options"></a>
<a class="anchor" aria-label="anchor" href="#other-output-options"></a>
</h2>
<hr class="half-width">
<p>You can also convert R Markdown to a PDF or a Word document. Click
the little triangle next to the “Knit” button to get a drop-down menu.
Or you could put <code>pdf_document</code> or <code>word_document</code>
in the initial header of the file.</p>
<div id="tip-creating-pdf-documents" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-creating-pdf-documents" class="callout-inner">
<h3 class="callout-title">Tip: Creating PDF documents<a class="anchor" aria-label="anchor" href="#tip-creating-pdf-documents"></a>
</h3>
<div class="callout-content">
<p>Creating .pdf documents may require installation of some extra
software. The R package <code>tinytex</code> provides some tools to help
make this process easier for R users. With <code>tinytex</code>
installed, run <code>tinytex::install_tinytex()</code> to install the
required software (you’ll only need to do this once) and then when you
knit to pdf <code>tinytex</code> will automatically detect and install
any additional LaTeX packages that are needed to produce the pdf
document. Visit the <a href="https://yihui.org/tinytex/" class="external-link">tinytex
website</a> for more information.</p>
</div>
</div>
</div>
<div id="tip-visual-markdown-editing-in-rstudio" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-visual-markdown-editing-in-rstudio" class="callout-inner">
<h3 class="callout-title">Tip: Visual markdown editing in RStudio<a class="anchor" aria-label="anchor" href="#tip-visual-markdown-editing-in-rstudio"></a>
</h3>
<div class="callout-content">
<p>RStudio versions 1.4 and later include visual markdown editing mode.
In visual editing mode, markdown expressions (like
<code>**bold words**</code>) are transformed to the formatted appearance
(<strong>bold words</strong>) as you type. This mode also includes a
toolbar at the top with basic formatting buttons, similar to what you
might see in common word processing software programs. You can turn
visual editing on and off by pressing the <img src="fig/visual_mode_icon.png" alt="Icon for turning on and off the visual editing mode in RStudio, which looks like a pair of compasses" class="figure">
button in the top right corner of your R Markdown document.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="resources">Resources<a class="anchor" aria-label="anchor" href="#resources"></a>
<a class="anchor" aria-label="anchor" href="#resources"></a>
</h2>
<hr class="half-width">
<ul>
<li><a href="https://kbroman.org/knitr_knutshell" class="external-link">Knitr in a knutshell
tutorial</a></li>
<li>
<a href="https://www.amazon.com/exec/obidos/ASIN/1482203537/7210-20" class="external-link">Dynamic
Documents with R and knitr</a> (book)</li>
<li><a href="https://rmarkdown.rstudio.com" class="external-link">R Markdown
documentation</a></li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf" class="external-link">R
Markdown cheat sheet</a></li>
<li><a href="https://www.rstudio.com/resources/webinars/getting-started-with-r-markdown/" class="external-link">Getting
started with R Markdown</a></li>
<li>
<a href="https://bookdown.org/yihui/rmarkdown/" class="external-link">R Markdown: The
Definitive Guide</a> (book by Rstudio team)</li>
<li><a href="https://www.rstudio.com/resources/webinars/reproducible-reporting/" class="external-link">Reproducible
Reporting</a></li>
<li><a href="https://www.rstudio.com/resources/webinars/the-ecosystem-of-r-markdown/" class="external-link">The
Ecosystem of R Markdown</a></li>
<li><a href="https://www.rstudio.com/resources/webinars/introducing-bookdown/" class="external-link">Introducing
Bookdown</a></li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Mix reporting written in R Markdown with software written in R.</li>
<li>Specify chunk options to control formatting.</li>
<li>Use <code>knitr</code> to convert these documents into PDF and other
formats.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-27-wrap-up"><p>Content from <a href="27-wrap-up.html">Writing Good Software</a></p>
<hr>
<p>Last updated on 2024-08-01 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/27-wrap-up.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I write software that other people can use?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe best practices for writing R and explain the justification
for each.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="structure-your-project-folder">Structure your project folder<a class="anchor" aria-label="anchor" href="#structure-your-project-folder"></a>
<a class="anchor" aria-label="anchor" href="#structure-your-project-folder"></a>
</h2>
<hr class="half-width">
<p>Keep your project folder structured, organized and tidy, by creating
subfolders for your code files, manuals, data, binaries, output plots,
etc. It can be done completely manually, or with the help of RStudio’s
<code>New Project</code> functionality, or a designated package, such as
<code>ProjectTemplate</code>.</p>
<div id="tip-projecttemplate---a-possible-solution" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-projecttemplate---a-possible-solution" class="callout-inner">
<h3 class="callout-title">Tip: ProjectTemplate - a possible solution<a class="anchor" aria-label="anchor" href="#tip-projecttemplate---a-possible-solution"></a>
</h3>
<div class="callout-content">
<p>One way to automate the management of projects is to install the
third-party package, <code>ProjectTemplate</code>. This package will set
up an ideal directory structure for project management. This is very
useful as it enables you to have your analysis pipeline/workflow
organised and structured. Together with the default RStudio project
functionality and Git you will be able to keep track of your work as
well as be able to share your work with collaborators.</p>
<ol style="list-style-type: decimal">
<li>Install <code>ProjectTemplate</code>.</li>
<li>Load the library</li>
<li>Initialise the project:</li>
</ol>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"ProjectTemplate"</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="st">"ProjectTemplate"</span><span class="op">)</span></span>
<span><span class="fu">create.project</span><span class="op">(</span><span class="st">"../my_project_2"</span>, merge.strategy <span class="op">=</span> <span class="st">"allow.non.conflict"</span><span class="op">)</span></span></code></pre>
</div>
<p>For more information on ProjectTemplate and its functionality visit
the home page <a href="https://projecttemplate.net/index.html" class="external-link">ProjectTemplate</a></p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="make-code-readable">Make code readable<a class="anchor" aria-label="anchor" href="#make-code-readable"></a>
<a class="anchor" aria-label="anchor" href="#make-code-readable"></a>
</h2>
<hr class="half-width">
<p>The most important part of writing code is making it readable and
understandable. You want someone else to be able to pick up your code
and be able to understand what it does: more often than not this someone
will be you 6 months down the line, who will otherwise be cursing
past-self.</p>
</section><section><h2 class="section-heading" id="documentation-tell-us-what-and-why-not-how">Documentation: tell us what and why, not how<a class="anchor" aria-label="anchor" href="#documentation-tell-us-what-and-why-not-how"></a>
<a class="anchor" aria-label="anchor" href="#documentation-tell-us-what-and-why-not-how"></a>
</h2>
<hr class="half-width">
<p>When you first start out, your comments will often describe what a
command does, since you’re still learning yourself and it can help to
clarify concepts and remind you later. However, these comments aren’t
particularly useful later on when you don’t remember what problem your
code is trying to solve. Try to also include comments that tell you
<em>why</em> you’re solving a problem, and <em>what</em> problem that
is. The <em>how</em> can come after that: it’s an implementation detail
you ideally shouldn’t have to worry about.</p>
</section><section><h2 class="section-heading" id="keep-your-code-modular">Keep your code modular<a class="anchor" aria-label="anchor" href="#keep-your-code-modular"></a>
<a class="anchor" aria-label="anchor" href="#keep-your-code-modular"></a>
</h2>
<hr class="half-width">
<p>Our recommendation is that you should separate your functions from
your analysis scripts, and store them in a separate file that you
<code>source</code> when you open the R session in your project. This
approach is nice because it leaves you with an uncluttered analysis
script, and a repository of useful functions that can be loaded into any
analysis script in your project. It also lets you group related
functions together easily.</p>
</section><section><h2 class="section-heading" id="break-down-problem-into-bite-size-pieces">Break down problem into bite size pieces<a class="anchor" aria-label="anchor" href="#break-down-problem-into-bite-size-pieces"></a>
<a class="anchor" aria-label="anchor" href="#break-down-problem-into-bite-size-pieces"></a>
</h2>
<hr class="half-width">
<p>When you first start out, problem solving and function writing can be
daunting tasks, and hard to separate from code inexperience. Try to
break down your problem into digestible chunks and worry about the
implementation details later: keep breaking down the problem into
smaller and smaller functions until you reach a point where you can code
a solution, and build back up from there.</p>
</section><section><h2 class="section-heading" id="know-that-your-code-is-doing-the-right-thing">Know that your code is doing the right thing<a class="anchor" aria-label="anchor" href="#know-that-your-code-is-doing-the-right-thing"></a>
<a class="anchor" aria-label="anchor" href="#know-that-your-code-is-doing-the-right-thing"></a>
</h2>
<hr class="half-width">
<p>Make sure to test your functions!</p>
</section><section><h2 class="section-heading" id="dont-repeat-yourself">Don’t repeat yourself<a class="anchor" aria-label="anchor" href="#dont-repeat-yourself"></a>
<a class="anchor" aria-label="anchor" href="#dont-repeat-yourself"></a>
</h2>
<hr class="half-width">
<p>Functions enable easy reuse within a project. If you see blocks of
similar lines of code through your project, those are usually candidates
for being moved into functions.</p>
<p>If your calculations are performed through a series of functions,
then the project becomes more modular and easier to change. This is
especially the case for which a particular input always gives a
particular output.</p>
</section><section><h2 class="section-heading" id="remember-to-be-stylish">Remember to be stylish<a class="anchor" aria-label="anchor" href="#remember-to-be-stylish"></a>
<a class="anchor" aria-label="anchor" href="#remember-to-be-stylish"></a>
</h2>
<hr class="half-width">
<p>Apply consistent style to your code.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Keep your project folder structured, organized and tidy.</li>
<li>Document what and why, not how.</li>
<li>Break programs into short single-purpose functions.</li>
<li>Write re-runnable tests.</li>
<li>Don’t repeat yourself.</li>
<li>Be consistent in naming, indentation, and other aspects of
style.</li>
</ul>
</div>
</div>
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/UCL-ARC/r-amr-epidemiology/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/UCL-ARC/r-amr-epidemiology/" class="external-link">Source</a></p>
				<p><a href="https://github.com/UCL-ARC/r-amr-epidemiology/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:ARC.Education@ucl.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.5" class="external-link">sandpaper (0.16.5)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.3" class="external-link">varnish (1.0.3)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://UCL-ARC.github.io/R-AMR-Epidemiology/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://UCL-ARC.github.io/R-AMR-Epidemiology/aio.html",
  "identifier": "https://UCL-ARC.github.io/R-AMR-Epidemiology/aio.html",
  "dateCreated": "2015-04-18",
  "dateModified": "2024-08-01",
  "datePublished": "2024-08-01"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

