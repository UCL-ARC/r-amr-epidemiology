<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>R for AMR Epidemiology: Linear regression and Broom</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/swc/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/swc/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/swc/favicon-16x16.png"><link rel="manifest" href="favicons/swc/site.webmanifest"><link rel="mask-icon" href="favicons/swc/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Software Carpentry" src="assets/images/software-logo.svg"></div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/24-linear-reg-broom.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="assets/images/software-logo-sm.svg"></div>
    <div class="lesson-title-md">
      R for AMR Epidemiology
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            R for AMR Epidemiology
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  R for AMR Epidemiology
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 62%" class="percentage">
    62%
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: 62%" aria-valuenow="62" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/24-linear-reg-broom.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-rstudio-intro.html">1. Introduction to R and RStudio</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-project-intro.html">2. Project Management With RStudio</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-seeking-help.html">3. Seeking Help</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-data-structures-part1.html">4. Data Structures</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-data-structures-part2.html">5. Exploring Data Frames</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-filedir.html">6. Navigating Files and Directories</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-basics.html">7. Automated Version Control</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-setup.html">8. Setting Up Git</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-create.html">9. Creating a Repository</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-changes.html">10. Tracking Changes</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="11-history.html">11. Exploring History</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="12-ignore.html">12. Ignoring Things</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="13-supplemental-rstudio.html">13. Supplemental: Using Git from RStudio</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush15">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading15">
        <a href="14-data-subsetting.html">14. Subsetting Data</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush16">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading16">
        <a href="15-plot-ggplot2.html">15. Creating Publication-Quality Graphics with ggplot2</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush17">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading17">
        <a href="16-writing-data.html">16. Writing Data</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush18">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading18">
        <a href="17-github.html">17. Remotes in GitHub</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush19">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading19">
        <a href="18-collab.html">18. Collaborating</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush20">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading20">
        <a href="19-conflict.html">19. Conflicts</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush21">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading21">
        <a href="20-dplyr.html">20. Data Frame Manipulation with dplyr</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush22">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading22">
        <a href="21-tidyr.html">21. Data Frame Manipulation with tidyr</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush23">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading23">
        <a href="22-quarto.html">22. Producing Reports With Quarto</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush24">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading24">
        <a href="23-statistics.html">23. Basic Statistics: describing, modelling and reporting</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        24. Linear regression and Broom
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#content">Content</a></li>
<li><a href="#data">Data</a></li>
<li><a href="#linear-regression">Linear regression</a></li>
<li><a href="#broom">Broom</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush26">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading26">
        <a href="25-linreg-diagnostics.html">25. Assumption Diagnostics and Regression Trouble Shooting</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush27">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading27">
        <a href="26-log-regression.html">26. Logistic Regression</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush28">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading28">
        <a href="27-sql-r.html">27. SQL and R</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush29">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading29">
        <a href="27-wrap-up.html">28. Writing Good Software</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li><li><a href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="23-statistics.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="25-linreg-diagnostics.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="23-statistics.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Basic Statistics:
        </a>
        <a class="chapter-link float-end" href="25-linreg-diagnostics.html" rel="next">
          Next: Assumption...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Linear regression and Broom</h1>
        <p>Last updated on 2025-02-10 |

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/24-linear-reg-broom.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How can I explore relationships between variables in my data?</li>
<li>How can I present model outputs in an easier to read way?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>To be able to explore relationships between variables</li>
<li>To be able to calculate predicted variables and residuals</li>
<li>To be able to construct linear regression models</li>
<li>To be able to present model outcomes using Broom</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="content">Content<a class="anchor" aria-label="anchor" href="#content"></a></h2>
<hr class="half-width"><ul><li>Linear Regression Models</li>
<li>Use of Log transform</li>
<li>Use of Categorical Variables</li>
<li>Use of Broom</li>
</ul></section><section><h2 class="section-heading" id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a></h2>
<hr class="half-width"><div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># We will need these libraries and this data later.</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">lmtest</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">sandwich</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">broom</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lon_dims_imd_2019</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"data/English_IMD_2019_Domains_rebased_London_by_CDRC.csv"</span><span class="op">)</span></span></code></pre>
</div>
<p>We are going to use the data from the Consumer Data Research Centre,
specifically the London IMD 2019 (English IMD 2019 Domains rebased).</p>
<p>Atribution: Data provided by the Consumer Data Research Centre, an
ESRC Data Investment: ES/L011840/1, ES/L011891/1</p>
<p>The statistical unit areas across the country are Lower layer Super
Output Areas (LSOAs). We will explore the relationships between the
different dimensions of the Indices of Multiple Deprivation.</p>
</section><section><h2 class="section-heading" id="linear-regression">Linear regression<a class="anchor" aria-label="anchor" href="#linear-regression"></a></h2>
<hr class="half-width"><p>Linear Regression enables use to to explore the the linear
relationship of the dependent variable Y and independent variable(s)
X(s). We are going to explore the linear relationship between the Health
Deprivation and Disability Domain and the Living Environment Deprivation
Domain.</p>
<p>The Health Deprivation and Disability Domain measures the risk of
premature death and the impairment of quality of life through poor
physical or mental health. The domain measures morbidity, disability and
premature mortality but not aspects of behaviour or environment that may
be predictive of future health deprivation.</p>
<p>The Living Environment Deprivation Domain measures the quality of the
local environment. The indicators fall into two sub-domains. The
‘indoors’ living environment measures the quality of housing; while the
‘outdoors’ living environment contains measures of air quality and road
traffic accidents.</p>
<p>Reference: McLennan, David et al. The English Indices of Deprivation
2019 : Technical Report. Ministry of Housing, Communities and Local
Government, 2019. Print.</p>
<div class="section level3">
<h3 id="simple-linear-regression">Simple linear regression<a class="anchor" aria-label="anchor" href="#simple-linear-regression"></a></h3>
<p>In the simple linear regression example we have only one dependent
variable (health_london_rank) and one independent variable
(livingEnv_london_rank).</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reg_LivEnv_health</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">health_london_rank</span> <span class="op">~</span> <span class="va">livingEnv_london_rank</span>, data <span class="op">=</span> <span class="va">lon_dims_imd_2019</span><span class="op">)</span></span>
<span><span class="co"># We put the dependent variable to the left of the '~' and the independent variable(s) to the right</span></span>
<span><span class="co"># and we tell R which dataset we are referring to.</span></span>
<span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">reg_LivEnv_health</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Call:
lm(formula = health_london_rank ~ livingEnv_london_rank, data = lon_dims_imd_2019)

Residuals:
     Min       1Q   Median       3Q      Max
-21549.6  -5948.2    609.1   6239.2  15792.2

Coefficients:
                       Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)           1.692e+04  2.274e+02   74.40   &lt;2e-16 ***
livingEnv_london_rank 3.430e-01  1.915e-02   17.91   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 7625 on 4833 degrees of freedom
Multiple R-squared:  0.06225,	Adjusted R-squared:  0.06205
F-statistic: 320.8 on 1 and 4833 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<p>From the result of this analysis, we can see that the Living
Environment Deprivation Domain rank has a significant(small p-value,
general rule of thumb &lt;0.05) and positive relationship(positive
coefficient) with the Health Deprivation and Disability Domain rank.</p>
<p>One way of interpreting the result is: One unit increase in the
Living Environment rank is related to around 0.343 (3.430e-01) points
increase of the Health Deprivation and Disability rank.</p>
<p>R-square shows the amount of variance of Y explained by X. In this
case the Living Environment rank explains 6.225% of the variance in the
Health Deprivation and Disability rank. Adj R2(6.205%) shows the same as
R2 but adjusted by the # of cases and # of variables. When the # of
variables is small and the # of cases is very large then Adj R2 is
closer to R2.</p>
</div>
<div class="section level3">
<h3 id="log-transform">Log transform<a class="anchor" aria-label="anchor" href="#log-transform"></a></h3>
<p>If your data is skewed, it can be useful to transform a variable to
it’s log form when doing the regression. You can either transform the
variable beforehand or do so in the equation.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reg_logbarriers_health</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">health_london_rank</span> <span class="op">~</span> <span class="fu">log</span><span class="op">(</span><span class="va">barriers_london_rank</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">lon_dims_imd_2019</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">reg_logbarriers_health</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Call:
lm(formula = health_london_rank ~ log(barriers_london_rank),
    data = lon_dims_imd_2019)

Residuals:
     Min       1Q   Median       3Q      Max
-20379.3  -5611.7    774.9   5988.6  23828.5

Coefficients:
                          Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)                -1349.4      798.3   -1.69    0.091 .
log(barriers_london_rank)   2917.0      105.7   27.59   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 7319 on 4833 degrees of freedom
Multiple R-squared:  0.1361,	Adjusted R-squared:  0.1359
F-statistic: 761.1 on 1 and 4833 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<p>The interpretation of the log-transformed variable is a bit
different. In this example only the predictor variable is log
tranformed, therefore to interpret the slope coefficient we divide it by
100 (2917.0/100=29.170).</p>
<p>If the dependent/response variable is solely log-transformed,
exponentiate the coefficient. This gives the multiplicative factor for
every one-unit increase in the independent variable. Example: the
coefficient is 0.198. exp(0.198) = 1.218962. For every one-unit increase
in the independent variable, our dependent variable increases by a
factor of about 1.22, or 22%. Recall that multiplying a number by 1.22
is the same as increasing the number by 22%. Likewise, multiplying a
number by, say 0.84, is the same as decreasing the number by 1 – 0.84 =
0.16, or 16%.</p>
<p>If both are transformed, interpret the coefficient as the percent
increase in the dependent variable for every 1% increase in the
independent variable. Example: the coefficient is 0.198. For every 1%
increase in the independent variable, our dependent variable increases
by about 0.20%. For x percent increase, calculate 1.x to the power of
the coefficient, subtract 1, and multiply by 100. Example: For every 20%
increase in the independent variable, our dependent variable increases
by about (1.20 0.198 - 1) * 100 = 3.7 percent.</p>
</div>
<div class="section level3">
<h3 id="predicted-values-and-residuals">Predicted values and residuals<a class="anchor" aria-label="anchor" href="#predicted-values-and-residuals"></a></h3>
<p>We can expand our simple linear regression example to incorporate the
Barriers to Housing and Services Domain rank. The Barriers to Housing
and Services Domain measures the physical and financial accessibility of
housing and local services. The indicators fall into two sub-domains:
‘geographical barriers’, which relate to the physical proximity of local
services, and ‘wider barriers’ which includes issues relating to access
to housing, such as affordability.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reg_LivEnv_barriers_health</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span></span>
<span>  <span class="va">health_london_rank</span> <span class="op">~</span> <span class="va">livingEnv_london_rank</span> <span class="op">+</span> <span class="va">barriers_london_rank</span>,</span>
<span>  data <span class="op">=</span> <span class="va">lon_dims_imd_2019</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">reg_LivEnv_barriers_health</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Call:
lm(formula = health_london_rank ~ livingEnv_london_rank + barriers_london_rank,
    data = lon_dims_imd_2019)

Residuals:
     Min       1Q   Median       3Q      Max
-21685.8  -4834.9    546.5   5142.4  18971.7

Coefficients:
                       Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)           1.169e+04  2.502e+02   46.74   &lt;2e-16 ***
livingEnv_london_rank 2.620e-01  1.721e-02   15.22   &lt;2e-16 ***
barriers_london_rank  2.508e+00  7.059e-02   35.54   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6790 on 4832 degrees of freedom
Multiple R-squared:  0.2566,	Adjusted R-squared:  0.2562
F-statistic: 833.7 on 2 and 4832 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<p>After running the regression model, we can access the model predicted
values and the residuals compared to the real observations.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first we fit the predictions</span></span>
<span><span class="va">health_rank_pred</span> <span class="op">&lt;-</span> <span class="fu">fitted</span><span class="op">(</span><span class="va">reg_LivEnv_barriers_health</span><span class="op">)</span></span>
<span><span class="va">health_rank_pred</span> <span class="op">&lt;-</span> <span class="fu">as.data.frame</span><span class="op">(</span><span class="va">health_rank_pred</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># now we add the residual values too</span></span>
<span><span class="va">health_rank_resid</span> <span class="op">&lt;-</span> <span class="fu">residuals</span><span class="op">(</span><span class="va">reg_LivEnv_barriers_health</span><span class="op">)</span></span>
<span><span class="va">health_rank_pred</span><span class="op">$</span><span class="va">resid</span> <span class="op">&lt;-</span> <span class="va">health_rank_resid</span></span>
<span></span>
<span><span class="co"># We can thenview the predictions and residuals</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">health_rank_pred</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  health_rank_pred     resid
1         20454.30 11658.702
2         24260.97  5444.031
3         15233.92  2366.080
4         16671.36  1235.645
5         15719.80  5861.196
6         14981.47  1432.528</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># You can view the full data in RStudio with the View() function</span></span>
<span><span class="fu">View</span><span class="op">(</span><span class="va">health_rank_pred</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="robust-regression">Robust regression<a class="anchor" aria-label="anchor" href="#robust-regression"></a></h3>
<p>We can run the robust standard error regressions(control for
heteroskedasticity, meaning unequal variances):</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reg_LivEnv_barriers_health</span><span class="op">$</span><span class="va">robse</span> <span class="op">&lt;-</span> <span class="fu">vcovHC</span><span class="op">(</span><span class="va">reg_LivEnv_barriers_health</span>, type <span class="op">=</span> <span class="st">"HC1"</span><span class="op">)</span></span>
<span><span class="fu">coeftest</span><span class="op">(</span><span class="va">reg_LivEnv_barriers_health</span>, <span class="va">reg_LivEnv_barriers_health</span><span class="op">$</span><span class="va">robse</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
t test of coefficients:

                        Estimate Std. Error t value  Pr(&gt;|t|)
(Intercept)           1.1694e+04 2.3776e+02  49.182 &lt; 2.2e-16 ***
livingEnv_london_rank 2.6197e-01 1.7458e-02  15.006 &lt; 2.2e-16 ***
barriers_london_rank  2.5085e+00 6.4394e-02  38.955 &lt; 2.2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<p>In addition, we can access the cluster-robust standard errors
regression results:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># cluster-robust standard errors</span></span>
<span><span class="fu">coeftest</span><span class="op">(</span><span class="va">reg_LivEnv_barriers_health</span>, <span class="va">reg_LivEnv_barriers_health</span><span class="op">$</span><span class="va">clse</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
t test of coefficients:

                        Estimate Std. Error t value  Pr(&gt;|t|)
(Intercept)           1.1694e+04 2.5018e+02  46.741 &lt; 2.2e-16 ***
livingEnv_london_rank 2.6197e-01 1.7207e-02  15.225 &lt; 2.2e-16 ***
barriers_london_rank  2.5085e+00 7.0588e-02  35.537 &lt; 2.2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div id="challenge-1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1</h3>
<div class="callout-content">
<p>Use the <code>gapminder</code> data to create a linear model between
two continuous variables.</p>
<p>Discuss your question and your findings.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="regression-with-categorical-independent-variables">Regression with categorical independent variables<a class="anchor" aria-label="anchor" href="#regression-with-categorical-independent-variables"></a></h3>
<p>We will explore the use of categorical independent variables in
linear regression in this episode. When the dependent variable is a
categorical variable, you may consider the alternatives of linear
regression like logit regression and multinomial regression.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># As a categorical variable we have added la19nm, these are the names of the London boroughs</span></span>
<span><span class="va">reg_cat_var</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">health_london_rank</span> <span class="op">~</span> <span class="va">livingEnv_london_rank</span> <span class="op">+</span> <span class="va">barriers_london_rank</span> <span class="op">+</span> <span class="va">la19nm</span>, data <span class="op">=</span> <span class="va">lon_dims_imd_2019</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">reg_cat_var</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Call:
lm(formula = health_london_rank ~ livingEnv_london_rank + barriers_london_rank +
    la19nm, data = lon_dims_imd_2019)

Residuals:
     Min       1Q   Median       3Q      Max
-21694.3  -3423.6    248.1   3691.8  19321.5

Coefficients:
                               Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)                   1.105e+04  5.429e+02  20.346  &lt; 2e-16 ***
livingEnv_london_rank         3.595e-02  1.802e-02   1.996 0.046036 *
barriers_london_rank          3.149e+00  7.888e-02  39.924  &lt; 2e-16 ***
la19nmBarnet                  8.400e+03  6.508e+02  12.908  &lt; 2e-16 ***
la19nmBexley                  1.416e+03  7.186e+02   1.970 0.048856 *
la19nmBrent                   7.765e+03  6.545e+02  11.863  &lt; 2e-16 ***
la19nmBromley                 5.208e+03  6.789e+02   7.670 2.06e-14 ***
la19nmCamden                 -1.842e+03  7.426e+02  -2.480 0.013184 *
la19nmCity of London          4.742e+03  2.251e+03   2.107 0.035185 *
la19nmCroydon                 7.488e+02  6.388e+02   1.172 0.241192
la19nmEaling                  3.697e+03  6.459e+02   5.724 1.11e-08 ***
la19nmEnfield                 7.344e+03  6.501e+02  11.297  &lt; 2e-16 ***
la19nmGreenwich              -2.221e+03  6.873e+02  -3.232 0.001238 **
la19nmHackney                -2.725e+03  6.811e+02  -4.000 6.43e-05 ***
la19nmHammersmith and Fulham -3.907e+03  7.438e+02  -5.252 1.57e-07 ***
la19nmHaringey                1.019e+03  6.877e+02   1.481 0.138580
la19nmHarrow                  9.993e+03  7.053e+02  14.168  &lt; 2e-16 ***
la19nmHavering               -3.945e+02  7.317e+02  -0.539 0.589781
la19nmHillingdon              8.459e+02  6.937e+02   1.219 0.222791
la19nmHounslow                2.462e+03  6.890e+02   3.573 0.000356 ***
la19nmIslington              -8.217e+03  7.305e+02 -11.248  &lt; 2e-16 ***
la19nmKensington and Chelsea  9.191e+03  7.473e+02  12.299  &lt; 2e-16 ***
la19nmKingston upon Thames    4.899e+03  7.804e+02   6.277 3.75e-10 ***
la19nmLambeth                -6.270e+03  6.830e+02  -9.180  &lt; 2e-16 ***
la19nmLewisham               -1.991e+03  6.675e+02  -2.983 0.002869 **
la19nmMerton                  3.387e+02  7.474e+02   0.453 0.650434
la19nmNewham                  4.209e+03  6.617e+02   6.361 2.19e-10 ***
la19nmRedbridge               4.420e+03  6.914e+02   6.392 1.79e-10 ***
la19nmRichmond upon Thames    4.469e+03  7.740e+02   5.774 8.22e-09 ***
la19nmSouthwark              -3.363e+03  6.731e+02  -4.996 6.05e-07 ***
la19nmSutton                 -1.729e+02  7.537e+02  -0.229 0.818563
la19nmTower Hamlets          -5.862e+03  6.968e+02  -8.414  &lt; 2e-16 ***
la19nmWaltham Forest          2.026e+03  6.854e+02   2.956 0.003137 **
la19nmWandsworth              1.087e+01  6.797e+02   0.016 0.987246
la19nmWestminster             5.683e+02  7.472e+02   0.761 0.446958
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 5362 on 4800 degrees of freedom
Multiple R-squared:  0.5395,	Adjusted R-squared:  0.5363
F-statistic: 165.4 on 34 and 4800 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<p>R automatically recognizes la19nm as a factor and treats it
accordingly. The missing one in the coefficient summary (Barking and
Dagenham) is treated as a base line, therefore the value is 0. However,
we can also modify our model to show for all:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reg_cat_var_showall</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span></span>
<span>  <span class="va">health_london_rank</span> <span class="op">~</span> <span class="fl">0</span> <span class="op">+</span> <span class="va">livingEnv_london_rank</span> <span class="op">+</span> <span class="va">barriers_london_rank</span> <span class="op">+</span> <span class="va">la19nm</span>,</span>
<span>  data <span class="op">=</span> <span class="va">lon_dims_imd_2019</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">reg_cat_var_showall</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Call:
lm(formula = health_london_rank ~ 0 + livingEnv_london_rank +
    barriers_london_rank + la19nm, data = lon_dims_imd_2019)

Residuals:
     Min       1Q   Median       3Q      Max
-21694.3  -3423.6    248.1   3691.8  19321.5

Coefficients:
                              Estimate Std. Error t value Pr(&gt;|t|)
livingEnv_london_rank        3.595e-02  1.802e-02   1.996    0.046 *
barriers_london_rank         3.149e+00  7.888e-02  39.924  &lt; 2e-16 ***
la19nmBarking and Dagenham   1.105e+04  5.429e+02  20.346  &lt; 2e-16 ***
la19nmBarnet                 1.945e+04  4.764e+02  40.820  &lt; 2e-16 ***
la19nmBexley                 1.246e+04  5.876e+02  21.209  &lt; 2e-16 ***
la19nmBrent                  1.881e+04  4.526e+02  41.564  &lt; 2e-16 ***
la19nmBromley                1.625e+04  5.444e+02  29.858  &lt; 2e-16 ***
la19nmCamden                 9.205e+03  5.783e+02  15.918  &lt; 2e-16 ***
la19nmCity of London         1.579e+04  2.198e+03   7.184 7.78e-13 ***
la19nmCroydon                1.180e+04  4.574e+02  25.789  &lt; 2e-16 ***
la19nmEaling                 1.474e+04  4.388e+02  33.601  &lt; 2e-16 ***
la19nmEnfield                1.839e+04  4.549e+02  40.431  &lt; 2e-16 ***
la19nmGreenwich              8.825e+03  5.233e+02  16.865  &lt; 2e-16 ***
la19nmHackney                8.322e+03  4.675e+02  17.802  &lt; 2e-16 ***
la19nmHammersmith and Fulham 7.140e+03  5.675e+02  12.582  &lt; 2e-16 ***
la19nmHaringey               1.207e+04  4.848e+02  24.886  &lt; 2e-16 ***
la19nmHarrow                 2.104e+04  5.667e+02  37.127  &lt; 2e-16 ***
la19nmHavering               1.065e+04  6.178e+02  17.243  &lt; 2e-16 ***
la19nmHillingdon             1.189e+04  5.541e+02  21.464  &lt; 2e-16 ***
la19nmHounslow               1.351e+04  5.050e+02  26.750  &lt; 2e-16 ***
la19nmIslington              2.830e+03  5.500e+02   5.145 2.78e-07 ***
la19nmKensington and Chelsea 2.024e+04  5.491e+02  36.859  &lt; 2e-16 ***
la19nmKingston upon Thames   1.595e+04  6.476e+02  24.624  &lt; 2e-16 ***
la19nmLambeth                4.777e+03  4.657e+02  10.257  &lt; 2e-16 ***
la19nmLewisham               9.055e+03  4.543e+02  19.931  &lt; 2e-16 ***
la19nmMerton                 1.139e+04  5.935e+02  19.182  &lt; 2e-16 ***
la19nmNewham                 1.526e+04  4.467e+02  34.149  &lt; 2e-16 ***
la19nmRedbridge              1.547e+04  5.307e+02  29.141  &lt; 2e-16 ***
la19nmRichmond upon Thames   1.552e+04  6.355e+02  24.414  &lt; 2e-16 ***
la19nmSouthwark              7.684e+03  4.662e+02  16.481  &lt; 2e-16 ***
la19nmSutton                 1.087e+04  6.274e+02  17.332  &lt; 2e-16 ***
la19nmTower Hamlets          5.184e+03  5.107e+02  10.151  &lt; 2e-16 ***
la19nmWaltham Forest         1.307e+04  4.831e+02  27.057  &lt; 2e-16 ***
la19nmWandsworth             1.106e+04  4.905e+02  22.543  &lt; 2e-16 ***
la19nmWestminster            1.161e+04  5.649e+02  20.560  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 5362 on 4800 degrees of freedom
Multiple R-squared:  0.9407,	Adjusted R-squared:  0.9403
F-statistic:  2177 on 35 and 4800 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="categorical-variables-with-interaction-terms">Categorical variables with interaction terms<a class="anchor" aria-label="anchor" href="#categorical-variables-with-interaction-terms"></a></h3>
<p>Sometimes we are interested in how a variable interacts with another
variable. We can explore any interactions between locations (la19nm) and
the living environment and barrier ranks.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reg_cat_var_int</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">health_london_rank</span> <span class="op">~</span> <span class="va">la19nm</span> <span class="op">*</span> <span class="op">(</span><span class="va">livingEnv_london_rank</span> <span class="op">+</span> <span class="va">barriers_london_rank</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">lon_dims_imd_2019</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">reg_cat_var_int</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Call:
lm(formula = health_london_rank ~ la19nm * (livingEnv_london_rank +
    barriers_london_rank), data = lon_dims_imd_2019)

Residuals:
     Min       1Q   Median       3Q      Max
-19227.9  -3254.4    297.6   3372.8  17891.5

Coefficients:
                                                     Estimate Std. Error
(Intercept)                                         1.300e+04  1.431e+03
la19nmBarnet                                        9.411e+03  1.909e+03
la19nmBexley                                       -5.447e+03  2.464e+03
la19nmBrent                                         3.068e+03  1.866e+03
la19nmBromley                                       1.577e+03  2.107e+03
la19nmCamden                                       -1.547e+04  3.565e+03
la19nmCity of London                               -8.405e+02  5.283e+03
la19nmCroydon                                      -3.824e+03  1.679e+03
la19nmEaling                                        2.124e+03  1.841e+03
la19nmEnfield                                       2.420e+03  1.750e+03
la19nmGreenwich                                    -3.383e+03  2.268e+03
la19nmHackney                                      -1.803e+03  1.937e+03
la19nmHammersmith and Fulham                       -1.123e+04  2.389e+03
la19nmHaringey                                     -4.527e+02  1.975e+03
la19nmHarrow                                        7.800e+03  2.476e+03
la19nmHavering                                     -8.133e+03  2.519e+03
la19nmHillingdon                                    7.792e+02  2.030e+03
la19nmHounslow                                      4.939e+03  2.064e+03
la19nmIslington                                    -4.614e+03  2.592e+03
la19nmKensington and Chelsea                        1.264e+04  2.185e+03
la19nmKingston upon Thames                          5.297e+03  2.972e+03
la19nmLambeth                                      -6.973e+03  2.276e+03
la19nmLewisham                                     -4.745e+03  1.912e+03
la19nmMerton                                       -8.433e+03  2.793e+03
la19nmNewham                                        3.468e+03  1.786e+03
la19nmRedbridge                                     4.339e+03  2.156e+03
la19nmRichmond upon Thames                          3.822e+03  4.288e+03
la19nmSouthwark                                    -6.830e+03  1.923e+03
la19nmSutton                                       -8.242e+03  2.600e+03
la19nmTower Hamlets                                -2.705e+03  2.163e+03
la19nmWaltham Forest                                2.070e+03  1.814e+03
la19nmWandsworth                                    6.438e+02  2.060e+03
la19nmWestminster                                  -1.063e+04  3.281e+03
livingEnv_london_rank                              -1.900e-01  1.321e-01
barriers_london_rank                                3.620e+00  8.023e-01
la19nmBarnet:livingEnv_london_rank                  1.641e-01  1.553e-01
la19nmBexley:livingEnv_london_rank                  5.286e-01  1.644e-01
la19nmBrent:livingEnv_london_rank                   5.219e-01  1.663e-01
la19nmBromley:livingEnv_london_rank                 4.577e-01  1.492e-01
la19nmCamden:livingEnv_london_rank                 -4.599e-02  1.783e-01
la19nmCity of London:livingEnv_london_rank          3.448e-01  9.482e-01
la19nmCroydon:livingEnv_london_rank                 4.524e-01  1.417e-01
la19nmEaling:livingEnv_london_rank                  2.053e-01  1.624e-01
la19nmEnfield:livingEnv_london_rank                 5.217e-01  1.556e-01
la19nmGreenwich:livingEnv_london_rank               2.230e-01  1.620e-01
la19nmHackney:livingEnv_london_rank                -2.882e-01  1.817e-01
la19nmHammersmith and Fulham:livingEnv_london_rank  1.915e-01  2.025e-01
la19nmHaringey:livingEnv_london_rank               -9.428e-02  2.048e-01
la19nmHarrow:livingEnv_london_rank                  3.559e-01  1.774e-01
la19nmHavering:livingEnv_london_rank                5.238e-01  1.584e-01
la19nmHillingdon:livingEnv_london_rank              3.026e-01  1.572e-01
la19nmHounslow:livingEnv_london_rank               -3.776e-02  1.691e-01
la19nmIslington:livingEnv_london_rank              -4.471e-01  1.967e-01
la19nmKensington and Chelsea:livingEnv_london_rank -1.673e+00  2.725e-01
la19nmKingston upon Thames:livingEnv_london_rank    2.551e-01  1.748e-01
la19nmLambeth:livingEnv_london_rank                -1.901e-01  2.037e-01
la19nmLewisham:livingEnv_london_rank                1.834e-01  1.687e-01
la19nmMerton:livingEnv_london_rank                  5.430e-01  1.761e-01
la19nmNewham:livingEnv_london_rank                 -4.372e-03  1.627e-01
la19nmRedbridge:livingEnv_london_rank               2.310e-01  1.655e-01
la19nmRichmond upon Thames:livingEnv_london_rank   -2.672e-03  1.876e-01
la19nmSouthwark:livingEnv_london_rank               2.786e-01  1.656e-01
la19nmSutton:livingEnv_london_rank                  5.311e-01  1.576e-01
la19nmTower Hamlets:livingEnv_london_rank           1.954e-01  1.629e-01
la19nmWaltham Forest:livingEnv_london_rank         -2.538e-02  1.729e-01
la19nmWandsworth:livingEnv_london_rank             -1.552e-01  1.637e-01
la19nmWestminster:livingEnv_london_rank            -9.646e-01  2.107e-01
la19nmBarnet:barriers_london_rank                  -1.334e+00  8.565e-01
la19nmBexley:barriers_london_rank                  -4.421e-01  8.661e-01
la19nmBrent:barriers_london_rank                   -7.477e-01  9.505e-01
la19nmBromley:barriers_london_rank                 -1.240e+00  8.666e-01
la19nmCamden:barriers_london_rank                   2.994e+00  1.172e+00
la19nmCity of London:barriers_london_rank           1.001e+00  3.050e+00
la19nmCroydon:barriers_london_rank                 -6.200e-01  8.595e-01
la19nmEaling:barriers_london_rank                  -5.816e-01  8.604e-01
la19nmEnfield:barriers_london_rank                 -6.740e-01  8.776e-01
la19nmGreenwich:barriers_london_rank               -8.003e-01  8.842e-01
la19nmHackney:barriers_london_rank                  4.611e-01  1.427e+00
la19nmHammersmith and Fulham:barriers_london_rank   1.442e+00  9.425e-01
la19nmHaringey:barriers_london_rank                 4.613e-01  9.154e-01
la19nmHarrow:barriers_london_rank                  -1.413e+00  9.202e-01
la19nmHavering:barriers_london_rank                -3.766e-01  9.029e-01
la19nmHillingdon:barriers_london_rank              -1.592e+00  8.683e-01
la19nmHounslow:barriers_london_rank                -1.445e+00  9.061e-01
la19nmIslington:barriers_london_rank               -7.852e-01  1.031e+00
la19nmKensington and Chelsea:barriers_london_rank   1.076e+00  1.007e+00
la19nmKingston upon Thames:barriers_london_rank    -1.257e+00  9.816e-01
la19nmLambeth:barriers_london_rank                 -3.110e-01  9.491e-01
la19nmLewisham:barriers_london_rank                 1.004e-01  9.045e-01
la19nmMerton:barriers_london_rank                   4.934e-01  9.399e-01
la19nmNewham:barriers_london_rank                   2.625e+00  2.260e+00
la19nmRedbridge:barriers_london_rank               -1.116e+00  8.944e-01
la19nmRichmond upon Thames:barriers_london_rank    -1.884e-01  1.104e+00
la19nmSouthwark:barriers_london_rank                5.627e-02  9.074e-01
la19nmSutton:barriers_london_rank                  -5.571e-02  9.399e-01
la19nmTower Hamlets:barriers_london_rank           -2.394e+00  9.808e-01
la19nmWaltham Forest:barriers_london_rank          -5.478e-01  9.237e-01
la19nmWandsworth:barriers_london_rank              -2.874e-01  8.705e-01
la19nmWestminster:barriers_london_rank              3.494e+00  1.111e+00
                                                   t value Pr(&gt;|t|)
(Intercept)                                          9.089  &lt; 2e-16 ***
la19nmBarnet                                         4.929 8.57e-07 ***
la19nmBexley                                        -2.210 0.027119 *
la19nmBrent                                          1.645 0.100112
la19nmBromley                                        0.749 0.454155
la19nmCamden                                        -4.338 1.47e-05 ***
la19nmCity of London                                -0.159 0.873612
la19nmCroydon                                       -2.277 0.022851 *
la19nmEaling                                         1.154 0.248528
la19nmEnfield                                        1.382 0.166890
la19nmGreenwich                                     -1.491 0.135952
la19nmHackney                                       -0.931 0.352136
la19nmHammersmith and Fulham                        -4.700 2.68e-06 ***
la19nmHaringey                                      -0.229 0.818706
la19nmHarrow                                         3.150 0.001640 **
la19nmHavering                                      -3.228 0.001254 **
la19nmHillingdon                                     0.384 0.701039
la19nmHounslow                                       2.393 0.016735 *
la19nmIslington                                     -1.780 0.075114 .
la19nmKensington and Chelsea                         5.787 7.61e-09 ***
la19nmKingston upon Thames                           1.782 0.074808 .
la19nmLambeth                                       -3.064 0.002197 **
la19nmLewisham                                      -2.482 0.013106 *
la19nmMerton                                        -3.019 0.002549 **
la19nmNewham                                         1.942 0.052165 .
la19nmRedbridge                                      2.013 0.044191 *
la19nmRichmond upon Thames                           0.891 0.372776
la19nmSouthwark                                     -3.552 0.000387 ***
la19nmSutton                                        -3.169 0.001538 **
la19nmTower Hamlets                                 -1.251 0.211119
la19nmWaltham Forest                                 1.141 0.253966
la19nmWandsworth                                     0.313 0.754638
la19nmWestminster                                   -3.240 0.001203 **
livingEnv_london_rank                               -1.438 0.150471
barriers_london_rank                                 4.511 6.60e-06 ***
la19nmBarnet:livingEnv_london_rank                   1.057 0.290593
la19nmBexley:livingEnv_london_rank                   3.215 0.001312 **
la19nmBrent:livingEnv_london_rank                    3.139 0.001705 **
la19nmBromley:livingEnv_london_rank                  3.068 0.002169 **
la19nmCamden:livingEnv_london_rank                  -0.258 0.796425
la19nmCity of London:livingEnv_london_rank           0.364 0.716133
la19nmCroydon:livingEnv_london_rank                  3.191 0.001425 **
la19nmEaling:livingEnv_london_rank                   1.264 0.206349
la19nmEnfield:livingEnv_london_rank                  3.354 0.000803 ***
la19nmGreenwich:livingEnv_london_rank                1.376 0.168758
la19nmHackney:livingEnv_london_rank                 -1.586 0.112711
la19nmHammersmith and Fulham:livingEnv_london_rank   0.946 0.344403
la19nmHaringey:livingEnv_london_rank                -0.460 0.645286
la19nmHarrow:livingEnv_london_rank                   2.005 0.044971 *
la19nmHavering:livingEnv_london_rank                 3.307 0.000951 ***
la19nmHillingdon:livingEnv_london_rank               1.925 0.054317 .
la19nmHounslow:livingEnv_london_rank                -0.223 0.823335
la19nmIslington:livingEnv_london_rank               -2.273 0.023082 *
la19nmKensington and Chelsea:livingEnv_london_rank  -6.137 9.08e-10 ***
la19nmKingston upon Thames:livingEnv_london_rank     1.459 0.144509
la19nmLambeth:livingEnv_london_rank                 -0.934 0.350602
la19nmLewisham:livingEnv_london_rank                 1.087 0.277108
la19nmMerton:livingEnv_london_rank                   3.082 0.002065 **
la19nmNewham:livingEnv_london_rank                  -0.027 0.978565
la19nmRedbridge:livingEnv_london_rank                1.396 0.162864
la19nmRichmond upon Thames:livingEnv_london_rank    -0.014 0.988639
la19nmSouthwark:livingEnv_london_rank                1.683 0.092533 .
la19nmSutton:livingEnv_london_rank                   3.370 0.000759 ***
la19nmTower Hamlets:livingEnv_london_rank            1.200 0.230337
la19nmWaltham Forest:livingEnv_london_rank          -0.147 0.883300
la19nmWandsworth:livingEnv_london_rank              -0.948 0.343019
la19nmWestminster:livingEnv_london_rank             -4.578 4.80e-06 ***
la19nmBarnet:barriers_london_rank                   -1.558 0.119396
la19nmBexley:barriers_london_rank                   -0.510 0.609807
la19nmBrent:barriers_london_rank                    -0.787 0.431493
la19nmBromley:barriers_london_rank                  -1.431 0.152500
la19nmCamden:barriers_london_rank                    2.555 0.010647 *
la19nmCity of London:barriers_london_rank            0.328 0.742734
la19nmCroydon:barriers_london_rank                  -0.721 0.470718
la19nmEaling:barriers_london_rank                   -0.676 0.499110
la19nmEnfield:barriers_london_rank                  -0.768 0.442499
la19nmGreenwich:barriers_london_rank                -0.905 0.365429
la19nmHackney:barriers_london_rank                   0.323 0.746543
la19nmHammersmith and Fulham:barriers_london_rank    1.530 0.126056
la19nmHaringey:barriers_london_rank                  0.504 0.614335
la19nmHarrow:barriers_london_rank                   -1.535 0.124794
la19nmHavering:barriers_london_rank                 -0.417 0.676607
la19nmHillingdon:barriers_london_rank               -1.834 0.066734 .
la19nmHounslow:barriers_london_rank                 -1.595 0.110827
la19nmIslington:barriers_london_rank                -0.762 0.446220
la19nmKensington and Chelsea:barriers_london_rank    1.068 0.285397
la19nmKingston upon Thames:barriers_london_rank     -1.280 0.200487
la19nmLambeth:barriers_london_rank                  -0.328 0.743140
la19nmLewisham:barriers_london_rank                  0.111 0.911614
la19nmMerton:barriers_london_rank                    0.525 0.599625
la19nmNewham:barriers_london_rank                    1.161 0.245561
la19nmRedbridge:barriers_london_rank                -1.247 0.212307
la19nmRichmond upon Thames:barriers_london_rank     -0.171 0.864559
la19nmSouthwark:barriers_london_rank                 0.062 0.950560
la19nmSutton:barriers_london_rank                   -0.059 0.952740
la19nmTower Hamlets:barriers_london_rank            -2.440 0.014708 *
la19nmWaltham Forest:barriers_london_rank           -0.593 0.553200
la19nmWandsworth:barriers_london_rank               -0.330 0.741265
la19nmWestminster:barriers_london_rank               3.146 0.001667 **
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 5162 on 4736 degrees of freedom
Multiple R-squared:  0.5789,	Adjusted R-squared:  0.5702
F-statistic: 66.45 on 98 and 4736 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div id="challenge-2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2</h3>
<div class="callout-content">
<p>Using the <code>gapminder</code> data to create a linear model
between a categorical and a continuous variable .</p>
<p>Discuss your question and your findings.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="broom">Broom<a class="anchor" aria-label="anchor" href="#broom"></a></h2>
<hr class="half-width"><p>The ‘broom’ package offers an alternative way of presenting the
output of statistical analysis. It centers around three S3 methods, each
of which take common objects produced by R statistical functions (lm,
t.test, nls, etc) and convert them into a tibble.</p>
<p>These are:</p>
<ul><li>tidy: constructs a tibble that summarizes the model’s statistical
findings. This includes coefficients and p-values for each term in a
regression, per-cluster information in clustering applications, or
per-test information for multtest functions.</li>
<li>augment: add columns to the original data that was modeled. This
includes predictions, residuals, and cluster assignments.</li>
<li>glance: construct a concise one-row summary of the model. This
typically contains values such as R^2, adjusted R^2, and residual
standard error that are computed once for the entire model.</li>
</ul><p>Let’s revisit our initial linear model:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reg_LivEnv_health</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">health_london_rank</span> <span class="op">~</span> <span class="va">livingEnv_london_rank</span>, data <span class="op">=</span> <span class="va">lon_dims_imd_2019</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">reg_LivEnv_health</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Call:
lm(formula = health_london_rank ~ livingEnv_london_rank, data = lon_dims_imd_2019)

Residuals:
     Min       1Q   Median       3Q      Max
-21549.6  -5948.2    609.1   6239.2  15792.2

Coefficients:
                       Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)           1.692e+04  2.274e+02   74.40   &lt;2e-16 ***
livingEnv_london_rank 3.430e-01  1.915e-02   17.91   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 7625 on 4833 degrees of freedom
Multiple R-squared:  0.06225,	Adjusted R-squared:  0.06205
F-statistic: 320.8 on 1 and 4833 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<p>There is a lot of useful information, but it not available in a way
so that you can combine it with other models or do further analysis. We
can convert this to tabular data using the ‘tidy’ function.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tidy</span><span class="op">(</span><span class="va">reg_LivEnv_health</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 2 × 5
  term                   estimate std.error statistic  p.value
  &lt;chr&gt;                     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)           16916.     227.          74.4 0
2 livingEnv_london_rank     0.343    0.0192      17.9 1.63e-69</code></pre>
</div>
<p>The row names have been moved into a column called term, and the
column names are simple and consistent (and can be accessed using
$).</p>
<p>Information about the model can be explored with ‘augment’. The
function augments the original data with information from the model,
such as the fitted values and residuals for each of the original points
in the regression.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">augment</span><span class="op">(</span><span class="va">reg_LivEnv_health</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 4,835 × 8
   health_london_rank livingEnv_london_rank .fitted  .resid     .hat .sigma
                &lt;int&gt;                 &lt;int&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;
 1              32113                  7789  19588.  12525. 0.000250  7624.
 2              29705                 13070  21400.   8305. 0.000252  7625.
 3              17600                  4092  18320.   -720. 0.000458  7626.
 4              17907                  9397  20140.  -2233. 0.000213  7626.
 5              21581                 10629  20562.   1019. 0.000207  7626.
 6              16414                 11162  20745.  -4331. 0.000210  7626.
 7              12334                  8672  19891.  -7557. 0.000226  7625.
 8               9661                  9611  20213. -10552. 0.000211  7625.
 9              16050                  2269  17694.  -1644. 0.000624  7626.
10              18178                  4309  18394.   -216. 0.000441  7626.
# ℹ 4,825 more rows
# ℹ 2 more variables: .cooksd &lt;dbl&gt;, .std.resid &lt;dbl&gt;</code></pre>
</div>
<p>Some of the data presented by ‘augment’ will be discussed in the
episode Linear Regression Diagnostics.</p>
<p>Summary statistics are computed for the entire regression, such as
R^2 and the F-statistic can be accessed with the ‘glance’ function:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">glance</span><span class="op">(</span><span class="va">reg_LivEnv_health</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 12
  r.squared adj.r.squared sigma statistic  p.value    df  logLik     AIC     BIC
      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1    0.0622        0.0621 7625.      321. 1.63e-69     1 -50081. 100167. 100187.
# ℹ 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;</code></pre>
</div>
<div class="section level3">
<h3 id="generalised-linear-models">Generalised linear models<a class="anchor" aria-label="anchor" href="#generalised-linear-models"></a></h3>
<p>We can also use the ‘broom’ functions to present data from
Generalised linear and non-linear models. For example, if we wanted to
explore the Income Rank in relation to whether or not an area was within
the City of London.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># add a variable to indicate whether or not an area is within the City of London</span></span>
<span><span class="va">lon_dims_imd_2019</span> <span class="op">&lt;-</span> <span class="va">lon_dims_imd_2019</span> <span class="op">%&gt;%</span> <span class="fu">mutate</span><span class="op">(</span>city <span class="op">=</span> <span class="va">la19nm</span> <span class="op">==</span> <span class="st">"City of London"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a Generalised Linear Model</span></span>
<span><span class="va">glmlondims</span> <span class="op">&lt;-</span> <span class="fu">glm</span><span class="op">(</span><span class="va">city</span> <span class="op">~</span> <span class="va">Income_london_rank</span>, <span class="va">lon_dims_imd_2019</span>, family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">glmlondims</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Call:
glm(formula = city ~ Income_london_rank, family = "binomial",
    data = lon_dims_imd_2019)

Coefficients:
                     Estimate Std. Error z value Pr(&gt;|z|)
(Intercept)        -7.868e+00  1.004e+00  -7.835 4.68e-15 ***
Income_london_rank  6.888e-05  4.635e-05   1.486    0.137
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 92.295  on 4834  degrees of freedom
Residual deviance: 90.062  on 4833  degrees of freedom
AIC: 94.062

Number of Fisher Scoring iterations: 10</code></pre>
</div>
<p>Use of ‘tidy’:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tidy</span><span class="op">(</span><span class="va">glmlondims</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 2 × 5
  term                 estimate std.error statistic  p.value
  &lt;chr&gt;                   &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)        -7.87      1.00          -7.84 4.68e-15
2 Income_london_rank  0.0000689 0.0000463      1.49 1.37e- 1</code></pre>
</div>
<p>Use of ‘augment’:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">augment</span><span class="op">(</span><span class="va">glmlondims</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 4,835 × 8
   city  Income_london_rank .fitted  .resid     .hat .sigma   .cooksd .std.resid
   &lt;lgl&gt;              &lt;int&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
 1 TRUE               32831   -5.61  3.35   0.00194   0.128   2.65e-1     3.35
 2 TRUE               29901   -5.81  3.41   0.00115   0.127   1.93e-1     3.41
 3 TRUE               18510   -6.59  3.63   0.000233  0.126   8.51e-2     3.63
 4 TRUE                6029   -7.45  3.86   0.000332  0.125   2.87e-1     3.86
 5 FALSE              14023   -6.90 -0.0448 0.000239  0.137   1.20e-7    -0.0448
 6 FALSE               6261   -7.44 -0.0343 0.000330  0.137   9.72e-8    -0.0343
 7 FALSE               3382   -7.64 -0.0311 0.000360  0.137   8.70e-8    -0.0311
 8 FALSE               7506   -7.35 -0.0358 0.000315  0.137   1.01e-7    -0.0358
 9 FALSE               8902   -7.25 -0.0376 0.000298  0.137   1.05e-7    -0.0376
10 FALSE               9033   -7.25 -0.0378 0.000296  0.137   1.06e-7    -0.0378
# ℹ 4,825 more rows</code></pre>
</div>
<p>Use of ‘glance’:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">glance</span><span class="op">(</span><span class="va">glmlondims</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 8
  null.deviance df.null logLik   AIC   BIC deviance df.residual  nobs
          &lt;dbl&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;int&gt; &lt;int&gt;
1          92.3    4834  -45.0  94.1  107.     90.1        4833  4835</code></pre>
</div>
<p>You will notice that the statistics computed by ‘glance’ are
different for glm objects than for lm (e.g. deviance rather than
R^2).</p>
</div>
<div class="section level3">
<h3 id="hypothesis-testing">Hypothesis testing<a class="anchor" aria-label="anchor" href="#hypothesis-testing"></a></h3>
<p>The tidy function can also be applied a range of hypotheses tests,
such as built-in functions like t.test, cor.test, and wilcox.test.</p>
</div>
<div class="section level3">
<h3 id="t-test">t-test<a class="anchor" aria-label="anchor" href="#t-test"></a></h3>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tt</span> <span class="op">&lt;-</span> <span class="fu">t.test</span><span class="op">(</span><span class="va">Income_london_rank</span> <span class="op">~</span> <span class="va">city</span>, <span class="va">lon_dims_imd_2019</span><span class="op">)</span></span>
<span><span class="fu">tidy</span><span class="op">(</span><span class="va">tt</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 10
  estimate estimate1 estimate2 statistic p.value parameter conf.low conf.high
     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1   -5344.    14456.    19800.     -1.24   0.270      5.01  -16407.     5719.
# ℹ 2 more variables: method &lt;chr&gt;, alternative &lt;chr&gt;</code></pre>
</div>
<p>Some cases might have fewer columns (for example, no confidence
interval).</p>
<p>Wilcox test:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu">wilcox.test</span><span class="op">(</span><span class="va">Income_london_rank</span> <span class="op">~</span> <span class="va">city</span>, <span class="va">lon_dims_imd_2019</span><span class="op">)</span></span>
<span><span class="fu">tidy</span><span class="op">(</span><span class="va">wt</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 4
  statistic p.value method                                           alternative
      &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;                                            &lt;chr&gt;
1     9836.   0.174 Wilcoxon rank sum test with continuity correcti… two.sided  </code></pre>
</div>
<p>Since the ‘tidy’ output is already only one row, glance returns the
same output:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># t-test</span></span>
<span><span class="fu">glance</span><span class="op">(</span><span class="va">tt</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 10
  estimate estimate1 estimate2 statistic p.value parameter conf.low conf.high
     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1   -5344.    14456.    19800.     -1.24   0.270      5.01  -16407.     5719.
# ℹ 2 more variables: method &lt;chr&gt;, alternative &lt;chr&gt;</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Wilcox test</span></span>
<span><span class="fu">glance</span><span class="op">(</span><span class="va">wt</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 4
  statistic p.value method                                           alternative
      &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;                                            &lt;chr&gt;
1     9836.   0.174 Wilcoxon rank sum test with continuity correcti… two.sided  </code></pre>
</div>
<p>The chisq.test enables use to investigate whether changes in one
categorical variable are related to changes in another categorical
variable.</p>
<p>The ‘augment’ method is defined only for chi-squared tests, since
there is no meaningful sense, for other tests, in which a hypothesis
test produces output about each initial data point.</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># convert IDAOP_london_decile to a factor so it is not interprested as continuous data</span></span>
<span><span class="va">lon_dims_imd_2019</span><span class="op">$</span><span class="va">IDAOP_london_decile</span> <span class="op">&lt;-</span> <span class="fu">factor</span><span class="op">(</span><span class="va">lon_dims_imd_2019</span><span class="op">$</span><span class="va">IDAOP_london_decile</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># xtabs creates a frequency table of IMD deciles within London borooughs</span></span>
<span><span class="va">chit</span> <span class="op">&lt;-</span> <span class="fu">chisq.test</span><span class="op">(</span><span class="fu">xtabs</span><span class="op">(</span><span class="op">~</span> <span class="va">la19nm</span> <span class="op">+</span> <span class="va">IDAOP_london_decile</span>, data <span class="op">=</span> <span class="va">lon_dims_imd_2019</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in chisq.test(xtabs(~la19nm + IDAOP_london_decile, data =
lon_dims_imd_2019)): Chi-squared approximation may be incorrect</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tidy</span><span class="op">(</span><span class="va">chit</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 4
  statistic p.value parameter method
      &lt;dbl&gt;   &lt;dbl&gt;     &lt;int&gt; &lt;chr&gt;
1     2841.       0       288 Pearson's Chi-squared test</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">augment</span><span class="op">(</span><span class="va">chit</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 330 × 9
   la19nm    IDAOP_london_decile .observed   .prop .row.prop .col.prop .expected
   &lt;fct&gt;     &lt;fct&gt;                   &lt;int&gt;   &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
 1 Barking … 1                           6 1.24e-3    0.0545   0.0124     11.0
 2 Barnet    1                           6 1.24e-3    0.0284   0.0124     21.1
 3 Bexley    1                           0 0          0        0          14.6
 4 Brent     1                          12 2.48e-3    0.0694   0.0248     17.3
 5 Bromley   1                           2 4.14e-4    0.0102   0.00414    19.7
 6 Camden    1                          12 2.48e-3    0.0902   0.0248     13.3
 7 City of … 1                           0 0          0        0           0.599
 8 Croydon   1                           8 1.65e-3    0.0364   0.0166     22.0
 9 Ealing    1                          11 2.28e-3    0.0561   0.0228     19.6
10 Enfield   1                           9 1.86e-3    0.0492   0.0186     18.3
# ℹ 320 more rows
# ℹ 2 more variables: .resid &lt;dbl&gt;, .std.resid &lt;dbl&gt;</code></pre>
</div>
<p>There are a number of underlying assumptions of a Chi-Square test,
these are:</p>
<ul><li><p>Independence: The Chi-Square test assumes that the observations
in the data are independent of each other. This means that the outcome
of one observation should not influence the outcome of another.</p></li>
<li><p>Random sampling: The data should be obtained through random
sampling to ensure that it is representative of the population from
which it was drawn.</p></li>
<li><p>Expected frequency: The Chi-Square test assumes that the expected
frequency count for each cell in the contingency table should be at
least 5. If this assumption is not met, the test results may not be
reliable.</p></li>
</ul><p>As we have received a warning about the reliability of our test, it
is likely that one of these assumptions has not been met, and that this
is not a suitable test for this data.</p>
<div id="challenge-3" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-3" class="callout-inner">
<h3 class="callout-title">Challenge 3</h3>
<div class="callout-content">
<p>Use broom to amend the display of your model outputs.</p>
<p>Which function(s) did you use and why?</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="conventions">Conventions<a class="anchor" aria-label="anchor" href="#conventions"></a></h3>
<p>There are some conventions that enable consistency across the broom
functions, these are: * The output of the tidy, augment and glance
functions is always a tibble.</p>
<ul><li>The output never has rownames. This ensures that you can combine it
with other tidy outputs without fear of losing information (since
rownames in R cannot contain duplicates).</li>
<li>Some column names are kept consistent, so that they can be combined
across different models and so that you know what to expect (in contrast
to asking “is it pval or PValue?” every time).</li>
</ul></div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="23-statistics.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="25-linreg-diagnostics.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="23-statistics.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Basic Statistics:
        </a>
        <a class="chapter-link float-end" href="25-linreg-diagnostics.html" rel="next">
          Next: Assumption...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/UCL-ARC/r-amr-epidemiology/edit/main/episodes/24-linear-reg-broom.Rmd" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/UCL-ARC/r-amr-epidemiology/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/UCL-ARC/r-amr-epidemiology/" class="external-link">Source</a></p>
				<p><a href="https://github.com/UCL-ARC/r-amr-epidemiology/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:ARC.Education@ucl.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.11" class="external-link">sandpaper (0.16.11)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.7" class="external-link">pegboard (0.7.7)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://UCL-ARC.github.io/R-AMR-Epidemiology/24-linear-reg-broom.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Linear regression and Broom",
  "creativeWorkStatus": "active",
  "url": "https://UCL-ARC.github.io/R-AMR-Epidemiology/24-linear-reg-broom.html",
  "identifier": "https://UCL-ARC.github.io/R-AMR-Epidemiology/24-linear-reg-broom.html",
  "dateCreated": "2015-04-18",
  "dateModified": "2025-02-10",
  "datePublished": "2025-02-10"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

